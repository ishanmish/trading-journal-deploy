(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-042c43c5"],{"11df":function(t,e,a){"use strict";var s=window.URL,n=window.Blob,i=window.Worker;function r(t){var e={};t.onmessage=function(a){switch(a.data.type){case"ping":t.postMessage({type:"pong"});break;case"set_timeout":e[a.data.id]=setTimeout((function(){t.postMessage({type:"tick",id:a.data.id})}),a.data.delay);break;case"clear_timeout":clearTimeout(e[a.data.id]);break;case"set_interval":e[a.data.id]=setInterval((function(){t.postMessage({type:"tick",id:a.data.id})}),a.data.interval);break;case"clear_interval":clearInterval(e[a.data.id]);break}}}function o(t){var e=this;this.__ww__=t,this.__timer_handlers__={},this.__ww__.onmessage=function(t){"tick"===t.data.type&&e.__timer_handlers__[t.data.id]()}}function l(){this.__timers__={}}o.prototype.setTimeout=function(t,e,a){this.__timer_handlers__[t]=e,this.__ww__.postMessage({type:"set_timeout",delay:a,id:t})},o.prototype.clearTimeout=function(t){this.__ww__.postMessage({type:"clear_timeout",id:t}),delete this.__timer_handlers__[t]},o.prototype.setInterval=function(t,e,a){this.__timer_handlers__[t]=e,this.__ww__.postMessage({type:"set_interval",interval:a,id:t})},o.prototype.clearInterval=function(t){this.__ww__.postMessage({type:"clear_interval",id:t}),delete this.__timer_handlers__[t]},l.prototype.setTimeout=function(t,e,a){this.__timers__[t]=setTimeout(e,a)},l.prototype.clearTimeout=function(t){clearInterval(this.__timers__[t])},l.prototype.setInterval=function(t,e,a){this.__timers__[t]=setInterval(e,a)},l.prototype.clearInterval=function(t){clearInterval(this.__timers__[t])};var c=null,d=[];function u(t){if(c)t(c);else if(d.push(t),1===d.length){var e,a,u;try{a=s.createObjectURL(new n(["("+r.toString()+")(this)"],{type:"text/javascript"})),u=new i(a)}catch(g){return _(),c=new l,void d.forEach((function(t){t(c)}))}u.onmessage=function(t){"pong"===t.data.type&&(clearInterval(e),c=new o(u),d.forEach((function(t){t(c)})))},e=setTimeout((function(){_(),c=new l,d.forEach((function(t){t(c)}))}),300),u.postMessage({type:"ping"})}function _(){a&&s.revokeObjectURL(a),u&&u.terminate(),e&&clearTimeout(e)}}var _=1;e.setTimeout=function(t,e){var a=_++;return u((function(s){s.setTimeout(a,t,e)})),a},e.clearTimeout=function(t){u((function(e){e.clearTimeout(t)}))},e.setInterval=function(t,e){var a=_++;return u((function(s){s.setInterval(a,t,e)})),a},e.clearInterval=function(t){u((function(e){e.clearInterval(t)}))}},1552:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container holdings gift"},[t.isMobileView?t._e():a("h1",[a("img",{staticClass:"gift-head-icon",attrs:{src:"/static/images/gift.svg"}}),t._v("\n\t\tGift securities\n\t")]),t._v(" "),t.isMobileView?t._e():a("hr",{staticClass:"header-hr"}),t._v(" "),t.pageBanner&&t.pageBanner.length?a("div",{staticClass:"notice text-box yellow"},[a("ul",t._l(t.pageBanner,(function(e,s){return a("li",{key:s,domProps:{innerHTML:t._s(e)}})})),0)]):t._e(),t._v(" "),t.pageReady?a("div",[t.job?a("div",{staticClass:"section text-center"},[a("jobber",{attrs:{main:"Fetching your holdings"}})],1):t._e(),t._v(" "),!(t.holdings&&t.holdings.length>0)||t.job||t.fetchingData||t.holdingsError||t.sortingData?!t.holdings||0!==t.holdings.length||t.job||t.fetchingData||t.holdingsError?t.job||t.fetchingData||!t.holdingsError?t._e():a("div",{staticClass:"section"},[a("error",{attrs:{sub:t.holdingsErrorMsg}})],1):a("div",{staticClass:"section"},[a("empty",{attrs:{main:"",sub:"You do not hold any stocks approved for gifting."}})],1):a("div",{staticClass:"section gift-illustration"},[t._m(0),t._v(" "),t.showHoldings?a("div",{staticClass:"rec-card"},[a("p",[a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showHoldings=!1}}},[a("span",{staticClass:"icon icon-arrow-left"}),t._v("\n\t\t\t\t\t\tModify\n\t\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"rec-box gift-confirm"},[a("div",{staticClass:"row"},[a("div",{class:{"five columns":!0}},[a("label",[t._v("Name")]),t._v(" "),a("p",[t._v(t._s(t._f("clip")(t.giftRec.name,25)))]),t._v(" "),a("label",[t._v("Mobile")]),t._v(" "),a("p",[t._v(t._s(t.giftRec.mobile))])]),t._v(" "),a("div",{class:{"five columns":!0}},[a("label",[t._v("E-mail")]),t._v(" "),t.giftRec.email?a("p",[t._v(t._s(t._f("clip")(t.giftRec.email,25)))]):a("p",[t._v("—")]),t._v(" "),a("label",[t._v("Message")]),t._v(" "),a("p",{staticClass:"text-small text-grey"},[t._v(t._s(t.giftRec.gift_message))])]),t._v(" "),a("div",{class:{"two columns":!0,"text-right":!t.isMobileView}},[a("su-button",{staticClass:"btn btn-blue",attrs:{processing:t.sending,disabled:t.sending||0===t.checkedRows.length},nativeOn:{click:function(e){return e.preventDefault(),t.sendGift.apply(null,arguments)}}},[t._v("Confirm & send")])],1)]),t._v(" "),t.showHoldings?a("su-form",{attrs:{id:"gift_form"}},[a("h2",[t._v("\n\t\t\t\t\t\t\tSelect the securities to gift\n\t\t\t\t\t\t\t"),a("su-radio-group",{model:{value:t.segmentOption,callback:function(e){t.segmentOption=e},expression:"segmentOption"}},[a("su-radio",{attrs:{label:"Equity",value:"EQ"}},[t._v("Equity")]),t._v(" "),a("su-radio",{attrs:{label:"Mutual funds",value:"MF"}},[t._v("Mutual funds")])],1)],1),t._v(" "),t.selectedHoldings.length?a("div",{staticClass:"selected-container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"eight columns"},[a("label",[t._v("Selected securities")]),a("br"),t._v(" "),t._l(t.selectedHoldings,(function(e,s){return a("span",{key:s},[t._v(t._s(e.tradingsymbol)+" ("+t._s(e.giftQty)+")"),s<t.selectedHoldings.length-1?a("span",[t._v(", ")]):t._e()])}))],2),t._v(" "),a("div",{class:{"four columns":!0,"text-right":!t.isMobileView}},[a("label",[t._v("Total approx. value")]),a("br"),t._v(" "),a("span",[t._v(t._s(t._f("inrFormat")(t.getTotalValue,2,null,!0)))])])])]):t._e(),t._v(" "),t.selectedSegmentHoldings&&t.selectedSegmentHoldings.length?a("div",{class:t.isMobileView?"table-section cards":"table-container"},[t.isMobileView?t._l(t.selectedSegmentHoldings,(function(e,s){return a("div",{key:s,staticClass:"card",class:t.holdings.length-1===s?"last":""},[a("div",{staticClass:"top"},[a("div",{staticClass:"top-left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedRows,expression:"checkedRows"}],attrs:{type:"checkbox"},domProps:{value:e.isin,checked:Array.isArray(t.checkedRows)?t._i(t.checkedRows,e.isin)>-1:t.checkedRows},on:{change:function(a){var s=t.checkedRows,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=e.isin,o=t._i(s,r);n.checked?o<0&&(t.checkedRows=s.concat([r])):o>-1&&(t.checkedRows=s.slice(0,o).concat(s.slice(o+1)))}else t.checkedRows=i}}}),t._v(" "),a("span",{staticClass:"checkmark"})]),t._v(" "),t.changingSegment?t._e():a("su-input",{attrs:{type:"number",disabled:-1===t.checkedRows.indexOf(e.isin),max:parseFloat(e.quantity_available_gift),step:"MF"===t.segmentOption?1e-4:1,min:1,required:!0},model:{value:e.giftQty,callback:function(a){t.$set(e,"giftQty",a)},expression:"holding_item.giftQty"}})],1),t._v(" "),a("div",{staticClass:"top-right"},[a("div",[a("label",[t._v("Available")]),t._v(" "+t._s(e["quantity_available_gift"]))])])]),t._v(" "),a("div",{staticClass:"middle"},[a("div",{staticClass:"text-bold symbol"},[t._v(t._s(e["tradingsymbol"]))])]),t._v(" "),a("div",{staticClass:"bottom"},[0!==e["quantity_discrepant"]||null==e["close_price"]?a("div",[a("label",[t._v("Prev. close")]),t._v(" – ")]):a("div",[a("label",[t._v("Prev. close")]),t._v(" "+t._s(t._f("inrFormat")(e["close_price"],2)))]),t._v(" "),null==e["closing_value"]?a("div",[a("label",[t._v("Present value")]),t._v(" – ")]):a("div",[a("label",[t._v("Present value")]),t._v(" "+t._s(t._f("inrFormat")(e["closing_value"],2)))])])])})):a("table",{staticClass:"holdings-table",attrs:{id:"holdings_table"}},[a("thead",[a("tr",[a("td",{staticClass:"row-check table-border"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.allChecked,expression:"allChecked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.allChecked)?t._i(t.allChecked,null)>-1:t.allChecked},on:{change:[function(e){var a=t.allChecked,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.allChecked=a.concat([i])):r>-1&&(t.allChecked=a.slice(0,r).concat(a.slice(r+1)))}else t.allChecked=n},function(e){return t.selectAllInstruments()}]}}),t._v(" "),a("span",{staticClass:"checkmark"})])]),t._v(" "),a("td",{class:["table-border "+t.isSorted("tradingsymbol")],on:{click:function(e){return t.sortTable("tradingsymbol",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("tradingsymbol")]})]),t._v(" "),a("td",{class:t.isSorted("quantity_available_gift"),on:{click:function(e){return t.sortTable("quantity_available_gift",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tAvailable qty.\n\t\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("quantity_available_gift")]})]),t._v(" "),a("td",{class:t.isSorted("close_price"),on:{click:function(e){return t.sortTable("close_price",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tPrev. close\n\t\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("close_price")]})]),t._v(" "),a("td",{class:t.isSorted("closing_value"),on:{click:function(e){return t.sortTable("closing_value",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tPresent value\n\t\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("closing_value")]})]),t._v(" "),a("td",[t._v("Gift qty.")])])]),t._v(" "),a("tbody",t._l(t.selectedSegmentHoldings,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"row-check table-border"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedRows,expression:"checkedRows"}],attrs:{type:"checkbox"},domProps:{value:e.isin,checked:Array.isArray(t.checkedRows)?t._i(t.checkedRows,e.isin)>-1:t.checkedRows},on:{change:function(a){var s=t.checkedRows,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=e.isin,o=t._i(s,r);n.checked?o<0&&(t.checkedRows=s.concat([r])):o>-1&&(t.checkedRows=s.slice(0,o).concat(s.slice(o+1)))}else t.checkedRows=i}}}),t._v(" "),a("span",{staticClass:"checkmark"})])]),t._v(" "),a("td",{staticClass:"textleft table-border"},[a("span",{staticClass:"symbol"},[t._v(t._s(e["tradingsymbol"]))])]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e["quantity_available_gift"])+"\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),0!==e["quantity_discrepant"]||null==e["close_price"]?a("td",{staticClass:"text-light-grey"},[t._v(" – ")]):a("td",[t._v(t._s(t._f("inrFormat")(e["close_price"],2)))]),t._v(" "),null==e["closing_value"]?a("td",[t._v(" – ")]):a("td",[t._v(t._s(t._f("inrFormat")(e["closing_value"],2)))]),t._v(" "),t.changingSegment?t._e():a("td",[a("su-input",{attrs:{type:"number",disabled:-1===t.checkedRows.indexOf(e.isin),max:parseFloat(e.quantity_available_gift),min:1,step:"MF"===t.segmentOption?1e-4:1,required:!0},model:{value:e.giftQty,callback:function(a){t.$set(e,"giftQty",a)},expression:"holding_item.giftQty"}})],1)])})),0)])],2):a("p",[a("span",{staticClass:"icon icon-info"}),t._v(" No holdings approved for gifting found in your portfolio.\n\t\t\t\t\t\t")])]):t._e()],1)]):a("div",{staticClass:"inputcontainer"},[a("div",{staticClass:"rec-box"},[a("div",{staticClass:"row v-align"},[t._m(1),t._v(" "),a("div",{class:{"six columns":!0,"text-right":!t.isMobileView}},[a("span",{staticClass:"text-light-grey text-small"},[t._v("Select securities in the next step")])])]),t._v(" "),a("su-form",{ref:"rec_form",attrs:{id:"rec_form"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"five columns gift-inputs"},[a("su-input",{attrs:{type:"text",maxlength:40,"dynamic-label":"",rules:t.rules.receiverName,placeholder:"Recipient's name",label:"Recipient's name",required:!0},model:{value:t.giftRec.name,callback:function(e){t.$set(t.giftRec,"name",e)},expression:"giftRec.name"}}),t._v(" "),a("div",{staticClass:"gift-inputs gift-mobile"},[a("span",{staticClass:"pre-mobile"},[t._v("+91")]),t._v(" "),a("su-input",{attrs:{type:"number","dynamic-label":"",rules:t.rules.receiverMobile,placeholder:"Recipient's mobile",label:"Recipient's mobile",required:!0},model:{value:t.giftRec.mobile,callback:function(e){t.$set(t.giftRec,"mobile",e)},expression:"giftRec.mobile"}})],1)],1),t._v(" "),a("div",{staticClass:"five columns"},[a("su-input",{attrs:{type:"text",maxlength:50,"dynamic-label":"","no-error":"",placeholder:"Recipient's e-mail (Optional)",label:"Recipient's e-mail (Optional)"},model:{value:t.giftRec.email,callback:function(e){t.$set(t.giftRec,"email",e)},expression:"giftRec.email"}}),t._v(" "),a("su-input",{attrs:{type:"textarea",rows:1,maxlength:250,"dynamic-label":"","no-error":"",placeholder:"Gift message (Optional)",label:"Gift message (Optional)"},model:{value:t.giftRec.gift_message,callback:function(e){t.$set(t.giftRec,"gift_message",e)},expression:"giftRec.gift_message"}})],1),t._v(" "),a("div",{staticClass:"two columns"},[a("label",[t._v(" ")]),a("br"),t._v(" "),a("su-button",{staticClass:"btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.showHoldingsBlock()}}},[t._v("Continue")])],1)])])],1)])]),t._v(" "),a("div",{staticClass:"section",attrs:{id:"approval"}},[t.fetchingData||t.job||t.fetchingHistory?t._e():a("div",{staticClass:"gift-history table-container"},[a("h3",{on:{click:function(e){t.showHistory=!t.showHistory}}},[a("img",{staticClass:"recent-icon",attrs:{src:"/static/images/clock-dark.svg"}}),t._v("\n\t\t\t\t\tHistory\n\t\t\t\t\t"),t.fetchingHistory?a("su-loader"):t._e(),t._v(" "),t.history&&t.history.length>0?a("span",{class:{icon:!0,"icon-chevron-down":!t.showHistory,"icon-chevron-up":t.showHistory}}):t._e()],1),t._v(" "),!t.isMobileView||t.isMobileView&&!t.showHistory?a("hr"):t._e(),t._v(" "),t.showHistory?a("div",[a("input",{attrs:{id:"gift_link",type:"text",value:""}}),t._v(" "),t.history&&t.history.length>0?a("div",{staticClass:"table-container"},[t.isMobileView?a("div",{staticClass:"history-table table-section cards"},t._l(t.history,(function(e,s){return a("div",{key:s,staticClass:"card",class:t.history.length-1===s?"last":""},[a("div",{staticClass:"top"},[a("div",[a("label",[t._v("Receiver")]),t._v(" "+t._s(t._f("clip")(e.receiver_fullname,10))+" ("+t._s(e.receiver_phone_number)+")\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),"ACCEPTED"===e.status.toUpperCase()?a("div",[a("span",{staticClass:"text-light-grey text-small"},[t._v("Claimed by "+t._s(e.claimer_fullname)+" ("+t._s(e.claimed_by)+")")])]):t._e()]),t._v(" "),a("div",{staticClass:"middle"},[a("div",{staticClass:"middle-left"},[a("label",[t._v("Created")]),t._v(" "+t._s(e.creation)+"\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"middle-right"},["ACCEPTED"!==e.status.toUpperCase()?a("div",{staticClass:"gift-status"},[-1!==e.status.toUpperCase().indexOf("TRANSFERRED")?a("span",{staticClass:"status transferred"},[t._v(t._s(e.status))]):a("span",{class:["status "+e.status.toLowerCase()]},[t._v(t._s(e.status))])]):a("div",{staticClass:"gift-status"},[a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(a){return a.preventDefault(),t.showConfirmModal(e.name,"approve",e.claimer_fullname,e.claimed_by)}}},[t._v("Approve")])],1),t._v(" "),"CREATED"!==e.status.toUpperCase()&&("ACCEPTED"!==e.status.toUpperCase()||t.deleting&&t.delItem===e.name)?t._e():a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.showConfirmModal(e.name,"delete")}}},[t._v("Cancel")])])]),t._v(" "),a("div",{staticClass:"bottom"},[a("label",[t._v("Stocks gifted")]),t._v(" "),t._l(e.stocks,(function(s,n){return a("span",{key:n},[t._v(t._s(s.symbol)+" ("+t._s(s.qty)+")"),n<e.stocks.length-1?a("span",[t._v(", ")]):t._e()])}))],2)])})),0):a("table",{staticClass:"history-table"},[t._m(2),t._v(" "),a("tbody",t._l(t.history,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.receiver_fullname)+"\n\t\t\t\t\t\t\t\t\t\t"),"ACCEPTED"===e.status.toUpperCase()?a("div",[a("span",{staticClass:"text-light-grey text-small"},[t._v("Claimed by "+t._s(e.claimer_fullname)+" ("+t._s(e.claimed_by)+")")])]):t._e(),t._v(" "),"CREATED"===e.status.toUpperCase()?a("div",[a("a",{staticClass:"text-small",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.copyLink(e.name)}}},[a("span",{staticClass:"icon icon-copy"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tCopy gift link\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e()]),t._v(" "),a("td",{staticClass:"text-left"},[t._v(t._s(e.receiver_phone_number))]),t._v(" "),a("td",{staticClass:"text-left"},[t._v(t._s(e.creation))]),t._v(" "),a("td",{staticClass:"text-left"},t._l(e.stocks,(function(s,n){return a("span",{key:n},[t._v(t._s(s.symbol)+" ("+t._s(s.qty)+")"),n<e.stocks.length-1?a("span",[t._v(", ")]):t._e()])})),0),t._v(" "),a("td",{staticClass:"text-left"},["ACCEPTED"!==e.status.toUpperCase()?a("div",{staticClass:"gift-status"},[-1!==e.status.toUpperCase().indexOf("TRANSFERRED")?a("span",{staticClass:"status transferred"},[t._v(t._s(e.status))]):a("span",{class:["status "+e.status.toLowerCase()]},[t._v(t._s(e.status))])]):a("div",{staticClass:"gift-status"},[a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(a){return a.preventDefault(),t.showConfirmModal(e.name,"approve",e.claimer_fullname,e.claimed_by)}}},[t._v("Approve")])],1),t._v(" "),"CREATED"!==e.status.toUpperCase()&&("ACCEPTED"!==e.status.toUpperCase()||t.deleting&&t.delItem===e.name)?t._e():a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.showConfirmModal(e.name,"delete")}}},[t._v("Cancel")])])])})),0)])]):t._e()]):t._e(),t._v(" "),t.history&&0===t.history.length?a("p",{staticClass:"text-light-grey"},[a("span",{staticClass:"icon icon-info"}),t._v(" No gifts sent.")]):t._e()])])]):a("div",[a("empty",{attrs:{main:"",sub:""}})],1),t._v(" "),t.showConfirm?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask cancel-pledge-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideConfirmModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showConfirmModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideConfirmModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.confirmMsg))]),t._v(" "),-1!==t.confirmMsg.indexOf("claim")?a("p",{staticClass:"text-grey text-small"},[t._v("\n\t\t\t\t\t\t\t\tTo complete this gift transfer:\n\t\t\t\t\t\t\t\t"),t._m(3)]):t._e(),t._v(" "),""!==t.delItem?a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.deleting,disabled:t.deleting},nativeOn:{click:function(e){return e.preventDefault(),t.deleteRequest.apply(null,arguments)}}},[t._v("Confirm")]):""!==t.approveItem?a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.approving,disabled:t.approving},nativeOn:{click:function(e){return e.preventDefault(),t.approveGift.apply(null,arguments)}}},[t._v("Confirm")]):t._e(),t._v(" "),a("su-button",{staticClass:"btn-grey btn-outline",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.hideConfirmModal.apply(null,arguments)}}},[t._v("Cancel")])],1)])])])])]):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row v-align"},[a("div",{staticClass:"five columns text-center"},[a("img",{attrs:{src:"/static/images/gift.png"}})]),t._v(" "),a("div",{staticClass:"seven columns"},[a("h2",[t._v("Gift your favourite stocks, mutual funds, and ETFs to your friends and family")]),t._v(" "),a("ul",{staticClass:"text-grey"},[a("li",[t._v("Select instruments from your portfolio you wish to gift. "),a("a",{attrs:{target:"_blank",href:"https://docs.google.com/spreadsheets/d/1bT7RpkwXFjZr1vLF1dPxtP76Q9JW4ur_KJOGeuutgI4/"}},[t._v("View list of approved securities")]),t._v(".")]),t._v(" "),a("li",[t._v("We notify the recipient. They log into their Zerodha account to accept the gift.")]),t._v(" "),a("li",[t._v("If they don’t have an account, they can sign up and then accept the gift later.")]),t._v(" "),a("li",[t._v("We notify you of the acceptance and you authorize moving securities to the recipient’s demat. "),a("a",{attrs:{target:"_blank",href:"https://support.zerodha.com/category/your-zerodha-account/transfer-of-shares-and-conversion-of-shares/articles/gift-shares"}},[t._v("Learn more")]),t._v(".")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"six columns"},[a("h2",[t._v("Send a gift")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",{staticClass:"text-left"},[t._v("Recipient name")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Recipient mobile")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Created on")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Securities gifted")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Status")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[t._v("\n\t\t\t\t\t\t\t\t\t\tStep 1: Approve beneficiary account addition at CDSL. You'll receive an email from CDSL with an OTP between 3PM and 5PM to add a beneficiary to your account. This step is applicable only the first time you gift a stock to someone, similar to adding a beneficiary for bank accounts. "),a("a",{attrs:{target:"_blank",href:"https://support.zerodha.com/category/your-zerodha-account/transfer-of-shares-and-conversion-of-shares/gifting-securities/articles/gift-shares"}},[t._v("Read more")]),t._v(".\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("li",[t._v("\n\t\t\t\t\t\t\t\t\t\tStep 2: Authorise the transfer with the CDSL OTP received on your email between 6PM and 8PM. "),a("a",{attrs:{target:"_blank",href:"https://support.zerodha.com/category/your-zerodha-account/transfer-of-shares-and-conversion-of-shares/gifting-securities/articles/gift-shares"}},[t._v("Read more")]),t._v(".\n\t\t\t\t\t\t\t\t\t")])])}],i=a("108d"),r=a("02bc"),o=a("2e34"),l=a("5dfe"),c=a("3fb9"),d=a("2f62"),u=a("ba6a"),_=a("5665");a("9dae");function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){h(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function h(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m=[];function f(t,e){return t+"?date="+e}function v(t){var e=t,a=""+(e.getMonth()+1),s=""+e.getDate(),n=e.getFullYear();return a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),[n,a,s].join("-")}var y={data:function(){var t=function(t,e){if(!e.match(/^[0-9]{10}$/))return new Error("Enter a valid mobile.")};return{showHoldings:!1,job:!1,params:{},holdings:[],date:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),format:"YYYY-MM-DD",sortKey:"tradingsymbol",sortBy:"asc",segment:"EQ",disabled:{to:new Date(2017,3,1)},timeout:"",noResults:!1,fetchingData:!1,sortingData:!1,searchQuery:"",lastUpdated:{},holdingsError:!1,holdingsErrorMsg:"Please try again",firstPoll:!0,checkedRows:[],selectedHoldings:[],allChecked:!1,sending:!1,giftRec:{name:"",mobile:"",email:"",gift_message:""},showHistory:!0,history:{},fetchingHistory:!1,deleting:!1,delItem:"",approving:!1,approveItem:"",showConfirm:!1,confirmMsg:"",rules:{receiverName:[{required:!0}],receiverMobile:[{validator:t,required:!0,message:"Enter a valid mobile."}]},pageReady:!1,pageBanner:[],segmentOption:"EQ",changingSegment:!1}},mounted:function(){if(this.pageStatus){var t="all";this.pageStatus.hasOwnProperty(this.$route.name)&&(t=this.$route.name),this.pageStatus.hasOwnProperty(t)?("READY"===this.pageStatus[t].status.toUpperCase()&&(this.pageReady=!0),this.pageStatus[t].message&&this.pageStatus[t].message.length&&(this.pageBanner=this.pageStatus[t].message)):this.pageReady=!0}else this.pageReady=!0;if(this.pageReady){this.getHoldingsData(this.date,this.segment),this.getHistory(),-1!==document.location.href.indexOf("#approval")&&(this.showHistory=!0);var e=this;window.addEventListener("keyup",(function(t){27===t.keyCode&&e.hideConfirmModal()}))}else this.$webviewReady()},computed:p(p({},Object(d["c"])(["isMobileView","activeSegments","pageStatus"])),{},{getTotalValue:function(){if(this.selectedHoldings.length){var t=0;for(var e in this.selectedHoldings)this.selectedHoldings[e].close_price&&(t+=this.selectedHoldings[e].giftQty*this.selectedHoldings[e].close_price);return t}},selectedSegmentHoldings:function(){var t=this;this.changingSegment=!0;var e=this.holdings.filter((function(e){return e.segment===t.segmentOption})),a=[];for(var s in e){var n=e[s];n["giftQty"]=n["quantity_available_gift"],a.push(n)}return this.$nextTick((function(){t.changingSegment=!1})),a}}),watch:{checkedRows:function(t){t&&t.length?this.selectedHoldings=this.holdings.filter((function(e){return-1!==t.indexOf(e.isin)})):this.selectedHoldings=[]},segmentOption:function(t){t&&(this.checkedRows=[],this.allChecked=!1)}},methods:{copyLink:function(t){document.getElementById("gift_link").value="https://console.zerodha.com/gift/accept/?id="+t,document.getElementById("gift_link").setAttribute("value","https://console.zerodha.com/gift/accept/?id="+t),document.getElementById("gift_link").select(),document.execCommand("copy"),document.getElementById("gift_link").value="",document.getElementById("gift_link").setAttribute("value",""),this.$toast.success({message:"Gift link copied to clipboard.",orientation:this.$toast.TOP_RIGHT,duration:6e3})},showConfirmModal:function(t,e,a,s){var n=this;"delete"===e?(this.confirmMsg="Delete this request?",this.delItem=t):"approve"===e&&(this.confirmMsg="Your gift has been claimed by "+a+" ("+s+"). Approve this request?",this.approveItem=t),this.$nextTick((function(){n.showConfirm=!0}))},hideConfirmModal:function(){this.delItem="",this.approveItem="",this.approving=!1,this.deleting=!1,this.showConfirm=!1},selectAllInstruments:function(){if(this.checkedRows=[],this.allChecked)for(var t=0;t<this.holdings.length;t++)this.holdings[t].segment===this.segmentOption&&this.checkedRows.push(this.holdings[t].isin)},isSorted:function(t){return t===this.sortKey?" sorted":""},getsortBy:function(t){return t===this.sortKey?"arrow-show arrow "+this.sortBy:"asc"},sortTable:function(t,e){if(m=[],t===this.sortKey)if("asc"===this.sortBy){this.sortBy="desc";for(var a=document.getElementById("holdings_table").querySelectorAll("thead td span"),s=0;s<a.length;s++)a[s].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow desc":e.target.className="arrow desc"}else{this.sortBy="asc";for(var n=document.getElementById("holdings_table").querySelectorAll("thead td span"),i=0;i<n.length;i++)n[i].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow asc":e.target.className="arrow asc"}else{this.sortKey=t,this.sortBy="asc";for(var r=document.getElementById("holdings_table").querySelectorAll("thead td span"),o=0;o<r.length;o++)r[o].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow asc":e.target.className="arrow asc",this.params.page=1}this.sortingData=!0,this.getHoldingsData(this.params.date,this.params.segment,this.sortKey,this.sortBy,!0)},compare:function(t,e){return"tradingsymbol"===this.sortKey?t[this.sortKey]<e[this.sortKey]?"desc"===this.sortBy?1:-1:t[this.sortKey]>e[this.sortKey]?"desc"===this.sortBy?-1:1:0:null===t[this.sortKey]?1:null===e[this.sortKey]?-1:parseFloat(t[this.sortKey])<parseFloat(e[this.sortKey])?"desc"===this.sortBy?1:-1:parseFloat(t[this.sortKey])>parseFloat(e[this.sortKey])?"desc"===this.sortBy?-1:1:0},pollData:function(){var t=this;this.firstPoll?setTimeout((function(){return t.getHoldingsData(t.date)}),500):setTimeout((function(){return t.getHoldingsData(t.date)}),2e3),this.firstPoll=!1},getHoldingsData:function(t,e,a,s,n,i){var r=this;if(this.holdingsError=!1,this.noResults=!1,n||i||(this.fetchingData=!0),i&&(this.sortingData=!0),n)return m=this.holdings,m.sort(this.compare),void this.$nextTick((function(){r.sortingData=!1}));var o=f(_["a"].getHoldings,v(this.date));this.job=!0,u["a"].request("GET",!0,o,null,(function(t,e){if("PENDING"===t.toUpperCase())r.pollData();else if("SUCCESS"===t.toUpperCase()){r.firstPoll=!0,r.params={date:r.date},r.holdings=[];var a=[],s=e.data.data.result;for(var o in s)for(var l=s[o],c=0;c<l.length;c++){var d=l[c];d["row"]=c,d["segment"]=o.toUpperCase(),a.push(d)}for(var _=a.length-1;_>=0;_--){var g=parseFloat(a[_]["quantity_available"])+parseFloat(a[_]["quantity_pledged_for_loan"])+parseFloat(a[_]["quantity_pledged_for_margin"]);a[_]["quantity_available_gift"]=a[_]["quantity_available"]-a[_]["quantity_t1"],a[_]["quantity_available_gift"]<1?a.splice(_,1):isNaN(g)?a[_]["qty_total"]=0:(parseFloat(g)%1!==0&&(g=parseFloat(g).toFixed(3)),a[_]["qty_total"]=g)}if(r.sortingData=!1,n||i||r.getApprovedStocks(a),0===r.holdings.length?r.noResults=!0:r.noResults=!1,document.getElementById("holdings_table"))for(var p=document.getElementById("holdings_table").querySelectorAll("tbody tr"),h=0;h<p.length;h++)p[h].className="";r.sortingData=!1,r.$webviewReady()}else"FAILURE"===t.toUpperCase()?(r.$webviewReady(),r.job=!1,r.fetchingData=!1,r.sortingData=!1,r.firstPoll=!0,r.holdingsError=!0,r.$toast.error({message:"Error fetching holdings: "+e.data.message,orientation:r.$toast.TOP_RIGHT,duration:6e3})):"UNDEFINED"===t.toUpperCase()&&(r.$webviewReady(),r.job=!1,r.fetchingData=!1,r.sortingData=!1,r.$toast.error({message:"Error fetching holdings:"+u["a"].errorMessage(),orientation:r.$toast.TOP_RIGHT,duration:6e3}))}))},searchFilter:function(){this.searchQuery.trim().length>0?-1===this.selectedFilters.indexOf("")&&this.selectedFilters.push(""):-1!==this.selectedFilters.indexOf("")&&this.selectedFilters.splice(this.selectedFilters.indexOf(""),1)},showHoldingsBlock:function(){-1!==this.activeSegments.indexOf("EQ")?this.$refs["rec_form"]&&this.$refs["rec_form"].validate()&&(this.showHoldings=!0):this.$toast.warning({message:"Your equity account is inactive/dormant. <a href='/account/segment-activation'>Activate Segment</a>.",orientation:this.$toast.TOP_RIGHT,duration:8e3})},hideHoldingsBlock:function(){this.showHoldings=!1,this.giftRec={name:"",mobile:"",email:"",gift_message:""}},sendGift:function(){var t=this;if(document.getElementById("gift_form")&&document.getElementById("gift_form").reportValidity()){this.sending=!0;var e=[],a=function(a){var s=t.holdings.find((function(e){return e.isin===t.checkedRows[a]}));e.push({isin:s.isin,instrument_id:s.instrument_id,quantity:parseFloat(s.giftQty),quantity_available:parseFloat(s.quantity_available_gift)})};for(var s in this.checkedRows)a(s);var n={name:this.giftRec.name,mobile:this.giftRec.mobile,email:this.giftRec.email,gift_message:this.giftRec.gift_message,gift_items:e,segment:this.segmentOption};u["a"].request("POST",!1,_["a"].sendGift,n,(function(e,a){t.sending=!1,"SUCCESS"===e.toUpperCase()?(t.hideHoldingsBlock(),t.checkedRows=[],t.getHistory(),t.$toast.success({message:"Gift notification sent to the recipient. Awaiting confirmation.",orientation:t.$toast.TOP_RIGHT,duration:8e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error sending gift: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error sending gift:"+u["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}},getApprovedStocks:function(t){var e=this;this.fetchingData=!0,u["a"].request("GET",!1,_["a"].getApprovedStocks,null,(function(a,s){if(e.sending=!1,e.fetchingData=!1,e.job=!1,e.sortingData=!1,"SUCCESS"===a.toUpperCase())for(var n=s.data.data.result,i=0;i<t.length;i++){t[i]["giftQty"]=parseFloat(t[i]["quantity_available_gift"]);for(var r=0;r<n.length;r++)t[i].isin===n[r].isin.trim()&&e.holdings.push(t[i])}else"FAILURE"===a.toUpperCase()?e.$toast.error({message:"Error fetching approved stocks: "+s.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3}):e.$toast.error({message:"Error fetching approved stocks:"+u["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3})}))},getHistory:function(){var t=this;this.fetchingHistory=!0,u["a"].request("GET",!1,_["a"].getGiftHistory,null,(function(e,a){if(t.fetchingHistory=!1,"SUCCESS"===e.toUpperCase()){var s=a.data.data.result,n={},i=[],r=[],o=[],l=[],c=[],d=[],_=[];for(var g in t.history=[],s)n.hasOwnProperty(s[g].name)||(n[s[g].name]=s[g],n[s[g].name]["stocks"]=[]),n[s[g].name]["stocks"].push({symbol:s[g].tradingsymbol,qty:s[g].quantity});for(var p in n)"ACCEPTED"===n[p].status.toUpperCase()?i.push(n[p]):"CREATED"===n[p].status.toUpperCase()?r.push(n[p]):"APPROVED"===n[p].status.toUpperCase()?o.push(n[p]):"PROCESSING"===n[p].status.toUpperCase()?l.push(n[p]):-1!==n[p].status.toUpperCase().indexOf("TRANSFERRED")?c.push(n[p]):"FAILED"===n[p].status.toUpperCase()?d.push(n[p]):"CANCELED"===n[p].status.toUpperCase()&&_.push(n[p]);t.history=i.concat(r,o,l,c,d,_),document.getElementById("approval")&&-1!==document.location.href.indexOf("#approval")&&document.getElementById("approval").scrollIntoView({behavior:"smooth"})}else"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching gift history: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching gift history:"+u["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},deleteRequest:function(){var t=this;this.deleting=!0,u["a"].request("POST",!1,_["a"].cancelGift,{gift_id:this.delItem},(function(e,a){t.deleting=!1,"SUCCESS"===e.toUpperCase()?(t.getHistory(),t.hideConfirmModal(),t.$toast.success({message:"Gift request deleted",orientation:t.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error deleting gift request: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error deleting gift request:"+u["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},approveGift:function(){var t=this;this.approving=!0,u["a"].request("POST",!1,_["a"].authoriseGift,{gift_id:this.approveItem},(function(e,a){"SUCCESS"===e.toUpperCase()?(t.approving=!1,console.log("success")):"FAILURE"===e.toUpperCase()?428===a.status&&a.data.message?(t.invokeCDSL(a.data.message,t.approveItem),t.hideConfirmModal()):(t.approving=!1,t.$toast.error({message:"Error approving gift: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.approving=!1,t.$toast.error({message:"Error approving gift:"+u["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))},invokeCDSL:function(t,e){var a=this;try{KiteConnect.ready((function(){var s=new KiteConnect("console");s.authHoldings(t,(function(){var s=this;u["a"].request("POST",!1,_["a"].approveGift,{gift_id:e,request_id:t},(function(t,e){a.approving=!1,"SUCCESS"===t.toUpperCase()?(a.getHistory(),a.$toast.success({message:"Gift approved. Add beneficiary to CDSL account with OTP between 3PM and 5PM followed by authorization of transfer with CDSL OTP between 6PM and 8PM. <a target='_blank' href='https://support.zerodha.com/category/your-zerodha-account/transfer-of-shares-and-conversion-of-shares/gifting-securities/articles/gift-shares'>Read more</a>.",orientation:a.$toast.TOP_RIGHT,duration:1e4})):s.$toast.error({message:"Error approving gift:"+u["a"].errorMessage(),orientation:s.$toast.TOP_RIGHT,duration:6e3})}))}))}))}catch(s){this.$toast.error({message:"Something went wrong. Please try again.",orientation:this.$toast.TOP_RIGHT,duration:6e3})}}},components:{jobber:o["a"],"su-button":l["a"],empty:r["a"],error:c["default"],"su-form":i["a"]}},b=y,C=a("2877"),w=Object(C["a"])(b,s,n,!1,null,null,null);e["default"]=w.exports},"1a5a":function(t,e,a){"use strict";var s=a("d68e");function n(t){var e=this;this.__filters_in__=[],this.__filters_out__=[],this.__subscriptions__=[],this.__node_id__=Math.floor(1e10*Math.random())+1,this.__last_message_cnt__=0,this.__ignore_list__={},this.__router__=t.router,this.__router__.onmessage((function(t,a){e.__onmessage__(t,a)})),this.__lock_handlers__={},this.filterOut((function(t,a,s){if("!sys.lock.request"===t){var n=a.data.fn,i=a.data.id;delete a.data.fn,e.__lock_handlers__[a.id]=function(){n((function(){e.emit("!sys.lock.release",{id:i})}))}}s(t,a)})),this.filterIn((function(t,a,s){"!sys.lock.acquired"===t&&e.__lock_handlers__[a.data.request_id]&&(e.__lock_handlers__[a.data.request_id](),delete e.__lock_handlers__[a.data.request_id]),s(t,a)}))}n.prototype.emit=function(t,e,a){var n=this,i={id:this.__node_id__+"_"+this.__last_message_cnt__++,node_id:this.__node_id__,data:e};a||(this.__ignore_list__[i.id]=!0),s.asyncEach(this.__filters_out__,t,i,(function(t,e){n.__router__.broadcast(t,e)}))},n.prototype.on=function(t,e){return this.__subscriptions__.push({channel:t,handler:e}),this.emit("!sys.channels.add",{channel:t}),this},n.prototype.off=function(t,e){var a=this;this.__subscriptions__=this.__subscriptions__.reduce((function(s,n){return n.channel!==t||e&&e!==n.handler?(s.push(n),s):(a.emit("!sys.channels.remove",{channel:t}),s)}),[])},n.prototype.lock=function(t,e,a){a||(a=e,e=5e3),this.emit("!sys.lock.request",{id:t,timeout:e,fn:a})},n.prototype.filterIn=function(t){return this.__filters_in__.push(t),this},n.prototype.filterOut=function(t){return this.__filters_out__.push(t),this},n.prototype.__onmessage__=function(t,e){var a=this;s.asyncEach(this.__filters_in__,t,e,(function(t,e){a.__ignore_list__[e.id]||a.__subscriptions__.forEach((function(a){a.channel===t&&a.handler(e.data,t)}))}))},t.exports=n},"1bef":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container holdings gift"},[t.isMobileView?t._e():a("h1",[a("img",{staticClass:"gift-head-icon",attrs:{src:"/static/images/gift.svg"}}),t._v("\n\t\tAccept gift\n\t")]),t._v(" "),t.isMobileView?t._e():a("hr",{staticClass:"header-hr"}),t._v(" "),t.fetchingData?a("div",{staticClass:"section text-center"},[a("jobber",{attrs:{main:"Fetching gift details",sub:""}})],1):t._e(),t._v(" "),!t.fetchingData&&t.holdingsError?a("div",{staticClass:"section"},[a("error",{attrs:{main:t.holdingsErrorMsg,sub:""}})],1):t._e(),t._v(" "),t.fetchingData||t.holdingsError||!t.giftDetails[t.giftID]?t._e():a("div",{staticClass:"section accept-head"},[a("div",{staticClass:"gift-illustration text-center"},[a("img",{attrs:{src:"/static/images/gift.png"}}),t._v(" "),a("h3",{class:{"no-margin":t.giftDetails[t.giftID].gift_message}},[t._v("\n\t\t\t\t"+t._s(t.giftDetails[t.giftID].sender_fullname)+" ("+t._s(t.giftDetails[t.giftID].gifted_by)+") has sent you "+t._s(t.giftDetails[t.giftID].stocks.length)+" stock"),t.giftDetails[t.giftID].stocks.length>1?a("span",[t._v("s")]):t._e(),t._v(" as gift.\n\t\t\t")]),t._v(" "),t.giftDetails[t.giftID].gift_message?a("p",[a("em",[t._v(t._s(t.giftDetails[t.giftID].gift_message))])]):t._e(),t._v(" "),a("div",{staticClass:"gift-history table-container accept-table"},[a("table",{staticClass:"history-table"},[t._m(0),t._v(" "),a("tbody",t._l(t.giftDetails[t.giftID].stocks,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left table-border"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.symbol)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.qty)+"\n\t\t\t\t\t\t\t")])])})),0)]),a("br")]),t._v(" "),"accepted"===t.giftDetails[t.giftID].status.toLowerCase()||t.accepted?a("p",[a("span",{staticClass:"icon icon-check"}),t._v("\n\t\t\t\tYou have accepted this gift.\n\t\t\t")]):a("div",[a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",disabled:t.accepting,processing:t.accepting},nativeOn:{click:function(e){return e.preventDefault(),t.accept.apply(null,arguments)}}},[t._v("Accept gift")])],1),t._v(" "),t._m(1)])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"grey-back"},[a("tr",[a("td",{staticClass:"text-left table-border"},[t._v("Stock")]),t._v(" "),a("td",[t._v("Qty.")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-light-grey text-small"},[t._v("Once you accept, the sender has to transfer the stocks to your demat. "),a("a",{attrs:{href:"https://support.zerodha.com/category/your-zerodha-account/transfer-of-shares-and-conversion-of-shares/articles/receive-gifted-shares"}},[t._v("Learn more")]),t._v(".")])}],i=a("02bc"),r=a("2e34"),o=a("5dfe"),l=a("3fb9"),c=a("2f62"),d=a("ba6a"),u=a("5665");function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var h={data:function(){return{fetchingData:!1,holdingsError:!1,holdingsErrorMsg:"Please try again",giftID:"",giftDetails:{},accepting:!1,accepted:!1}},mounted:function(){this.getGiftDetails()},computed:g({},Object(c["c"])(["isMobileView"])),methods:{getGiftDetails:function(){var t=this;this.$route.query&&this.$route.query.id?(this.giftID=encodeURIComponent(this.$route.query.id),this.fetchingData=!0,d["a"].request("GET",!1,u["a"].getGiftDetails+"?gift_id="+this.giftID,null,(function(e,a){if(t.fetchingData=!1,"SUCCESS"===e.toUpperCase()){var s=a.data.data.result;for(var n in t.giftDetails={},s)t.giftDetails.hasOwnProperty(s[n].name)||(t.giftDetails[s[n].name]=s[n],t.giftDetails[s[n].name]["stocks"]=[]),t.giftDetails[s[n].name]["stocks"].push({symbol:s[n].trading_symbol,qty:s[n].quantity})}else"FAILURE"===e.toUpperCase()?(t.holdingsError=!0,t.$toast.error({message:"Error fetching gift details: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.holdingsError=!0,t.$toast.error({message:"Error fetching gift details:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))):this.holdingsError=!0},accept:function(){var t=this;this.accepting=!0,d["a"].request("POST",!1,u["a"].claimGift,{gift_id:this.giftID,gifted_by:this.giftDetails[this.giftID].gifted_by},(function(e,a){t.accepting=!1,"SUCCESS"===e.toUpperCase()?(t.accepted=!0,t.$toast.success({message:"You've accepted the gift. Waiting for the sender to complete the demat transfer.",orientation:t.$toast.TOP_RIGHT,duration:8e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error accepting gift: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error accepting gift:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}},components:{jobber:r["a"],"su-button":o["a"],empty:i["a"],error:l["default"]}},m=h,f=a("2877"),v=Object(f["a"])(m,s,n,!1,null,null,null);e["default"]=v.exports},2388:function(t,e,a){"use strict";var s=a("14f3"),n=a("ec83"),i=(1+Math.sqrt(5))/2;function r(t,e,a,i,r,o){var l,c,d,u,_,g,p,h,m,f,v,y=[],b=e.children,C=0,w=0,k=b.length,x=e.value;while(C<k){d=r-a,u=o-i;do{_=b[w++].value}while(!_&&w<k);for(g=p=_,f=Math.max(u/d,d/u)/(x*t),v=_*_*f,m=Math.max(p/v,v/g);w<k;++w){if(_+=c=b[w].value,c<g&&(g=c),c>p&&(p=c),v=_*_*f,h=Math.max(p/v,v/g),h>m){_-=c;break}m=h}y.push(l={value:_,dice:d<u,children:b.slice(C,w)}),l.dice?Object(s["a"])(l,a,i,r,x?i+=u*_/x:o):Object(n["a"])(l,a,i,x?a+=d*_/x:r,o),x-=_,C=w}return y}e["a"]=function t(e){function a(t,a,s,n,i){r(e,t,a,s,n,i)}return a.ratio=function(e){return t((e=+e)>1?e:1)},a}(i)},2456:function(t,e,a){"use strict";var s,n={},i=function(){try{if(s=window.localStorage,!s)return!1;s.setItem("live_local_storage_is_writable_test",""),s.removeItem("live_local_storage_is_writable_test")}catch(t){return!1}return!(document.documentMode&&document.documentMode<9)&&!navigator.userAgent.match("CriOS")}();function r(){}Object.defineProperty(r.prototype,"length",{get:function(){return i?s.length:Object.keys(n).length}}),r.prototype.getItem=function(t){return i?s.getItem(t):n.hasOwnProperty(t)?n[t]:null},r.prototype.setItem=function(t,e){i?s.setItem(t,e):n[t]=e},r.prototype.removeItem=function(t){i?s.removeItem(t):n[t]=null},r.prototype.key=function(t){return i?s.key(t):Object.keys(n)[t]},t.exports=r},2878:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container funds-page"},[t.isMobileView?t._e():a("h1",[a("span",{staticClass:"icon icon-credit-card"}),t._v("\n\t\t\tPayins history\n\t\t")]),t._v(" "),t.isMobileView?t._e():a("hr"),t.isMobileView?t._e():a("br"),t._v(" "),t.notes&&t.notes.length?a("div",{staticClass:"notice text-box yellow"},[a("ul",t._l(t.notes,(function(e,s){return a("li",{key:s},[a("span",{domProps:{innerHTML:t._s(e)}})])})),0)]):t._e(),t._v(" "),t.fetchingHistory?a("jobber",{attrs:{main:"Fetching your payins",sub:"",loader:!0}}):t._e(),t._v(" "),t.fetchingHistory||t.historyError?t._e():a("div",{staticClass:"section"},[a("div",{staticClass:"action-tabs"},[a("span",{class:["equity"===t.activeSection?"active":"","tab","equity"],on:{click:function(e){return t.displayTab("equity")}}},[t._v("\n                    Equity")]),a("span",{class:["commodity"===t.activeSection?"active":"","tab","commodity"],on:{click:function(e){return t.displayTab("commodity")}}},[t._v("\n                    Commodity")])])]),t._v(" "),t.fetchingHistory||t.historyError||"equity"!==t.activeSection?t._e():a("div",{staticClass:"section table-section"},[t.history.eq&&t.history.eq.length?a("div",{staticClass:"table-container"},[a("table",{staticClass:"history-table eq-recent"},[t._m(0),t._v(" "),a("tbody",t._l(t.history.eq,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left table-border"},[a("span",{staticClass:"date"},[t._v(t._s(t._f("dateFilter")(e["datetime"],"date")))]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(t._f("dateFilter")(e["datetime"],"time")))])]),t._v(" "),a("td",{staticClass:"text-left"},[a("span",[t._v(t._s(e.payment_mode.toUpperCase()))]),a("br"),t._v(" "),e.remarks?a("span",{staticClass:"text-grey text-small"},[t._v(t._s(e.remarks))]):t._e()]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.cashier_reference)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.bank_reference)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[a("span",[t._v(t._s(t._f("capitalize")(e.payment_status)))]),a("br"),t._v(" "),"UPI"!==e.payment_mode.toUpperCase()&&"NETBANKING"!==e.payment_mode.toUpperCase()||"SUCCESS"===e.payment_status.toUpperCase()?t._e():a("span",[a("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.getPayinDetails(e.payment_mode,e.cashier_reference)}}},[t._v("Fetch details")]),t._v(" "),t.isLoading(e.cashier_reference)?a("su-loader"):t._e()],1)]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.amount)+"\n\t\t\t\t\t\t\t")])])})),0)])]):a("empty",{attrs:{main:"No recent payins found",sub:""}})],1),t._v(" "),t.fetchingHistory||t.historyError||"commodity"!==t.activeSection?t._e():a("div",{staticClass:"section table-section"},[t.history.com&&t.history.com.length?a("div",{staticClass:"table-container"},[a("table",{staticClass:"history-table com-recent"},[t._m(1),t._v(" "),a("tbody",t._l(t.history.com,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left table-border"},[a("span",{staticClass:"date"},[t._v(t._s(t._f("dateFilter")(e["datetime"],"date")))]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(t._f("dateFilter")(e["datetime"],"time")))])]),t._v(" "),a("td",{staticClass:"text-left"},[a("span",[t._v(t._s(e.payment_mode.toUpperCase()))]),a("br"),t._v(" "),e.remarks?a("span",{staticClass:"text-grey text-small"},[t._v(t._s(e.remarks))]):t._e()]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.cashier_reference)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.bank_reference)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[a("span",[t._v(t._s(t._f("capitalize")(e.payment_status)))]),a("br"),t._v(" "),"UPI"!==e.payment_mode.toUpperCase()&&"NETBANKING"!==e.payment_mode.toUpperCase()||"SUCCESS"===e.payment_status.toUpperCase()?t._e():a("span",[a("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.getPayinDetails(e.payment_mode,e.cashier_reference)}}},[t._v("Fetch details")]),t._v(" "),t.isLoading(e.cashier_reference)?a("su-loader"):t._e()],1)]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.amount)+"\n\t\t\t\t\t\t\t")])])})),0)])]):a("empty",{attrs:{main:"No recent payins found",sub:""}})],1),t._v(" "),t.historyError&&!t.fetchingHistory?a("div",{staticClass:"section"},[a("error")],1):t._e()],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",{staticClass:"text-left table-border"},[t._v("\n                                Date\n                            ")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n                                Method\n                            ")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n                                Payment ID\n                            ")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v("\n                                Bank reference\n                            ")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v("\n                                Status\n                            ")]),t._v(" "),a("td",[t._v("\n                                Amount\n                            ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",{staticClass:"text-left table-border"},[t._v("\n                                Date\n                            ")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n                                Method\n                            ")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n                                Payment ID\n                            ")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v("\n                                Bank reference\n                            ")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v("\n                                Status\n                            ")]),t._v(" "),a("td",[t._v("\n                                Amount\n                            ")])])])}],i=a("2e34"),r=a("02bc"),o=a("3fb9"),l=a("2f62"),c=a("ba6a"),d=a("5665");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function _(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){g(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function g(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var p={data:function(){return{fetchingHistory:!1,historyError:!1,activeSection:"equity",history:{},fetchingDetails:{},notes:[]}},mounted:function(){this.getPayinHistory()},computed:_({},Object(l["c"])(["isMobileView"])),methods:{isLoading:function(t){return!!this.fetchingDetails[t]},getPayinHistory:function(){var t=this;this.fetchingHistory=!0,c["a"].request("GET",!1,d["a"].getPayinHistory,null,(function(e,a){if(t.fetchingHistory=!1,"SUCCESS"===e.toUpperCase()){var s=a.data.data.result.data.payins;s&&(t.history["eq"]=s.filter((function(t){return"equity"===t.segment})),t.history["com"]=s.filter((function(t){return"commodity"===t.segment}))),t.notes=a.data.data.result.data.notes}else"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching payins history: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching payins history:"+c["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},getPayinDetails:function(t,e){var a=this;this.fetchingDetails[e]=!0;var s=d["a"].getPayinDetails+"?mode="+t+"&cashier_ref="+e;c["a"].request("GET",!1,s,null,(function(t,s){if(a.fetchingDetails[e]=!1,"SUCCESS"===t.toUpperCase()){var n=s.data.data.result.data.message;a.$toast.info({message:n,orientation:a.$toast.TOP_RIGHT,duration:8e3})}else"FAILURE"===t.toUpperCase()?a.$toast.error({message:"Error fetching payins details: "+s.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3}):a.$toast.error({message:"Error fetching payins details:"+c["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3})}))},displayTab:function(t){this.activeSection=t}},components:{jobber:i["a"],empty:r["a"],error:o["default"]}},h=p,m=a("2877"),f=Object(m["a"])(h,s,n,!1,null,null,null);e["default"]=f.exports},"29db":function(t,e,a){"use strict";var s=a("11df"),n=a("2456"),i=a("d68e"),r=4e3,o=r/4;function l(t){var e=this;t=t||{},this.__namespace__=t.namespace||"tabex_default_",this.__node_id__=Math.floor(1e10*Math.random())+1,this.__last_message_cnt__=0,this.__handlers__=[],this.__router_channels__={},this.__router_id_prefix__=this.__namespace__+"router_",this.__router_channels_prefix__=this.__namespace__+"subscribed_",this.__lock_prefix__=this.__namespace__+"lock_",this.__storage_events_filter__=[];for(var a=0;a<100;a++)this.__storage_events_filter__.push("");this.__ls__=new n,this.__master_id__=null,i.addEvent(window,"storage",(function(t){null!==t.key?"onstoragecommit"in document?setTimeout((function(){e.__on_changed__(t)}),1):e.__on_changed__(t):e.__check_master__()})),this.__destroyed__=!1,i.addEvent(window,"beforeunload",(function(){e.__destroy__()})),i.addEvent(window,"unload",(function(){e.__destroy__()})),this.__check_master__(),this.__timer_cm__=s.setInterval((function(){e.__check_master__()}),o),this.__timer_lc__=s.setInterval((function(){e.__locks_cleanup__()}),1e3)}l.prototype.broadcast=function(t,e){if("!sys.channels.add"===t)return this.__router_channels__[e.data.channel]=this.__router_channels__[e.data.channel]||0,this.__router_channels__[e.data.channel]++,void this.__update_channels_list__();if("!sys.channels.remove"===t)return this.__router_channels__[e.data.channel]=this.__router_channels__[e.data.channel]||0,this.__router_channels__[e.data.channel]--,void this.__update_channels_list__();if("!sys.lock.request"!==t)if("!sys.lock.release"!==t){var a=JSON.stringify({channel:t,message:e,random:Math.floor(1e10*Math.random())});this.__storage_events_filter__.shift(),this.__storage_events_filter__.push(this.__namespace__+"broadcast_"+a),this.__ls__.setItem(this.__namespace__+"broadcast",a),this.__handlers__.forEach((function(a){a(t,e)}))}else this.__ls__.removeItem(this.__lock_prefix__+e.data.id);else this.__lock__(e.data.id,e.id,e.data.timeout)},l.prototype.onmessage=function(t){var e=this;this.__handlers__.push(t),setTimeout((function(){t("!sys.master",{data:{node_id:e.__node_id__,master_id:e.__master_id__},node_id:e.__node_id__,id:e.__node_id__+"_"+e.__last_message_cnt__++}),e.__on_channels_list_changed__()}),0)},l.prototype.__lock__=function(t,e,a){var s=this,n=this.__lock_prefix__+t,i=this.__ls__.getItem(n);if(i)try{i=JSON.parse(i)}catch(r){i=null}i&&i.expire>Date.now()||(this.__ls__.setItem(n,JSON.stringify({expire:a+Date.now(),requestId:e})),setTimeout((function(){if(i=s.__ls__.getItem(n),i)try{i=JSON.parse(i)}catch(r){i=null}i&&i.requestId===e&&s.__handlers__.forEach((function(t){t("!sys.lock.acquired",{data:{request_id:e},node_id:s.__node_id__,id:s.__node_id__+"_"+s.__last_message_cnt__++})}))}),30))},l.prototype.__locks_cleanup__=function(){for(var t,e,a=0;a<this.__ls__.length;a++)if(t=this.__ls__.key(a),0===t.indexOf(this.__lock_prefix__)){e=this.__ls__.getItem(t);try{e=JSON.parse(e)}catch(s){e=null}(!e||e.expire<Date.now())&&this.__ls__.removeItem(t)}},l.prototype.__on_master_changed__=function(t){var e=this;t?(this.__master_id__=+t,this.__handlers__.forEach((function(t){t("!sys.master",{data:{node_id:e.__node_id__,master_id:e.__master_id__},node_id:e.__node_id__,id:e.__node_id__+"_"+e.__last_message_cnt__++})})),e.__update_channels_list__(!0),e.__on_channels_list_changed__()):this.__get_alive_router_ids__().sort()[0]===this.__node_id__&&(this.__storage_events_filter__.pop(),this.__storage_events_filter__.push(this.__namespace__+"master_"+this.__node_id__),this.__ls__.setItem(this.__namespace__+"master",this.__node_id__),this.__on_master_changed__(this.__node_id__))},l.prototype.__on_changed__=function(t){if(-1===this.__storage_events_filter__.indexOf(t.key+"_"+t.newValue)&&(t.key===this.__namespace__+"master"&&this.__on_master_changed__(t.newValue),0===t.key.indexOf(this.__router_channels_prefix__)&&this.__on_channels_list_changed__(),t.key===this.__namespace__+"broadcast")){var e=JSON.parse(t.newValue);this.__handlers__.forEach((function(t){t(e.channel,e.message)}))}},l.prototype.__destroy__=function(){this.__destroyed__||(this.__destroyed__=!0,s.clearInterval(this.__timer_cm__),s.clearInterval(this.__timer_lc__),this.__ls__.removeItem(this.__router_id_prefix__+this.__node_id__),this.__ls__.removeItem(this.__router_channels_prefix__+this.__node_id__),this.__master_id__===this.__node_id__&&this.__ls__.removeItem(this.__namespace__+"master"))},l.prototype.__get_alive_router_ids__=function(){for(var t,e,a=Date.now()-r,s=[],n=0;n<this.__ls__.length;n++)e=this.__ls__.key(n),0===e.indexOf(this.__router_id_prefix__)&&(t=+e.substr(this.__router_id_prefix__.length),this.__ls__.getItem(e)<a?(this.__ls__.removeItem(e),this.__ls__.removeItem(this.__router_channels_prefix__+t)):s.push(t));return s},l.prototype.__update_channels_list__=function(t){var e=this,a=[];Object.keys(this.__router_channels__).forEach((function(t){e.__router_channels__[t]>0&&a.push(t)}));var s=JSON.stringify(a.sort());this.__ls__.getItem(this.__router_channels_prefix__+this.__node_id__)!==s&&(this.__storage_events_filter__.pop(),this.__storage_events_filter__.push(this.__router_channels_prefix__+this.__node_id__+"_"+s),this.__ls__.setItem(this.__router_channels_prefix__+this.__node_id__,s),t||this.__on_channels_list_changed__())},l.prototype.__on_channels_list_changed__=function(){for(var t,e=this,a=[],s=0;s<this.__ls__.length;s++)t=this.__ls__.key(s),0===t.indexOf(this.__router_channels_prefix__)&&(a=a.concat(JSON.parse(this.__ls__.getItem(t))));a=a.reduce((function(t,e){return-1===t.indexOf(e)&&t.push(e),t}),[]),this.__handlers__.forEach((function(t){t("!sys.channels.refresh",{id:e.__node_id__+"_"+e.__last_message_cnt__++,node_id:e.__node_id__,data:{channels:a}})}))},l.prototype.__check_master__=function(){this.__ls__.setItem(this.__router_id_prefix__+this.__node_id__,Date.now()),this.__master_id__=+this.__ls__.getItem(this.__namespace__+"master"),-1===this.__get_alive_router_ids__().indexOf(this.__master_id__)&&(this.__storage_events_filter__.pop(),this.__storage_events_filter__.push(this.__namespace__+"master_"+this.__node_id__),this.__ls__.setItem(this.__namespace__+"master",this.__node_id__),this.__on_master_changed__(this.__node_id__))},t.exports=l},"3dfd":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.initFetch?a("div",{attrs:{id:"app"},on:{click:function(e){t.hideUserMenu(e),t.hidePortfolioMenu(e),t.hideReportsMenu(e),t.hideFundsMenu(e)}}},["tagmanager"===t.$route.name||"pledgeDetails"===t.$route.name||t.isFundsWebview?t._e():a("div",{staticClass:"header"},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"header-right menu-closed"},[t.isMobileView?a("a",{staticClass:"logo",attrs:{href:"/dashboard"}},[a("img",{attrs:{src:"/static/images/logo-mini.svg"}})]):a("a",{staticClass:"logo",attrs:{href:"/dashboard"}},[a("img",{attrs:{src:"/static/images/logo.svg"}})]),t._v(" "),t.isMobileView?a("div",{class:{"mobile-page-title":!0,"webview-title":t.isMobileWebview}},[t._v("\n\t\t\t\t"+t._s(t.$route.meta.title)+"\n\t\t\t")]):t._e(),t._v(" "),t.isMobileWebview?t._e():a("a",{staticClass:"toggle-mobile-menu",attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleBurger()}}},[t._m(0)]),t._v(" "),a("transition",{attrs:{name:"dropdown"}},[t.showBurger?a("div",{staticClass:"mobile-menu-drop show-on-mobile"},[a("div",{staticClass:"mobile-profile-card"},[a("a",{attrs:{href:"/account"}},[a("su-avatar",{staticClass:"profile-avatar",attrs:{username:t.user_name,src:t.avatar,size:50}}),t._v(" "),a("div",{staticClass:"mobile-profile-details"},[a("h2",{staticClass:"username"},[t._v(t._s(t._f("capitalize")(t.user_name)))]),t._v(" "),a("span",{attrs:{id:"userDetails",name:t.user_shortname}},[t._v(t._s(t.client_id))])])],1)]),t._v(" "),a("router-link",{class:"mobile-account-link",attrs:{to:"/account"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",{staticClass:"icon icon-user"}),t._v(" "),a("span",[t._v("My account")])]),t._v(" "),a("router-link",{attrs:{to:"/dashboard"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",{staticClass:"icon icon-compass"}),t._v(" "),a("span",[t._v("Dashboard")])]),t._v(" "),a("div",{staticClass:"nav-accordion-label",attrs:{id:"mobile_portfolio_label"},on:{click:function(e){return t.expandMobileMenu("portfolio")}}},[a("div",[a("span",{staticClass:"icon icon-briefcase"}),t._v("\n\t\t\t\t\t\t\tPortfolio\n\t\t\t\t\t\t\t"),a("span",{staticClass:"icon icon-chevron-right"}),t._v(" "),a("span",{staticClass:"icon icon-chevron-down"})]),t._v(" "),a("div",{staticClass:"nav-accordion-content portfolio-menu-content"},[a("router-link",{attrs:{to:"/portfolio/positions"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Positions")]),t._v(" "),t.status.positions_count>0?a("span",{staticClass:"portfolio-count"},[t._v(t._s(t.status.positions_count))]):t._e()]),t._v(" "),a("router-link",{attrs:{to:"/portfolio/holdings"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Holdings")]),t._v(" "),t.status.eq_holdings_count>0?a("span",{staticClass:"portfolio-count"},[t._v(t._s(t.status.eq_holdings_count))]):t._e()]),t._v(" "),a("router-link",{attrs:{to:"/portfolio/corporate-action-order-window"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Corporate actions")])]),t._v(" "),a("router-link",{attrs:{to:"/portfolio/mtf"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("MTF holdings")])])],1)]),t._v(" "),a("div",{staticClass:"nav-accordion-label",attrs:{id:"mobile_reports_label"},on:{click:function(e){return t.expandMobileMenu("reports")}}},[a("div",[a("span",{staticClass:"icon icon-book"}),t._v("\n\t\t\t\t\t\t\tReports\n\t\t\t\t\t\t\t"),a("span",{staticClass:"icon icon-chevron-right"}),t._v(" "),a("span",{staticClass:"icon icon-chevron-down"})]),t._v(" "),a("div",{staticClass:"nav-accordion-content reports-menu-content"},[a("router-link",{attrs:{to:"/reports/tradebook"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Tradebook")])]),t._v(" "),a("router-link",{attrs:{to:"/reports/pnl"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("P&L")])]),t._v(" "),a("router-link",{attrs:{to:"/reports/taxpnl"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Tax P&L")])]),t._v(" "),a("router-link",{attrs:{to:"/reports/tax-loss-harvesting"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Tax-loss harvesting")])]),t._v(" "),a("router-link",{attrs:{to:"/reports/downloads"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Downloads")])])],1)]),t._v(" "),a("div",{staticClass:"nav-accordion-label",attrs:{id:"mobile_funds_label"},on:{click:function(e){return t.expandMobileMenu("funds")}}},[a("div",[a("span",{staticClass:"icon icon-credit-card"}),t._v("\n\t\t\t\t\t\t\tFunds\n\t\t\t\t\t\t\t"),a("span",{staticClass:"icon icon-chevron-right"}),t._v(" "),a("span",{staticClass:"icon icon-chevron-down"})]),t._v(" "),a("div",{staticClass:"nav-accordion-content funds-menu-content"},[a("router-link",{attrs:{to:"/funds/overview"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Withdrawal")])]),t._v(" "),a("router-link",{attrs:{to:"/funds/statement"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Statement")])]),t._v(" "),a("router-link",{attrs:{to:"/funds/interest-statement"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Interest statement")])]),t._v(" "),a("router-link",{attrs:{to:"/funds/mandates"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Bank mandates")])])],1)]),t._v(" "),a("router-link",{attrs:{to:"/refer"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("img",{staticClass:"refer-link-img",attrs:{src:"/static/images/refer-grey.svg"}}),t._v(" "),a("span",[t._v("Rewards & referrals")])]),t._v(" "),a("router-link",{staticClass:"mobile-refer-label",attrs:{to:"/gift"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("img",{staticClass:"refer-link-img",attrs:{src:"/static/images/gift-grey.svg"}}),t._v(" "),a("span",[t._v("Gift securities")])]),t._v(" "),t.isMobileWebview?t._e():a("div",{staticClass:"mobile-menu-footer"},[a("a",{attrs:{rel:"noopener noreferrer",href:"https://support.zerodha.com/category/console/"}},[a("span",{staticClass:"icon icon-life-buoy"}),t._v(" Support")]),a("a",{attrs:{target:"_self",href:"/logout"}},[a("span",{staticClass:"icon icon-exit"}),t._v(" Logout")])]),t._v(" "),a("br"),t._v(" "),a("p",[t._v(" ")])],1):t._e()]),t._v(" "),a("div",{staticClass:"app-nav hide-on-mobile"},[a("router-link",{attrs:{to:"/dashboard"}},[a("span",[t._v("Dashboard")])]),t._v(" "),a("a",{staticClass:"dropdown-label portfolio-label",class:t.portfolioMenuClass,attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.togglePortfolioMenu.apply(null,arguments)}}},[a("span",{staticClass:"portfolio-id"},[t._v("Portfolio")])]),t._v(" "),t.isPortfolioMenu?a("div",{staticClass:"dropdown-nav portfolio-dropdown",on:{click:function(e){return t.hidePortfolioMenu(e)}}},[a("div",{staticClass:"triangle",attrs:{id:"portfolio_triangle"}}),t._v(" "),a("ul",{staticClass:"list-flat dropdown-nav-list"},[a("li",[a("router-link",{attrs:{to:"/portfolio/positions"}},[t.status.positions_count>0?a("span",[t._v("Positions ("+t._s(t.status.positions_count)+")")]):a("span",[t._v("Positions")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/portfolio/holdings"}},[t.status.eq_holdings_count>0?a("span",[t._v("Holdings ("+t._s(t.status.eq_holdings_count)+")")]):a("span",[t._v("Holdings")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/portfolio/corporate-action-order-window"}},[a("span",[t._v("Corporate actions")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/portfolio/mtf"}},[a("span",[t._v("MTF holdings")])])],1)])]):t._e(),t._v(" "),a("a",{staticClass:"dropdown-label reports-label",class:t.reportsMenuClass,attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleReportsMenu.apply(null,arguments)}}},[a("span",{staticClass:"reports-id"},[t._v("Reports")])]),t._v(" "),t.isReportsMenu?a("div",{staticClass:"dropdown-nav reports-dropdown",on:{click:function(e){return t.hideReportsMenu(e)}}},[a("div",{staticClass:"triangle",attrs:{id:"reports_triangle"}}),t._v(" "),a("ul",{staticClass:"list-flat dropdown-nav-list"},[a("li",[a("router-link",{attrs:{to:"/reports/tradebook"}},[a("span",[t._v("Tradebook")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/reports/pnl"}},[a("span",[t._v("P&L")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/reports/taxpnl"}},[a("span",[t._v("Tax P&L")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/reports/tax-loss-harvesting"}},[a("span",[t._v("Tax-loss harvesting")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/reports/downloads"}},[a("span",[t._v("Downloads")])])],1)])]):t._e(),t._v(" "),a("a",{staticClass:"dropdown-label funds-label",class:t.fundsMenuClass,attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleFundsMenu.apply(null,arguments)}}},[a("span",{staticClass:"funds-id"},[t._v("Funds")])]),t._v(" "),t.isFundsMenu?a("div",{staticClass:"dropdown-nav funds-dropdown",on:{click:function(e){return t.hideFundsMenu(e)}}},[a("div",{staticClass:"triangle",attrs:{id:"funds_triangle"}}),t._v(" "),a("ul",{staticClass:"list-flat dropdown-nav-list"},[a("li",[a("router-link",{attrs:{to:"/funds/overview"}},[a("span",[t._v("Withdrawal")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/funds/statement"}},[a("span",[t._v("Statement")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/funds/interest-statement"}},[a("span",[t._v("Interest statement")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/funds/mandates"}},[a("span",[t._v("Bank mandates")])])],1)])]):t._e(),t._v(" "),a("router-link",{attrs:{to:"/account"}},[a("span",[t._v("Account")])])],1),t._v(" "),a("div",{staticClass:"right-nav hide-on-mobile"},[a("div",{staticClass:"user-nav perspective"},[a("a",{staticClass:"dropdown-label user-id",attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleUserMenu.apply(null,arguments)}}},[a("su-avatar",{staticClass:"profile-avatar",attrs:{username:t.user_name,src:t.avatar,size:25}}),t._v(" "),a("span",{attrs:{id:"userDetails",name:t.user_shortname}},[t._v(t._s(t.client_id))])],1),t._v(" "),t.isUserMenu?a("div",{staticClass:"dropdown-nav",on:{click:function(e){return t.hideUserMenu(e)}}},[a("div",{staticClass:"triangle"}),t._v(" "),a("div",{staticClass:"dropdown-nav-header"},[a("router-link",{attrs:{to:"/account"}},[a("h4",{staticClass:"username"},[t._v(t._s(t._f("capitalize")(t.user_name)))])])],1),t._v(" "),a("hr"),t._v(" "),a("ul",{staticClass:"list-flat dropdown-nav-list"},[a("li",[a("router-link",{attrs:{to:"/account"}},[a("span",{staticClass:"icon icon-user"}),t._v(" My account\n\t\t\t\t\t\t\t\t")])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/refer"}},[a("img",{staticClass:"refer-link-img",attrs:{src:"/static/images/refer.svg"}}),t._v(" Rewards & referrals\n\t\t\t\t\t\t\t\t")])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{staticClass:"mobile-refer-label",attrs:{to:"/gift"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("img",{staticClass:"refer-link-img",attrs:{src:"/static/images/gift.svg"}}),t._v(" Gift securities\n\t\t\t\t\t\t\t\t")])],1),t._v(" "),a("hr"),t._v(" "),t._m(1),t._v(" "),a("hr"),t._v(" "),a("li",[a("a",{attrs:{target:"_self",href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.logout.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-exit"}),t._v(" Logout")])])])]):t._e()])])],1)])]),t._v(" "),a("div",{staticClass:"wrapper"},[a("div",{class:"page-content "+("tagmanager"===t.$route.name||"pledgeDetails"===t.$route.name?"widget":"")+(t.isFundsWebview?" reduce-page-padding":"")},[t.accountBlocked?a("div",{staticClass:"account-blocked"},[a("empty",{attrs:{main:"",sub:t.accountBlockedMessage[t.status.account_blocks[0]]}})],1):a("router-view")],1)]),t._v(" "),"tagmanager"!==t.$route.name&&"pledgeDetails"!==t.$route.name?a("div",{staticClass:"footer"},[t._m(2)]):t._e(),t._v(" "),t.showZerodhaCapitalFooter?a("div",{staticClass:"footer"},[t._m(3)]):t._e()]):t._e()},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"nav-icon4"}},[a("span"),t._v(" "),a("span"),t._v(" "),a("span")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{attrs:{href:"https://support.zerodha.com/category/console/",target:"_blank"}},[a("span",{staticClass:"icon icon-help-circle"}),t._v(" Support")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer-section"},[a("div",{staticClass:"footer-container"},[a("div",{staticClass:"row text-grey"},[a("div",{staticClass:"six columns nomargin-mobile"},[a("a",{attrs:{href:"https://zerodha.com"}},[a("img",{attrs:{src:"/static/images/zerodha-grey-logo.svg"}})]),t._v(" "),a("span",{staticClass:"text-light-grey"},[t._v("© 2026. All rights reserved.")])]),t._v(" "),a("div",{staticClass:"nomargin-mobile six columns text-right"},[a("a",{staticClass:"text-light-grey hide-on-mobile",attrs:{target:"_blank",href:"https://support.zerodha.com"}},[t._v("Support")])])]),t._v(" "),a("p",{staticClass:"text-light-grey hide-on-mobile"},[t._v("NSE​ &​ BSE – SEBI Registration no.: INZ000031633 | MCX - SEBI Registration no.: INZ000038238 | CDSL - SEBI Registration no.: IN-DP-431-2019")]),t._v(" "),a("p",{staticClass:"text-light-grey hide-on-mobile"},[t._v("Disclaimer: The P&L report/Holdings/Positions data is prepared based on the trades and information available with us, at the time of report generation. Zerodha Broking Ltd., does not make any warranty, express or implied, or assume any legal/consequential liability, or responsibility for the authenticity, and completeness of the data presented in this report/data. To double check your P&L report/Holdings/Positions data, verify it with the Tradebook, Contract Notes and the Funds Statement which are available with you at all times.")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer-section"},[a("div",{staticClass:"footer-container"},[a("div",{staticClass:"row text-grey"},[a("div",{staticClass:"six columns nomargin-mobile"},[a("a",{attrs:{href:"https://zerodha.com"}},[a("img",{attrs:{src:"/static/images/zerodha-grey-logo.svg"}})]),t._v(" "),a("span",{staticClass:"text-light-grey"},[t._v("© 2026 Zerodha Capital Private Ltd. All rights reserved. RBI Reg. No. N-02.00283")])]),t._v(" "),a("div",{staticClass:"nomargin-mobile six columns text-right"},[a("a",{staticClass:"text-light-grey hide-on-mobile",attrs:{target:"_blank",href:"https://support.zerodha.com"}},[t._v("Support")])])]),t._v(" "),a("p",{staticClass:"hide-on-mobile"},[a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/terms-and-conditions",target:"_blank"}},[t._v("Terms & Conditions")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/privacy-policy",target:"_blank"}},[t._v("Privacy Policy")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/fair-practices-code",target:"_blank"}},[t._v("Fair Practice Code")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/interest-rate-policy",target:"_blank"}},[t._v("Interest Rate Policy")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/demand-call-loan-policy",target:"_blank"}},[t._v("Demand and Call Loan Policy")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/approved-list",target:"_blank"}},[t._v("List of approved securities")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/grievance-redressal",target:"_blank"}},[t._v("Grievance Redressal")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/ombudsman-scheme",target:"_blank"}},[t._v("Ombudsman Scheme")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/faq",target:"_blank"}},[t._v("FAQs")])])])])])}],i=a("a34a"),r=a.n(i),o=a("a026"),l=a("c0d6"),c=a("2f62");function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function t(){d(this,t)};u.install=function(t,e){};var _=a("2878");function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=function t(){g(this,t)};function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}p.install=function(t,e){t.component("payin",_["default"])};var m=function t(){h(this,t)};function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}m.install=function(t,e){};var v=function t(){f(this,t)};function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}v.install=function(t,e){};var b=function t(){y(this,t)};function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}b.install=function(t,e){};var w=function t(){C(this,t)};function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}w.install=function(t,e){};var x=function t(){k(this,t)};function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}x.install=function(t,e){};var T=function t(){E(this,t)};T.install=function(t,e){};var S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"modal-default-button",on:{click:function(e){return t.$emit("close")}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t\t\t\t\t")])])])])])])},P=[],D=a("2877"),O={},R=Object(D["a"])(O,S,P,!1,null,null,null),M=R.exports,I=a("e9dd"),$=a("dfd9");function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var F=function t(){U(this,t)};function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}F.install=function(t,e){t.component("discrepant",I["default"]),t.component("modal",M),t.component("pledge",$["default"])};var N=function t(){q(this,t)};function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}N.install=function(t,e){};var H=function t(){B(this,t)};function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}H.install=function(t,e){};var L=function t(){j(this,t)};function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}L.install=function(t,e){};var A=function t(){z(this,t)};A.install=function(t,e){};var G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container positions"},[t.isMobileView?t._e():a("h1",[a("span",{staticClass:"icon icon-bookmark"}),t._v("\n\t\tTags\n\t\t"),t._m(0)]),t._v(" "),t.isMobileView?t._e():a("hr",{staticClass:"header-hr"}),t._v(" "),t.pageBanner&&t.pageBanner.length?a("div",{staticClass:"notice text-box yellow"},[a("ul",t._l(t.pageBanner,(function(e,s){return a("li",{key:s,domProps:{innerHTML:t._s(e)}})})),0)]):t._e(),t._v(" "),t.pageReady?a("div",[a("div",{staticClass:"section"},[a("su-form",[a("div",{class:{locked:t.job||t.fetchingData,inputcontainer:!0,row:!0}},[a("div",{class:{"two-half":!0,columns:!0,lockContainer:t.job||t.fetchingData,"su-input-group  su-static-label":!0}},[a("label",{staticClass:"su-input-label"},[t._v("Date range")]),t._v(" "),a("date-picker",{attrs:{range:"",format:t.format,lang:"en","not-before":"2017-04-01","not-after":t.reportEndDate,placeholder:"Select range"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v(" "),a("div",{class:{nine:!0,columns:!0,lockContainer:t.job||t.fetchingData}},[a("label",[t._v(" ")]),a("br"),t._v(" "),t.job||t.fetchingData?t._e():a("su-button",{staticClass:"btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.getTagsData(t.dateRange[0],t.dateRange[1])}}},[a("span",{staticClass:"icon icon-arrow-right"})]),t._v(" "),t.job||t.fetchingData?a("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"lock-img-container",attrs:{title:"Please wait while your report is being built"}},[a("img",{staticClass:"lock-class",attrs:{src:"/static/images/lock.svg"}}),t._v(" "),a("su-loader")],1):t._e(),t._v(" "),t.job||t.fetchingData?t._e():a("a",{staticClass:"manage-tag-link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.showTagManagerModal.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-bookmark"}),t._v(" Manage tags")])],1)])])],1),t._v(" "),t.tags_items.length>0&&!t.job&&!t.fetchingData&&!t.tagsError?a("div",{staticClass:"section"},[a("div",{staticClass:"tag-summary"},[a("div",{staticClass:"row tag-summary-container"},[t.tagSummary[0].trades?a("div",{staticClass:"four columns tag-summary-card"},[t._m(1),a("br"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("h2",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"tag-detail",attrs:{title:t.tagSummary[0].name}},[a("span",{staticClass:"tag-colour",style:"background:"+t.tagSummary[0].colour}),t._v(" "),a("span",{staticClass:"tag-name"},[t._v(t._s(t.tagSummary[0].name))])])]),t._v(" "),a("div",{staticClass:"six columns text-right"},[a("h2",[t._v(t._s(t.tagSummary[0].trades)+" trades")])])]),t._v(" "),a("div",{staticClass:"row text-small tag-summary-sub text-grey"},[a("div",{staticClass:"four columns"},[a("div",{staticClass:"row"},[a("div",{staticClass:"three columns"},[t._v("\n\t\t\t\t\t\t\t\t\t\tEQ:\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"nine columns"},[a("span",{domProps:{innerHTML:t._s(t.getTrades(t.tagSummary[0].comp,"EQ"))}}),t._v(" trades\n\t\t\t\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"four columns"},[a("div",{staticClass:"row"},[a("div",{staticClass:"three columns"},[t._v("\n\t\t\t\t\t\t\t\t\t\tFO:\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"nine columns"},[a("span",{domProps:{innerHTML:t._s(t.getTrades(t.tagSummary[0].comp,"FO"))}}),t._v(" trades\n\t\t\t\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"four columns"},[a("div",{staticClass:"row"},[a("div",{staticClass:"three columns"},[t._v("\n\t\t\t\t\t\t\t\t\t\tMF:\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"nine columns"},[a("span",{domProps:{innerHTML:t._s(t.getTrades(t.tagSummary[0].comp,"MF"))}}),t._v(" trades\n\t\t\t\t\t\t\t\t\t")])])])]),t._v(" "),t._m(2),a("hr"),t._v(" "),t._l(t.tagSummary[0].comp,(function(e,s){return s<5?a("div",{key:s,staticClass:"row text-small tag-comp-table"},[a("div",{staticClass:"nine columns"},[a("p",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:e.tradingsymbol}},[t._v(t._s(t._f("clip")(e.tradingsymbol,30)))])]),t._v(" "),a("div",{staticClass:"three columns text-right"},[a("p",[t._v(t._s(e.trade_count))])])]):t._e()})),t._v(" "),t.tagSummary[0].comp.length>5?a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewTagTrades(t.tagSummary[0])}}},[t._v("VIEW MORE "),a("span",{staticClass:"icon icon-arrow-right"})]):t._e()],2):t._e(),t._v(" "),a("div",{staticClass:"four columns tag-summary-card"},[t._m(3),a("br"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("h2",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"tag-detail",attrs:{title:t.tagSummary[1].name}},[a("span",{staticClass:"tag-colour",style:"background:"+t.tagSummary[1].colour}),t._v(" "),a("span",{staticClass:"tag-name"},[t._v(t._s(t.tagSummary[1].name))])])]),t._v(" "),a("div",{staticClass:"six columns text-right"},[a("h2",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t._f("inrFormat")(t.tagSummary[1].profit,1,null,!0)}},[t.tagSummary[1].profit>0?a("span",{staticClass:"pos"},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[1].profit)))]):t.tagSummary[1].profit<0?a("span",{staticClass:"neg"},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[1].profit)))]):a("span",[t._v(t._s(t._f("kformat")(t.tagSummary[1].profit)))])])])]),t._v(" "),a("div",{staticClass:"row text-small tag-summary-sub text-grey"},[a("div",{staticClass:"six columns"},[t._v("\n\t\t\t\t\t\t\t\tRealized:\n\t\t\t\t\t\t\t\t"),t.tagSummary[1].pnlRealized>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pos",attrs:{title:t.tagSummary[1].pnlRealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[1].pnlRealized)))]):t.tagSummary[1].pnlRealized<0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"neg",attrs:{title:t.tagSummary[1].pnlRealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[1].pnlRealized)))]):a("span",[t._v(t._s(t._f("kformat")(t.tagSummary[1].pnlRealized)))])]),t._v(" "),a("div",{staticClass:"six columns"},[t._v("\n\t\t\t\t\t\t\t\tUnrealized:\n\t\t\t\t\t\t\t\t"),t.tagSummary[1].pnlUnrealized>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pos",attrs:{title:t.tagSummary[1].pnlUnrealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[1].pnlUnrealized)))]):t.tagSummary[1].pnlUnrealized<0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"neg",attrs:{title:t.tagSummary[1].pnlUnrealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[1].pnlUnrealized)))]):a("span",[t._v(t._s(t._f("kformat")(t.tagSummary[1].pnlUnrealized)))])])]),t._v(" "),t._m(4),a("hr"),t._v(" "),t._l(t.tagSummary[1].comp,(function(e,s){return s<5?a("div",{key:s,staticClass:"row text-small tag-comp-table"},[a("div",{staticClass:"nine columns"},[a("p",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:e.tradingsymbol}},[t._v(t._s(t._f("clip")(e.tradingsymbol,30)))])]),t._v(" "),a("div",{staticClass:"three columns text-right"},[a("p",[t._v(t._s(e.trade_count))])])]):t._e()})),t._v(" "),t.tagSummary[1].comp.length>5?a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewTagTrades(t.tagSummary[1])}}},[t._v("VIEW MORE "),a("span",{staticClass:"icon icon-arrow-right"})]):t._e()],2),t._v(" "),a("div",{staticClass:"four columns tag-summary-card"},[t._m(5),a("br"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("h2",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"tag-detail",attrs:{title:t.tagSummary[2].name}},[a("span",{staticClass:"tag-colour",style:"background:"+t.tagSummary[2].colour}),t._v(" "),a("span",{staticClass:"tag-name"},[t._v(t._s(t.tagSummary[2].name))])])]),t._v(" "),a("div",{staticClass:"six columns text-right"},[a("h2",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t._f("inrFormat")(t.tagSummary[2].loss,2,null,!0)}},[t.tagSummary[2].loss>0?a("span",{staticClass:"pos"},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[2].loss)))]):t.tagSummary[2].loss<0?a("span",{staticClass:"neg"},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[2].loss)))]):a("span",[t._v(t._s(t._f("kformat")(t.tagSummary[2].loss)))])])])]),t._v(" "),a("div",{staticClass:"row text-small tag-summary-sub text-grey"},[a("div",{staticClass:"six columns"},[t._v("\n\t\t\t\t\t\t\t\tRealized:\n\t\t\t\t\t\t\t\t"),t.tagSummary[2].pnlRealized>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pos",attrs:{title:t.tagSummary[2].pnlRealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[2].pnlRealized)))]):t.tagSummary[2].pnlRealized<0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"neg",attrs:{title:t.tagSummary[2].pnlRealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[2].pnlRealized)))]):a("span",[t._v(t._s(t._f("kformat")(t.tagSummary[2].pnlRealized)))])]),t._v(" "),a("div",{staticClass:"six columns"},[t._v("\n\t\t\t\t\t\t\t\tUnrealized:\n\t\t\t\t\t\t\t\t"),t.tagSummary[2].pnlUnrealized>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pos",attrs:{title:t.tagSummary[2].pnlUnrealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[2].pnlUnrealized)))]):t.tagSummary[2].pnlUnrealized<0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"neg",attrs:{title:t.tagSummary[2].pnlUnrealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[2].pnlUnrealized)))]):a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t.tagSummary[2].pnlUnrealized}},[t._v(t._s(t._f("kformat")(t.tagSummary[2].pnlUnrealized)))])])]),t._v(" "),t._m(6),a("hr"),t._v(" "),t._l(t.tagSummary[2].comp,(function(e,s){return s<5?a("div",{key:s,staticClass:"row text-small tag-comp-table"},[a("div",{staticClass:"nine columns"},[a("p",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:e.tradingsymbol}},[t._v(t._s(t._f("clip")(e.tradingsymbol,30)))])]),t._v(" "),a("div",{staticClass:"three columns text-right"},[a("p",[t._v(t._s(e.trade_count))])])]):t._e()})),t._v(" "),t.tagSummary[2].comp.length>5?a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewTagTrades(t.tagSummary[2])}}},[t._v("VIEW MORE "),a("span",{staticClass:"icon icon-arrow-right"})]):t._e()],2)])]),t._v(" "),a("div",{staticClass:"tags-treemap"},[a("treemap",{key:"tags-page",attrs:{"raw-data":t.tags_items,"hide-stats":!0,"max-items":100,name:"tags"}})],1)]):t._e(),t._v(" "),t.tags_items.length>0&&!t.job&&!t.fetchingData&&!t.tagsError?a("div",{staticClass:"section table-section"},[a("p",{staticClass:"paginate-info text-light-grey text-small"},[t._v("Rows 1 to "+t._s(t.tags_items.length)+" out of "+t._s(t.tags_items.length))]),t._v(" "),t.isMobileView?t._e():a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideSearch,expression:"hideSearch"}],staticClass:"search-table tags-search"},[a("span",{staticClass:"icon icon-search"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"filter-input",attrs:{maxlength:"15",type:"text",placeholder:"Search"},domProps:{value:t.searchQuery},on:{click:function(e){return t.expandSearch()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterData(t.searchQuery,!1)},input:[function(e){e.target.composing||(t.searchQuery=e.target.value)},function(e){return t.filterData(t.searchQuery,!0)}]}}),t._v(" "),a("span",{staticClass:"clear icon icon-times",on:{click:function(e){return t.clearSearch()}}})]),t._v(" "),t.isMobileView?t._e():a("div",{staticClass:"table-container hide-on-mobile"},[a("table",{staticClass:"positions-table tags-table",attrs:{id:"positions_table"}},[a("thead",[a("tr",[a("td",{class:["table-border "+t.isSorted("tag_name")],on:{click:function(e){return t.sortTable("tag_name",e)}}},[t._v("\n\t\t\t\t\t\t\t\tName\n\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("tag_name")]})]),t._v(" "),a("td",{class:["table-border "+t.isSorted("total_trades")],on:{click:function(e){return t.sortTable("total_trades",e)}}},[t._v("\n\t\t\t\t\t\t\t\tTrades\n\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("total_trades")]})]),t._v(" "),a("td",{class:["table-border "+t.isSorted("pnlRealized")],on:{click:function(e){return t.sortTable("pnlRealized",e)}}},[t._v("\n\t\t\t\t\t\t\t\tRealised P&L\n\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("pnlRealized")]})]),t._v(" "),a("td",{class:[t.isSorted("pnlUnrealized")],on:{click:function(e){return t.sortTable("pnlUnrealized",e)}}},[t._v("\n\t\t\t\t\t\t\t\tUnrealised P&L\n\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("pnlUnrealized")]})])])]),t._v(" "),a("tbody",t._l(t.tags_items,(function(e,s){return a("tr",{key:s,on:{mouseleave:function(e){t.showDrop=!1},mouseenter:function(e){t.showDrop=!0}}},[a("td",{staticClass:"textleft table-border"},[a("div",[a("span",{staticClass:"tag-pin",style:"background: "+e.colour}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e["tag_name"])+"\n\t\t\t\t\t\t\t\t")]),a("br"),t._v(" "),a("div",[a("span",{staticClass:"text-light-grey text-small"},[t._v(t._s(e.description))])]),t._v(" "),t.showDrop?a("context-menu",{staticClass:"table"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"context-menu-button",attrs:{slot:"button",title:"Options"},slot:"button"},[a("span",{staticClass:"icon icon-ellipsis"})]),t._v(" "),a("template",{slot:"menu"},[a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.viewPnl(e)}}},[a("span",{staticClass:"icon icon-trending-up"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView P&L report\n\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.viewPortfolio(e)}}},[a("span",{staticClass:"icon icon-briefcase"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView portfolio\n\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.viewTagTrades(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView trades\n\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("hr"),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.showCreateBox(e)}}},[a("span",{staticClass:"icon icon-edit"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.showDeleteConfirmationBox(e)}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t\t")])])])],2):t._e()],1),t._v(" "),a("td",{staticClass:"table-border"},[t._v(t._s(t._f("inrFormat")(e["total_trades"],2)))]),t._v(" "),e["pnlRealized"]>0?a("td",{staticClass:"pos table-border"},[t._v("+"+t._s(t._f("inrFormat")(e["pnlRealized"],2)))]):e["pnlRealized"]<0?a("td",{staticClass:"neg table-border"},[t._v(t._s(t._f("inrFormat")(e["pnlRealized"],2)))]):a("td",{staticClass:"table-border"},[t._v(t._s(t._f("inrFormat")(e["pnlRealized"],2)))]),t._v(" "),e["pnlUnrealized"]>0?a("td",{staticClass:"pos"},[t._v("+"+t._s(t._f("inrFormat")(e["pnlUnrealized"],2)))]):e["pnlUnrealized"]<0?a("td",{staticClass:"neg"},[t._v(t._s(t._f("inrFormat")(e["pnlUnrealized"],2)))]):a("td",[t._v(t._s(t._f("inrFormat")(e["pnlUnrealized"],2)))])])})),0)])])]):t._e(),t._v(" "),t.tags_items.length>0&&!t.job&&!t.fetchingData&&!t.tagsError&&t.isMobileView?a("div",{staticClass:"section table-section show-on-mobile cards"},t._l(t.tags_items,(function(e,s){return a("div",{key:s,staticClass:"card",class:t.tags_items.length-1===s?"last":"",on:{click:function(a){return t.toShowContextMenu(e)}}},[t.contextMenuTag===e.tag_name?a("mobile-context-menu",{on:{close:function(a){return t.toHideContextMenu(e)}}},[a("template",{slot:"menu"},[a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.viewPnl(e)}}},[a("span",{staticClass:"icon icon-trending-up"}),t._v("\n\t\t\t\t\t\t\t\tView P&L report\n\t\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.viewPortfolio(e)}}},[a("span",{staticClass:"icon icon-briefcase"}),t._v("\n\t\t\t\t\t\t\t\tView portfolio\n\t\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.viewTagTrades(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\tView trades\n\t\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.showCreateBox(e)}}},[a("span",{staticClass:"icon icon-edit"}),t._v("\n\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.showDeleteConfirmationBox(e)}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t")])])])],2):t._e(),t._v(" "),a("div",{staticClass:"top"},[a("div",{staticClass:"top-left"},[a("span",{staticClass:"tag-pin",style:"background: "+e.colour}),t._v("\n\t\t\t\t\t\t"+t._s(e["tag_name"])+"\n\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"top-right"},[a("label",[t._v("Trades")]),t._v(" "+t._s(t._f("inrFormat")(e["total_trades"],2))+"\n\t\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"middle"},[a("div",{staticClass:"middle-left"},[a("label",[t._v("Realised P&L: ")]),t._v(" "),e["pnlRealized"]>0?a("span",{staticClass:"pos"},[t._v("+"+t._s(t._f("inrFormat")(e["pnlRealized"],2)))]):e["pnlRealized"]<0?a("span",{staticClass:"neg"},[t._v(t._s(t._f("inrFormat")(e["pnlRealized"],2)))]):a("span",[t._v(t._s(t._f("inrFormat")(e["pnlRealized"],2)))])]),t._v(" "),a("div",{staticClass:"middle-right"},[a("label",[t._v("Unrealised P&L: ")]),t._v(" "),e["pnlUnrealized"]>0?a("span",{staticClass:"pos"},[t._v("+"+t._s(t._f("inrFormat")(e["pnlUnrealized"],2)))]):e["pnlUnrealized"]<0?a("span",{staticClass:"neg"},[t._v(t._s(t._f("inrFormat")(e["pnlUnrealized"],2)))]):a("span",[t._v(t._s(t._f("inrFormat")(e["pnlUnrealized"],2)))])])])],1)})),0):0!==t.tags_items.length||t.job||t.fetchingData||t.tagsError?t.job||t.fetchingData||!t.tagsError?t._e():a("div",{staticClass:"section"},[a("error",{attrs:{sub:t.tagsErrorMsg}})],1):a("div",{staticClass:"section"},[a("empty",{attrs:{main:"No tags found.",sub:"Start by <a href=/portfolio/holdings>tagging</a> your portfolio. <a href=https://zrd.sh/tags-intro>Learn more</a>."}})],1),t._v(" "),t.job?a("div",{staticClass:"section text-center"},[a("jobber")],1):t._e()]):a("div",[a("empty",{attrs:{main:"",sub:""}})],1),t._v(" "),t.showCreate?a("div",{staticClass:"section tagger"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideCreateBox}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showCreateBox("a")}}},[a("div",{staticClass:"modalbody",on:{click:t.hidePalette}},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideCreateBox.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),t.editing?a("h2",[a("span",{staticClass:"icon icon-edit"}),t._v(' Edit "'+t._s(t.selectedTag.text)+'"')]):a("h2",[t._v("New tag")]),t._v(" "),a("su-form",{attrs:{id:"create_tag_form"}},[a("div",{staticClass:"create-tag-color"},[a("label",[t._v(" ")]),a("br"),t._v(" "),a("div",{staticClass:"selected-color",on:{click:function(e){e.stopPropagation(),t.showPalette=!0}}},[a("span",{style:"background-color:"+t.selectedTag.colour},[t._v(" ")]),t._v(" "),a("span",[t._v("Color")])]),t._v(" "),t.showPalette?a("div",{staticClass:"color-palette"},t._l(t.palette,(function(e,s){return a("span",{key:s,staticClass:"palette-colors",style:"background:"+e,on:{click:function(a){return t.changeColor(e)}}},[t._v(" ")])})),0):t._e()]),a("div",{staticClass:"create-tag-name"},[a("su-input",{attrs:{type:"text",required:"",autofocus:"",minlength:3,maxlength:15,"static-label":"","no-error":"",label:"Tag"},model:{value:t.selectedTag.text,callback:function(e){t.$set(t.selectedTag,"text",e)},expression:"selectedTag.text"}})],1),a("br"),t._v(" "),a("div",{staticClass:"create-tag-desc row"},[a("div",{staticClass:"eight columns"},[a("su-input",{attrs:{type:"text",maxlength:140,minlength:6,required:"","static-label":"","no-error":"",label:"Description"},model:{value:t.selectedTag.description,callback:function(e){t.$set(t.selectedTag,"description",e)},expression:"selectedTag.description"}})],1),t._v(" "),a("div",{staticClass:"four columns su-input-group"},[a("label",{staticClass:"su-input-label"},[t._v(" ")]),t._v(" "),a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit",disabled:t.creatingTag,processing:t.creatingTag},nativeOn:{click:function(e){return e.preventDefault(),t.editTag()}}},[t._v("Update")])],1)])])],1)])])])]):t._e(),t._v(" "),t.showModal?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideBreakdown}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showBreakdown.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideBreakdown.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("h2",{staticClass:"positions-breakdown-name"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.breakdownTag)+"\n\t\t\t\t\t\t")]),t._v(" "),a("hr",{staticClass:"modal-separator"}),t._v(" "),t.tagBreakdown.length>0?a("div",[a("div",{staticClass:"positions-breakdown-table-container table-container"},[a("table",{staticClass:"positions-breakdown-table"},[t._m(7),t._v(" "),a("tbody",t._l(t.tagBreakdown,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.tradingsymbol)+"\n\t\t\t\t\t\t\t\t\t\t\t\t"),a("span",{staticClass:"tags-segment"},[t._v(t._s(t.segmentMap[e.segment]))])]),t._v(" "),a("td",[t._v(t._s(e.trade_count))])])})),0)])])]):a("div",[t._m(8)])])])])])]):t._e(),t._v(" "),t.showDeleteConfirmation?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideDeleteConfirmationBox}},[a("div",{staticClass:"modal-container confirmation-modal",on:{click:function(e){return e.stopPropagation(),t.showDeleteConfirmationBox.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("h4",{staticClass:"text-center"},[t._v('\n\t\t\t\t\t\t\tAre you sure you want to delete "'+t._s(t.selectedTag.tag_name)+'" ?\n\t\t\t\t\t\t')]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"six columns text-right"},[a("su-button",{staticClass:"btn btn-blue",attrs:{processing:t.deleting,disabled:t.deleting,type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteTag()}}},[t._v("Delete")])],1),t._v(" "),a("div",{staticClass:"six columns"},[a("su-button",{staticClass:"btn-grey btn-outline",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.hideDeleteConfirmationBox.apply(null,arguments)}}},[t._v("Cancel")])],1)])])])])])]):t._e(),t._v(" "),t.showTagManager?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideTagManagerModal}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showTagManagerModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("tag-manager",{attrs:{isModal:!0}})],1)])])])]):t._e()])},Q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"tag-head-icon",attrs:{href:"https://zrd.sh/nudge",target:"_blank"}},[a("img",{attrs:{src:"/static/images/nudge_icon.svg"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("span",{staticClass:"icon icon-trending-up"}),t._v("\n\t\t\t\t\t\t\tMost traded\n\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row text-light-grey text-small tag-comp-table"},[a("div",{staticClass:"nine columns"},[t._v("\n\t\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"three columns text-right"},[t._v("\n\t\t\t\t\t\t\t\tTrades\n\t\t\t\t\t\t\t")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("span",{staticClass:"icon icon-pie-chart"}),t._v("\n\t\t\t\t\t\t\tMost profitable\n\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row text-light-grey text-small tag-comp-table"},[a("div",{staticClass:"nine columns"},[t._v("\n\t\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"three columns text-right"},[t._v("\n\t\t\t\t\t\t\t\tTrades\n\t\t\t\t\t\t\t")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("span",{staticClass:"icon icon-pie-chart"}),t._v("\n\t\t\t\t\t\t\tLeast profitable\n\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row text-light-grey text-small tag-comp-table"},[a("div",{staticClass:"nine columns"},[t._v("\n\t\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"three columns text-right"},[t._v("\n\t\t\t\t\t\t\t\tTrades\n\t\t\t\t\t\t\t")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",{staticClass:"text-left"},[t._v("Symbol")]),t._v(" "),a("td",[t._v("Trades")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-light-grey"},[a("span",{staticClass:"icon icon-info"}),t._v("\n\t\t\t\t\t\t\t\tNo results available.\n\t\t\t\t\t\t\t")])}],K=a("8508"),V=a.n(K),Y=a("2e34"),J=a("02bc"),W=a("5dfe"),Z=a("5975"),X=a("6825"),tt=a("e2ac"),et=a("3fb9"),at=a("ba6a"),st=a("5665"),nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"holdings-treemap"},[t._m(0),t._v(" "),a("form",{staticClass:"text-right",attrs:{id:"treemap_view_types"}},[a("su-radio-group",{model:{value:t.treeType,callback:function(e){t.treeType=e},expression:"treeType"}},t._l(t.treeTypes,(function(e,s){return a("su-radio",{key:s,attrs:{label:e.label,value:e.val}},[t._v(t._s(e.label))])})),1)],1)])},it=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart"},[a("div",{staticClass:"canvas"})])}],rt=(a("b108"),a("00a5")),ot=a("b6f4"),lt=a("6bcb"),ct=a("1231"),dt=a("166a"),ut={props:{data:Array,rawData:Array,hideStats:Boolean,maxItems:{type:Number,default:100}},data:function(){return{element:null,node:null,isActive:!1,treeView:"pnl",treeType:"pnlNet",treeTypes:[{val:"pnlRealized",label:"Realized"},{val:"pnlUnrealized",label:"Unrealized"},{val:"pnlNet",label:"Net P&L"}],treeSourceType:"sector",treeSourceTypes:[{val:"sector",label:"Sectors"},{val:"stocks",label:"Instruments"}],selectedSector:""}},created:function(){this.maxItems=this.maxItems||100},mounted:function(){var t=this;this.element=Object(rt["a"])(this.$el.querySelector("div.chart .canvas")),this.draw(this.element,this.sectorFormattedData,this.hideStats,this.treeType),this.$nextTick((function(){t.treeType="pnlNet"}))},beforeDestroy:function(){this.postProcess()},activated:function(){this.preProcess()},deactivated:function(){this.postProcess()},computed:{formattedData:function(){return this.formatRawData(this.rawData,!1)},sectorFormattedData:function(){return this.formatRawData(this.rawData,!0)}},watch:{treeType:function(t){this.redraw()},treeSourceType:function(t){this.redraw()},rawData:function(t){}},methods:{changeSource:function(){this.$emit("change-source",this.treeSourceType)},sectorView:function(){this.treeView="sector",this.redraw(),this.$emit("reset-filters",this.treeView)},postProcess:function(){this.isActive=!1},isElementInView:function(t){return document.querySelector("#"+t+"-treemap div.chart .canvas")},handleResize:function(){this.isActive&&this.redraw()},redraw:function(){"sector"===this.treeSourceType?this.draw(this.element,this.sectorFormattedData,this.hideStats,this.treeType,!1,!0):this.draw(this.element,this.formatRawData(this.formattedData.children,!1,!0),this.hideStats,this.treeType,!1,!0)},formatRawData:function(t,e,a){var s=t;if(s){for(var n=[],i={},r=[],o="",l=0,c=0,d=0,u=0;u<s.length;u++)a?(n.push({name:s[u].tag_name,pnlRealized:s[u].pnlRealized,pnlUnrealized:s[u].pnlUnrealized,pnlNet:s[u].pnlRealized+s[u].pnlUnrealized,trades:s[u].total_trades}),l+=s[u].pnlRealized,d+=s[u].pnlUnrealized,c+=s[u].pnlRealized+s[u].pnlUnrealized):(i.hasOwnProperty(s[u].tag_name)?(i[s[u].tag_name][0]+=parseFloat(s[u].pnlRealized),i[s[u].tag_name][1]+=parseFloat(s[u].pnlUnrealized),i[s[u].tag_name][2]+=parseFloat(parseFloat(s[u].pnlRealized)+parseFloat(s[u].pnlUnrealized)),i[s[u].tag_name][3]+=parseFloat(s[u].total_trades)):(i[s[u].tag_name]=[],i[s[u].tag_name][0]=parseFloat(s[u].pnlRealized),i[s[u].tag_name][1]=parseFloat(s[u].pnlUnrealized),i[s[u].tag_name][2]=parseFloat(parseFloat(s[u].pnlRealized)+parseFloat(s[u].pnlUnrealized)),i[s[u].tag_name][3]=parseFloat(s[u].total_trades)),n.push({name:s[u].tag_name,pnlRealized:s[u].pnlRealized,pnlUnrealized:s[u].pnlUnrealized,pnlNet:s[u].pnlRealized+s[u].pnlUnrealized,trades:s[u].total_trades}),l+=s[u].pnlRealized,d+=s[u].pnlUnrealized,c+=s[u].pnlRealized+s[u].pnlUnrealized);for(var _ in i)r.push({name:_,pnlRealized:i[_][0],pnlUnrealized:i[_][1],pnlNet:i[_][2],trades:i[_][3]});var g="desc",p="pnlNet";n.sort((function(t,e){var a=t[p],s=e[p];if("asc"===g){if(a<s)return-1;if(a>s)return 1}else{if(a>s)return-1;if(a<s)return 1}return 0})),r.sort((function(t,e){var a=t[p],s=e[p];if("asc"===g){if(a<s)return-1;if(a>s)return 1}else{if(a>s)return-1;if(a<s)return 1}return 0}));var h=JSON.parse(JSON.stringify(r));return h.sort((function(t,e){var a=t["pnlNet"],s=e["pnlNet"];return a>s?-1:a<s?1:0})),o=h[0],n=n.slice(0,this.maxItems),r=r.slice(0,this.maxItems),this.$emit("sectorData",{data1:r,data2:o}),e?{name:"tags",totalRealized:l,totalUnrealized:d,totalNet:c,children:r}:{name:"tags",totalRealized:l,totalUnrealized:d,totalNet:c,children:n}}},draw:function(t,e,a,s,n,i){if(t&&t.node()){i&&(t.html(""),this.node=null),e.children=e.children.sort((function(t,e){return Math.abs(t[s])<Math.abs(e[s])}));var r=e,o={top:0,right:0,bottom:20,left:0},l=50,c=t.node().getBoundingClientRect().width,d=c-o.left-o.right,u=Object(ct["a"])(".2f"),_=Object(dt["b"])(39,174,96),g=Object(dt["b"])(237,42,68),p=function(t){return g.brighter(Math.random(1))},h=function(t){return _.brighter(Math.random(1))},m=this;if(n&&this.node){var f=Object(ot["a"])().size([d,l]),v=Object(lt["a"])(r).sum((function(t){return Math.abs(Math.round(Math.round(100*t[s]))/100)}));this.node.data(f(v).leaves()).attr("data-balloon-length","small").attr("data-balloon-pos",(function(t){return t.x1<100?"right":t.x1>d-100?"left":"up"})).style("cursor",(function(t){if("sector"===m.treeView&&"sector"===m.treeSourceType)return"pointer"})).attr("data-balloon",(function(t){return t.data.name+"\n Realized: ₹"+u(t.data["pnlRealized"],2)+"\n Unrealized: ₹"+u(t.data["pnlUnrealized"],2)+"\n Trades: "+t.data["trades"]})).text((function(t){if(t.x1-t.x0>45&&t.y1-t.y0>20){if("sector"===m.treeView&&"sector"===m.treeSourceType)return t.data.name;var e=10;return t.data.name.length>e?t.data.name.substring(0,e)+"..":t.data.name}})).style("background",(function(t){return t.data[m.treeType]>0?h(t.data[m.treeType]):p(t.data[m.treeType])})).transition().duration(500).style("left",(function(t){return t.x0+"px"})).style("top",(function(t){return t.y0+"px"})).style("width",(function(t){return Math.max(0,t.x1-t.x0)+"px"})).style("height",(function(t){return Math.max(0,t.y1-t.y0)+"px"}))}else{var y=t.append("div").attr("class","treemap").style("position","relative").style("width",d+"px").style("height",l+"px").style("left",o.left+"px").style("top",o.top+"px"),b=Object(ot["a"])().size([d,l]),C=Object(lt["a"])(r).sum((function(t){return Math.abs(Math.round(100*Math.round(t[s])))/100}));this.node=y.datum(C).selectAll(".node").data(b(C).leaves()).enter().append("div").attr("class","node").style("cursor",(function(t){if("sector"===m.treeView&&"sector"===m.treeSourceType)return"pointer"})).style("left",(function(t){return t.x0+"px"})).style("top",(function(t){return t.y0+"px"})).style("width",(function(t){return Math.max(0,t.x1-t.x0)+"px"})).style("height",(function(t){return Math.max(0,t.y1-t.y0)+"px"})).style("background",(function(t){return t.data[m.treeType]>0?h(t.data[m.treeType]):p(t.data[m.treeType])})).text((function(t){if(t.x1-t.x0>45&&t.y1-t.y0>20){if("sector"===m.treeView&&"sector"===m.treeSourceType)return t.data.name;var e=10;return t.data.name.length>e?t.data.name.substring(0,e)+"..":t.data.name}})).attr("data-balloon-length","small").attr("data-balloon-pos",(function(t){return t.x1<100?"right":t.x1>d-100&&t.x0>200?"left":"up"})).attr("data-balloon",(function(t){return t.data.name+"\n\n Realized: ₹"+u(t.data["pnlRealized"],2)+"\n\n Unrealized: ₹"+u(t.data["pnlUnrealized"],2)+"\n\n Trades: "+t.data["trades"]})).transition().duration(500).style("left",(function(t){return t.x0+"px"})).style("top",(function(t){return t.y0+"px"})).style("width",(function(t){return Math.max(0,t.x1-t.x0)+"px"})).style("height",(function(t){return Math.max(0,t.y1-t.y0)+"px"}))}}}}},_t=ut,gt=Object(D["a"])(_t,nt,it,!1,null,null,null),pt=gt.exports,ht=a("6157");function mt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function ft(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(a),!0).forEach((function(e){vt(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):mt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function vt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var yt=[];function bt(t){var e=t,a=""+(e.getMonth()+1),s=""+e.getDate(),n=e.getFullYear();return a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),[n,a,s].join("-")}var Ct={data:function(){return{showModal:!1,job:!1,params:{},tags_items:[],tradingsymbol:"",startDate:new Date((new Date).getFullYear()-1,(new Date).getMonth(),(new Date).getDate()),endDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),dateRange:[new Date((new Date).getFullYear()-1,(new Date).getMonth()-1,(new Date).getDate()),new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())],format:"YYYY-MM-DD",disabled:{to:new Date(2017,3,1)},timeout:"",noResults:!1,fetchingData:!1,showDrop:!0,sortingData:!1,searchQuery:"",tagsError:!1,tagsErrorMsg:"Please try again.",firstPoll:!0,pollCount:0,sortKey:"tag_name",sortBy:"asc",palette:["rgba(3, 155, 229, 1)","rgba(11, 128, 67, 1)","rgba(63, 81, 181, 1)","rgba(244, 81, 30, 1)","rgba(121, 85, 72, 1)","rgba(124, 179, 66, 1)","rgba(240, 147, 0, 1)","rgba(142, 36, 170, 1)","rgba(97, 97, 97, 1)","rgba(255, 205, 86, 1)"],paletteMap:{"rgba(3, 155, 229, 1)":"p1","rgba(11, 128, 67, 1)":"p2","rgba(63, 81, 181, 1)":"p3","rgba(244, 81, 30, 1)":"p4","rgba(121, 85, 72, 1)":"p5","rgba(124, 179, 66, 1)":"p6","rgba(240, 147, 0, 1)":"p7","rgba(142, 36, 170, 1)":"p8","rgba(97, 97, 97, 1)":"p9","rgba(255, 205, 86, 1)":"p10"},tagSummary:[{name:"",colour:"",trades:0,comp:[]},{name:"",colour:"",profit:0,comp:[]},{name:"",colour:"",loss:0,comp:[]}],contextMenuTag:"",showCreate:!1,creatingTag:!1,editing:!1,selectedFiltersModal:!1,showPalette:!1,selectedTag:{},segmentMap:{EQ:"Equity",FO:"F&O",CDS:"Currency",COM:"Commodity",MF:"Mutual funds"},analyticsResults:{},breakdownTag:"",tagBreakdown:[],showDeleteConfirmation:!1,deleting:!1,showTagManager:!1,pageReady:!1,pageBanner:[]}},mounted:function(){if(this.pageStatus){var t="all";this.pageStatus.hasOwnProperty(this.$route.name)&&(t=this.$route.name),this.pageStatus.hasOwnProperty(t)?("READY"===this.pageStatus[t].status.toUpperCase()&&(this.pageReady=!0),this.pageStatus[t].message&&this.pageStatus[t].message.length&&(this.pageBanner=this.pageStatus[t].message)):this.pageReady=!0}else this.pageReady=!0;if(this.pageReady){var e=this;window.addEventListener("keyup",(function(t){27===t.keyCode&&(e.hideBreakdown(),e.clearSearch(),e.hideSearch(),e.hideDeleteConfirmationBox(),e.hideTagManagerModal())})),0===this.consoleTags.length?this.fetchTags():this.getTagsJobs()}},computed:ft({},Object(c["c"])(["isMobileView","pnlStatus","consoleTags","reportEndDate","pageStatus"])),methods:ft(ft({},Object(c["d"])(["setConsoleTags"])),{},{showTagManagerModal:function(){this.showTagManager=!0},hideTagManagerModal:function(){this.showTagManager=!1},viewTagTrades:function(t){t.hasOwnProperty("comp")?(this.tagBreakdown=t.comp,this.breakdownTag=t.name):(this.tagBreakdown=t.trades,this.breakdownTag=t.tag_name),this.showBreakdown()},showBreakdown:function(){this.showModal=!0},hideBreakdown:function(){this.showModal=!1},getTrades:function(t,e){var a=0;for(var s in t)t[s].segment===e&&(a+=t[s].trade_count);return a},showCreateBox:function(t){this.showCreate||(this.showCreate=!0,this.editing=!0,this.selectedTag=t)},hideCreateBox:function(){this.showCreate=!1},hidePalette:function(){this.showPalette=!1},changeColor:function(t){this.selectedTag.colour=t},editTag:function(){var t=this;if(document.getElementById("create_tag_form")&&document.getElementById("create_tag_form").reportValidity()){this.creatingTag=!0;var e={tag_name:this.selectedTag.text,description:this.selectedTag.description,colour:this.selectedTag.colour,tag_id:parseInt(this.selectedTag.id)},a=st["a"].editTag,s="PUT";at["a"].request(s,!1,a,e,(function(e,a){"SUCCESS"===e.toUpperCase()?at["a"].request("GET",!1,st["a"].getTags,null,(function(e,a){t.creatingTag=!1,"SUCCESS"===e.toUpperCase()?function(){for(var e=a.data.data.result,s=0;s<e.length;s++)"SYSTEM"===e[s].client_id.toUpperCase()?(e[s]["type"]="system",e[s]["classes"]="system-tag"):(e[s]["type"]="custom",e[s]["classes"]="custom-tag "+t.paletteMap[e[s].colour]),e[s]["text"]=e[s].tag_name,e[s]["value"]=e[s].id;t.setConsoleTags(e),t.tags_items=[];var n=t.analyticsResults.trade_summary,i=t.analyticsResults.pnl_summary,r=0,o=function(e){var a=t.tags_items.findIndex((function(t){return parseInt(t.id)===i[e].tag}));if(a>-1)t.tags_items[a].pnlItems.push(i[e]),t.tags_items[a].pnl+=parseFloat(parseFloat(parseFloat(i[e].realized_profit)+parseFloat(i[e].unrealized_profit)).toFixed(2)),t.tags_items[a].pnlRealized+=parseFloat(parseFloat(i[e].realized_profit).toFixed(2)),t.tags_items[a].pnlUnrealized+=parseFloat(parseFloat(i[e].unrealized_profit).toFixed(2));else{var s=t.consoleTags.find((function(t){return parseInt(t.id)===i[e].tag}));if(s){s=JSON.parse(JSON.stringify(s));var r=n.filter((function(t){return i[e].tag===t.tag}));for(var o in s["trades"]=[],s["total_trades"]=0,s["pnl"]=parseFloat(parseFloat(parseFloat(i[e].realized_profit)+parseFloat(i[e].unrealized_profit)).toFixed(2)),s["pnlRealized"]=parseFloat(parseFloat(i[e].realized_profit).toFixed(2)),s["pnlUnrealized"]=parseFloat(parseFloat(i[e].unrealized_profit).toFixed(2)),s["pnlItems"]=[],s["pnlItems"].push(i[e]),r)s["trades"].push(r[o]),s["total_trades"]+=r[o]["trade_count"];s["row"]=e,t.tags_items.push(s)}}};for(var l in i)o(l);var c=0,d=0;for(var u in 0===t.tags_items.length?t.noResults=!0:(t.noResults=!1,c=t.tags_items[0].pnl,d=t.tags_items[0].pnl),t.tags_items)t.tags_items[u].total_trades>=r&&(r=t.tags_items[u].total_trades,t.tagSummary[0].name=t.tags_items[u].tag_name,t.tagSummary[0].colour=t.tags_items[u].colour,t.tagSummary[0].comp=t.tags_items[u].trades,t.tagSummary[0].trades=r),t.tags_items[u].pnl>=c&&(c=t.tags_items[u].pnl,t.tagSummary[1].name=t.tags_items[u].tag_name,t.tagSummary[1].colour=t.tags_items[u].colour,t.tagSummary[1].comp=t.tags_items[u].trades,t.tagSummary[1].profit=c,t.tagSummary[1].pnlRealized=t.tags_items[u].pnlRealized,t.tagSummary[1].pnlUnrealized=t.tags_items[u].pnlUnrealized),t.tags_items[u].pnl<=d&&(d=t.tags_items[u].pnl,t.tagSummary[2].name=t.tags_items[u].tag_name,t.tagSummary[2].colour=t.tags_items[u].colour,t.tagSummary[2].comp=t.tags_items[u].trades,t.tagSummary[2].loss=d,t.tagSummary[2].pnlRealized=t.tags_items[u].pnlRealized,t.tagSummary[2].pnlUnrealized=t.tags_items[u].pnlUnrealized),t.tags_items[u].trades.sort((function(t,e){return e.trade_count-t.trade_count}));t.hideCreateBox(),t.$toast.success({message:"Tag updated.",orientation:t.$toast.TOP_RIGHT,duration:6e3})}():"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching tags:"+at["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})})):"FAILURE"===e.toUpperCase()?(t.creatingTag=!1,t.$toast.error({message:"Error updating tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.creatingTag=!1,t.$toast.error({message:"Error updating tags:"+at["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))}},viewPnl:function(t){this.$router.push({name:"pnl",params:{tag:t,startDate:this.dateRange[0],endDate:this.dateRange[1]}})},viewPortfolio:function(t){this.$router.push({name:"holdings",params:{tag:t}})},fetchTags:function(){var t=this;this.fetchingData=!0,this.deleting=!1,at["a"].request("GET",!1,st["a"].getTags,null,(function(e,a){if(t.hideDeleteConfirmationBox(),"SUCCESS"===e.toUpperCase()){for(var s=a.data.data.result,n=0;n<s.length;n++)"SYSTEM"===s[n].client_id.toUpperCase()?(s[n]["type"]="system",s[n]["classes"]="system-tag"):(s[n]["type"]="custom",s[n]["classes"]="custom-tag "+t.paletteMap[s[n].colour]),s[n]["text"]=s[n].tag_name,s[n]["value"]=s[n].id;t.setConsoleTags(s),t.getTagsJobs()}else"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching tags:"+at["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},getTagsJobs:function(){var t=sessionStorage.getItem("console_tags");if(t){var e=JSON.parse(t);this.startDate=new Date(e.from),this.endDate=new Date(e.to),this.dateRange=[this.startDate,this.endDate],this.getTagsData(new Date(e.from),new Date(e.to))}else this.getTagsData(this.dateRange[0],this.dateRange[1])},toShowContextMenu:function(t){this.contextMenuTag=t.tag_name},toHideContextMenu:function(t){this.contextMenuTag=""},showMenu:function(t){t.target.children.length>0?(t.target.children[3].classList.toggle("show"),null!==this.lastClicked&&this.lastClicked!==t.target.children[3]&&this.lastClicked.classList.toggle("show"),this.lastClicked=t.target.children[3]):(t.target.parentNode.children[3].classList.toggle("show"),null!==this.lastClicked&&this.lastClicked!==t.target.parentNode.children[3]&&this.lastClicked.classList.toggle("show"),this.lastClicked=t.target.parentNode.children[3])},isSorted:function(t){return t===this.sortKey?"sorted":""},getsortBy:function(t){return t===this.sortKey?"arrow-show arrow "+this.sortBy:"current_value"===t&&!0===this.isCurrentSorted?"arrow-show arrow "+this.currentSortby:"asc"},sortTable:function(t,e){if(yt=[],t===this.sortKey)if("asc"===this.sortBy){this.sortBy="desc";for(var a=document.getElementById("positions_table").querySelectorAll("thead td span"),s=0;s<a.length;s++)a[s].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow desc":e.target.className="arrow desc"}else{this.sortBy="asc";for(var n=document.getElementById("positions_table").querySelectorAll("thead td span"),i=0;i<n.length;i++)n[i].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow asc":e.target.className="arrow asc"}else{this.sortKey=t,this.sortBy="asc";for(var r=document.getElementById("positions_table").querySelectorAll("thead td span"),o=0;o<r.length;o++)r[o].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow asc":e.target.className="arrow asc",this.params.page=1}this.sortingData=!0,this.getTagsData(this.params.segment,this.params.date,!0)},compare:function(t,e){return"tag_name"===this.sortKey?t[this.sortKey]<e[this.sortKey]?"desc"===this.sortBy?1:-1:t[this.sortKey]>e[this.sortKey]?"desc"===this.sortBy?-1:1:0:null===t[this.sortKey]?1:null===e[this.sortKey]?-1:parseFloat(t[this.sortKey])<parseFloat(e[this.sortKey])?"desc"===this.sortBy?1:-1:parseFloat(t[this.sortKey])>parseFloat(e[this.sortKey])?"desc"===this.sortBy?-1:1:0},pollData:function(){var t=this;this.pollCount++,this.firstPoll?setTimeout((function(){return t.getTagsData(t.startDate,t.endDate)}),500):setTimeout((function(){return t.getTagsData(t.startDate,t.endDate)}),1e3),this.firstPoll=!1},getTagsData:function(t,e,a,s){var n=this;if(this.tagsError=!1,this.noResults=!1,s)this.filterData();else{if(a)return yt=this.tags_items,yt.sort(this.compare),void(this.sortingData=!1);if(this.fetchingData=!0,yt=[],!t)return void this.$toast.warning({message:"From date is required",orientation:this.$toast.TOP_RIGHT,duration:6e3});if(this.startDate=new Date(t.getFullYear(),t.getMonth(),t.getDate()),this.endDate=e?new Date(e.getFullYear(),e.getMonth(),e.getDate()):new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),this.startDate>this.endDate)return void this.$toast.warning({message:"'To' parameter should be greater than or equal to 'From'",orientation:this.$toast.TOP_RIGHT,duration:6e3});this.params={from:this.startDate,to:this.endDate},sessionStorage.setItem("console_tags",JSON.stringify(this.params));var i=st["a"].getTagAnalytics+"?from_date="+bt(this.startDate)+"&to_date="+bt(this.endDate);this.tags_items=[],at["a"].request("GET",!0,i,null,(function(t,e){"PENDING"===t.toUpperCase()?n.pollCount<120?(n.job=!0,n.pollData()):(n.job=!1,n.fetchingData=!1,n.sortingData=!1,n.firstPoll=!0,n.tagsError=!0,n.$toast.error({message:"Error fetching tags: Request timed out",orientation:n.$toast.TOP_RIGHT,duration:6e3}),sessionStorage.getItem("console_tags")&&sessionStorage.removeItem("console_tags"),n.pollCount=0):"SUCCESS"===t.toUpperCase()?function(){n.pollCount=0,n.sortingData=!1,n.fetchingData=!1,n.job=!1,n.firstPoll=!0,n.analyticsResults=e.data.data.result;var t=n.analyticsResults.trade_summary,a=n.analyticsResults.pnl_summary,s=0,i=function(e){var s=n.tags_items.findIndex((function(t){return parseInt(t.id)===a[e].tag}));if(s>-1)n.tags_items[s].pnlItems.push(a[e]),n.tags_items[s].pnl+=parseFloat(parseFloat(parseFloat(a[e].realized_profit)+parseFloat(a[e].unrealized_profit)).toFixed(2)),n.tags_items[s].pnlRealized+=parseFloat(parseFloat(a[e].realized_profit).toFixed(2)),n.tags_items[s].pnlUnrealized+=parseFloat(parseFloat(a[e].unrealized_profit).toFixed(2));else{var i=n.consoleTags.find((function(t){return parseInt(t.id)===a[e].tag}));if(i){i=JSON.parse(JSON.stringify(i));var r=t.filter((function(t){return a[e].tag===t.tag}));for(var o in i["trades"]=[],i["total_trades"]=0,i["pnl"]=parseFloat(parseFloat(parseFloat(a[e].realized_profit)+parseFloat(a[e].unrealized_profit)).toFixed(2)),i["pnlRealized"]=parseFloat(parseFloat(a[e].realized_profit).toFixed(2)),i["pnlUnrealized"]=parseFloat(parseFloat(a[e].unrealized_profit).toFixed(2)),i["pnlItems"]=[],i["pnlItems"].push(a[e]),r)i["trades"].push(r[o]),i["total_trades"]+=r[o]["trade_count"];i["row"]=e,n.tags_items.push(i)}}};for(var r in a)i(r);var o=0,l=0;for(var c in 0===n.tags_items.length?n.noResults=!0:(n.noResults=!1,o=n.tags_items[0].pnl,l=n.tags_items[0].pnl),n.tags_items)n.tags_items[c].total_trades>=s&&(s=n.tags_items[c].total_trades,n.tagSummary[0].name=n.tags_items[c].tag_name,n.tagSummary[0].colour=n.tags_items[c].colour,n.tagSummary[0].comp=n.tags_items[c].trades,n.tagSummary[0].trades=s),n.tags_items[c].pnl>=o&&(o=n.tags_items[c].pnl,n.tagSummary[1].name=n.tags_items[c].tag_name,n.tagSummary[1].colour=n.tags_items[c].colour,n.tagSummary[1].comp=n.tags_items[c].trades,n.tagSummary[1].profit=o,n.tagSummary[1].pnlRealized=n.tags_items[c].pnlRealized,n.tagSummary[1].pnlUnrealized=n.tags_items[c].pnlUnrealized),n.tags_items[c].pnl<=l&&(l=n.tags_items[c].pnl,n.tagSummary[2].name=n.tags_items[c].tag_name,n.tagSummary[2].colour=n.tags_items[c].colour,n.tagSummary[2].comp=n.tags_items[c].trades,n.tagSummary[2].loss=l,n.tagSummary[2].pnlRealized=n.tags_items[c].pnlRealized,n.tagSummary[2].pnlUnrealized=n.tags_items[c].pnlUnrealized),n.tags_items[c].trades.sort((function(t,e){return e.trade_count-t.trade_count}))}():"FAILURE"===t.toUpperCase()?(n.job=!1,n.fetchingData=!1,n.sortingData=!1,n.firstPoll=!0,n.tagsError=!0,n.$toast.error({message:"Error fetching tag data: "+e.data.message,orientation:n.$toast.TOP_RIGHT,duration:6e3}),sessionStorage.getItem("console_tags")&&sessionStorage.removeItem("console_tags"),n.pollCount=0):"UNDEFINED"===t.toUpperCase()&&(n.job=!1,n.fetchingData=!1,n.sortingData=!1,n.firstPoll=!0,n.tagsError=!0,n.$toast.error({message:"Error fetching tags:"+at["a"].errorMessage(),orientation:n.$toast.TOP_RIGHT,duration:6e3}),sessionStorage.getItem("console_tags")&&sessionStorage.removeItem("console_tags"),n.pollCount=0)}))}},filterData:function(t,e){if(this.filteredData=[],t=t.toLowerCase().trim(),t&&t.length>0){this.filtering=!0;var a=this.tags_items.filter((function(e){return e.tag_name.toLowerCase().indexOf(t.toLowerCase())>-1}));for(var s in a)this.filteredData.push(parseInt(a[s]["row"]))}else this.filtering=!1;var n=document.getElementById("positions_table").querySelectorAll("tbody tr");if(this.filtering)for(var i=this.filteredData,r=0;r<n.length;r++)e?i.includes(r)?n[r].className="":n[r].className="blur":i.includes(r)?n[r].className="":n[r].className="hide-row";else for(var o=0;o<n.length;o++)n[o].className=""},clearSearch:function(){this.searchQuery="",this.filtering=!1,this.filteredData=[];for(var t=document.getElementById("positions_table").querySelectorAll("tbody tr"),e=0;e<t.length;e++)t[e].className=""},expandSearch:function(){document.getElementsByClassName("search-table")[0].classList.add("expand"),document.getElementsByClassName("filter-input")[0].setAttribute("placeholder","Filter eg: my tag"),document.getElementsByClassName("clear")[0].style.display="block"},hideSearch:function(){document.getElementsByClassName("search-table")[0].classList.remove("expand"),document.getElementsByClassName("filter-input")[0].setAttribute("placeholder","Search"),document.getElementsByClassName("clear")[0].style.display="none",document.getElementsByClassName("filter-input")[0].blur()},showDeleteConfirmationBox:function(t){this.showDeleteConfirmation=!0,t&&t.tag_name&&(this.selectedTag=t)},hideDeleteConfirmationBox:function(){this.showDeleteConfirmation=!1},deleteTag:function(){var t=this;this.deleting=!0;var e=[];e.push(parseInt(this.selectedTag.id)),at["a"].request("PUT",!1,st["a"].deleteTag,{tag_ids:e},(function(e,a){"SUCCESS"===e.toUpperCase()?(t.fetchTags(),t.$toast.success({message:"Tag deleted.",orientation:t.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===e.toUpperCase()?(t.deleting=!1,t.$toast.error({message:"Error deleting tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.deleting=!1,t.$toast.error({message:"Error deleting tags:"+at["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))}}),components:{"date-picker":V.a,jobber:Y["a"],Treemap:pt,TagManager:ht["default"],"su-button":W["a"],"su-loader":Z["a"],"context-menu":X["a"],"mobile-context-menu":tt["a"],empty:J["a"],error:et["default"]}},wt=Ct,kt=Object(D["a"])(wt,G,Q,!1,null,null,null),xt=kt.exports;function Et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Tt=function t(){Et(this,t)};Tt.install=function(t,e){t.component("taganalysis",xt),t.component("tagmanager",ht["default"])};var St=a("1bef"),Pt=a("1552");function Dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Ot=function t(){Dt(this,t)};Ot.install=function(t,e){t.component("sendGift",Pt["default"]),t.component("acceptGift",St["default"])};var Rt=a("d1df"),Mt=a("1fa4"),It=a("d796"),$t=a("19d1"),Ut=a("d361"),Ft=a("bad3"),qt=a("ee54"),Nt=a("685f");function Bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Ht=function t(){Bt(this,t)};function jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Ht.install=function(t,e){t.component("fatca",Mt["a"]),t.component("fatcacorrection",It["default"]),t.component("loansdashboard",Rt["default"]),t.component("loaninvite",$t["default"]),t.component("statement",Ut["default"]),t.component("managepledge",Ft["default"]),t.component("offers",qt["a"]),t.component("kyc",Nt["default"])};var Lt=function t(){jt(this,t)};function zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Lt.install=function(t,e){};var At=function t(){zt(this,t)};At.install=function(t,e){};var Gt=a("9946"),Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("h1",[t._v("Switch user")]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row section"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.client_id,expression:"client_id"}],attrs:{type:"text",id:"client_id"},domProps:{value:t.client_id},on:{input:function(e){e.target.composing||(t.client_id=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn-red",on:{click:function(e){return t.switchUser()}}},[t._v("Submit")])])])},Kt=[],Vt=a("bc3a"),Yt=a.n(Vt),Jt=Yt.a.create({timeout:1e4,responseType:"json"}),Wt={data:function(){return{client_id:""}},methods:{switchUser:function(){this.client_id.length>0&&Jt.post("/qadmin/switch-user/",{user_id:this.client_id}).then((function(t){"success"===t.data.message?location.href="/dashboard":console.log("Error redirecting to dashboard.")})).catch((function(t){console.log("Error switching user: ",t)}))}}},Zt=Wt,Xt=Object(D["a"])(Zt,Qt,Kt,!1,null,null,null),te=Xt.exports;function ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ae=function t(){ee(this,t)};ae.install=function(t,e){t.component("adminswitch",te)};var se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",[a("thead",[a("tr",t._l(t.columns,(function(e,s){return a("th",{key:s,class:{active:t.sortKey==e},on:{click:function(a){return t.sortBy(e)}}},[t._v("\n\t\t\t\t"+t._s(e)+"\n\t\t\t\t"),a("span",{staticClass:"arrow",class:t.sortOrders[e]>0?"asc":"dsc"})])})),0)]),t._v(" "),a("tbody",t._l(t.filteredData,(function(e,s){return a("tr",{key:s},t._l(t.columns,(function(s,n){return a("td",{key:n},[t._v("\n\t\t\t"+t._s(e[s])+"\n\t\t\t")])})),0)})),0)])},ne=[],ie={props:{data:Array,columns:Array},data:function(){var t={};return this.columns.forEach((function(e){t[e]=1})),{sortKey:"",sortOrders:t}},computed:{filteredData:function(){var t=this.sortKey,e=this.sortOrders[t]||1,a=this.data;return t&&(a=a.slice().sort((function(a,s){return a=a[t],s=s[t],(a===s?0:a>s?1:-1)*e}))),a}},methods:{sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]}}},re=ie,oe=Object(D["a"])(re,se,ne,!1,null,null,null),le=oe.exports;function ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var de=function t(){ce(this,t)};de.install=function(t,e){t.component("data-table",le)};var ue=a("b047c"),_e=a.n(ue),ge=a("b23e"),pe=a.n(ge),he=a("1a6c");function me(t,e,a,s,n,i,r){try{var o=t[i](r),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(s,n)}function fe(t){return function(){var e=this,a=arguments;return new Promise((function(s,n){var i=t.apply(e,a);function r(t){me(i,s,n,r,o,"next",t)}function o(t){me(i,s,n,r,o,"throw",t)}r(void 0)}))}}function ve(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function ye(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ve(Object(a),!0).forEach((function(e){be(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ve(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function be(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Ce(t){return Ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(t)}var we=pe.a.client();function ke(t){var e=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),s=0;s<a.length;s++){var n=a[s].trim();if(n.substring(0,t.length+1)===t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}return e}o["a"].use(de,{store:l["a"]}),o["a"].use(u,{store:l["a"]}),o["a"].use(p,{store:l["a"]}),o["a"].use(m,{store:l["a"]}),o["a"].use(v,{store:l["a"]}),o["a"].use(b,{store:l["a"]}),o["a"].use(w,{store:l["a"]}),o["a"].use(x,{store:l["a"]}),o["a"].use(T,{store:l["a"]}),o["a"].use(F,{store:l["a"]}),o["a"].use(N,{store:l["a"]}),o["a"].use(H,{store:l["a"]}),o["a"].use(L,{store:l["a"]}),o["a"].use(Ot,{store:l["a"]}),o["a"].use(A,{store:l["a"]}),o["a"].use(Tt,{store:l["a"]}),o["a"].use(Ht,{store:l["a"]}),o["a"].use(Lt,{store:l["a"]}),o["a"].use(At,{store:l["a"]}),o["a"].use(ae,{store:l["a"]}),o["a"].use(he["a"]);var xe={name:"app",components:{"custom-router-link":Gt["a"],empty:J["a"]},watch:{$route:function(t,e){t.meta.title&&(this.setPageTitle(t.meta.title),this.setFooter(t.meta.title))}},data:function(){return{client_id:"",user_name:"",user_shortname:"",avatar:"",status:[],isUserMenu:!1,isLoansMenu:!1,isPortfolioMenu:!1,isReportsMenu:!1,isFundsMenu:!1,initFetch:!1,showBurger:!1,isMobile:!1,showZerodhaCapitalFooter:!1,isMobileWebview:!1,accountBlocked:!1,accountBlockedMessage:{pending_activation:"Your account is pending for activation at the exchanges. We will notify you shortly once your account is activated. <a target='_blank' href='https://support.zerodha.com/category/account-opening/getting-started/accountlofinaccess/articles/exchange-segment-is-not-enabled-for-your-account-error'>Read more</a>.",pending_verification:"Our team is verifying your account opening application form. This takes up to 24 working hours. We will notify you shortly once your account is ready.",form_rejected:"Your account opening form is on hold as we need additional documents to activate your account. Please complete <a target='_blank' href='https://signup.zerodha.com'>Signup</a> to activate your account.",account_opening_unfinished:"Your account opening form is not completed. Please complete <a target='_blank' href='https://signup.zerodha.com'>Signup</a> to activate your account."}}},created:function(){this.setCSRF(ke("public_token")),window.addEventListener("resize",this.handleResize),this.handleResize(),this.$route.meta.title&&(this.setPageTitle(this.$route.meta.title),this.setFooter(this.$route.meta.title)),this.getStatus(),this.getSilo()},destroyed:function(){window.removeEventListener("resize",this.handleResize)},mounted:function(){var t=this,e=this.$route.query;"object"===Ce(e)&&0!==Object.keys(e).length&&e.hasOwnProperty("src")&&("kitemobile"===e.src||"coinmobile"===e.src?this.isMobile=!0:"kitewebview"!==e.src&&"coinwebview"!==e.src||(this.isMobileWebview=!0,this.setIsMobileWebview(!0))),we.on("channel",(function(t){"logout"===t&&(window.location.href="/logout")}));for(var a=document.getElementsByClassName("nav-accordion-label"),s=0;s<a.length;s++)a[s].addEventListener("click",(function(){this.classList.toggle("active");var t=this.nextElementSibling;"block"===t.style.display?t.style.display="none":t.style.display="block"}));setTimeout((function(){t.$webviewReady()}),1e4)},computed:ye(ye({},Object(c["c"])(["isMobileView"])),{},{portfolioMenuClass:function(){if("holdings"===this.$route.name||"positions"===this.$route.name||"discrepant"===this.$route.name||"corporateAction"===this.$route.name||"tagmanager"===this.$route.name||"transfer"===this.$route.name||"mtf"===this.$route.name)return"router-link-active"},reportsMenuClass:function(){if("tradebook"===this.$route.name||"pnl"===this.$route.name||"taxpnl"===this.$route.name||"downloads"===this.$route.name||"taxloss"===this.$route.name)return"router-link-active"},fundsMenuClass:function(){if("funds"===this.$route.name||"ledger"===this.$route.name||"interest"===this.$route.name||"enach"===this.$route.name||"payin"===this.$route.name)return"router-link-active"},isFundsWebview:function(){return this.isMobileWebview&&"funds"===this.$route.name}}),methods:ye(ye({},Object(c["d"])(["setMobileView","setActiveSegments","setPNLStatus","setSegmentList","setSlb","setClientID","setCSRF","setUserDetails","setParentAccounts","setChildAccounts","setSilo","setUserProfile","setIsMobileWebview","setPageStatus"])),{},{getPageStatus:function(){var t=this;at["a"].request("GET",!1,st["a"].getPageStatus,null,(function(e,a){if(t.initFetch=!0,"SUCCESS"===e.toUpperCase()){var s=a.data.data.result;s&&t.setPageStatus(s)}else"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching page status: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching page status:"+at["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},getUserProfile:function(t){var e=this;return fe(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,s){at["a"].request("GET",!1,st["a"].getProfile,null,(function(n,i){if("SUCCESS"===n.toUpperCase()){var r=i.data.data.result[0];if(r&&e.setUserProfile(r),t)return void a(r);a(r)}else if("FAILURE"===n.toUpperCase()){if(e.$toast.error({message:"Error fetching profile: "+i.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3}),t)return void s(new Error("Error fetching profile: "+i.data.message));s(new Error("Error fetching profile: "+i.data.message))}else{if(e.$toast.error({message:"Error fetching profile:"+at["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}),t)return void s(new Error("Error fetching profile: "+at["a"].errorMessage()));s(new Error("Error fetching profile: "+at["a"].errorMessage()))}t||e.getSegmentStatus()}))})));case 1:case"end":return a.stop()}}),a)})))()},getSilo:function(){var t=this;at["a"].request("GET",!1,st["a"].getSilo,null,(function(e,a){"SUCCESS"===e.toUpperCase()?a.data.data.result&&a.data.data.result[0]&&a.data.data.result[0].silo&&t.setSilo(a.data.data.result[0].silo):"FAILURE"===e.toUpperCase()?console.log("Error fetching SILO: ",a.data.message):console.log("Error fetching SILO: ",at["a"].errorMessage())}))},setFooter:function(t){var e=["Loans dashboard","Loans statement","Loans fatca correction","Loans pledges","Loans kyc"];this.showZerodhaCapitalFooter=-1!==e.indexOf(t)},handleResize:_e()((function(){window.innerWidth<801?this.setMobileView(!0):window.innerWidth>800&&this.setMobileView(!1)}),50),linkClicked:function(){document.getElementById("nav-icon4").classList.toggle("open"),this.showBurger=!this.showBurger,document.getElementsByTagName("body")[0].style.overflowY="scroll"},getStatus:function(){var t=this;at["a"].request("GET",!1,st["a"].getStatus,null,(function(e,a){"SUCCESS"===e.toUpperCase()?(t.status=a.data.data.result,t.status.account_blocks&&t.status.account_blocks.length&&t.accountBlockedMessage.hasOwnProperty(t.status.account_blocks[0])?(t.accountBlocked=!0,t.initFetch=!0):t.getUserProfile(),t.user_name=t.status.user_name,t.client_id=t.status.user_id,t.user_email=t.status.email,t.avatar=t.status.avatar_url,t.user_shortname=t.status.user_shortname.replace(/ .*/,""),t.setPNLStatus(t.status.pnl_last_run_status),t.setClientID(t.client_id),t.setUserDetails(t.status)):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching status: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching status:"+at["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},getSegmentStatus:function(){var t=this;this.initFetch=!1,at["a"].request("GET",!1,st["a"].getSegmentStatus,null,(function(e,a){if("SUCCESS"===e.toUpperCase()){var s=[];"ACTIVATED"!==a.data.data.result.nse_eq_status.toUpperCase()&&"ACTIVATED"!==a.data.data.result.bse_fo_status.toUpperCase()&&"ACTIVATED"!==a.data.data.result.nse_fo_status.toUpperCase()||s.push("EQ"),"ACTIVATED"===a.data.data.result.mcx_status.toUpperCase()&&s.push("COM"),t.setActiveSegments(s),t.setSegmentList(a.data.data.result),t.setSlb({nse_slb_status:a.data.data.result.nse_slb_status,bse_slb_status:a.data.data.result.bse_slb_status})}else"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching segment status: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching segment status:"+at["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3});t.getPageStatus()}))},toggleUserMenu:function(){this.isLoansMenu=!1,this.isUserMenu=!this.isUserMenu,this.isPortfolioMenu=!1,this.isReportsMenu=!1,this.isFundsMenu=!1,document.getElementsByClassName("portfolio-label")[0].classList.remove("no-border"),document.getElementsByClassName("reports-label")[0].classList.remove("no-border"),document.getElementsByClassName("funds-label")[0].classList.remove("no-border")},hideUserMenu:function(t){this.isUserMenu=!1,document.getElementsByClassName("portfolio-label")[0]&&document.getElementsByClassName("portfolio-label")[0].classList.remove("no-border"),document.getElementsByClassName("reports-label")[0]&&document.getElementsByClassName("reports-label")[0].classList.remove("no-border"),document.getElementsByClassName("funds-label")[0]&&document.getElementsByClassName("funds-label")[0].classList.remove("no-border")},toggleLoansMenu:function(){this.isLoansMenu=!this.isLoansMenu,this.isPortfolioMenu=!1,this.isUserMenu=!1,this.isReportsMenu=!1,this.isFundsMenu=!1,document.getElementsByClassName("portfolio-label")[0].classList.remove("no-border"),document.getElementsByClassName("reports-label")[0].classList.remove("no-border"),document.getElementsByClassName("funds-label")[0].classList.remove("no-border")},hideLoansMenu:function(t){this.isLoansMenu=!1},togglePortfolioMenu:function(){this.isPortfolioMenu=!this.isPortfolioMenu,this.isLoansMenu=!1,this.isUserMenu=!1,this.isReportsMenu=!1,this.isFundsMenu=!1,document.getElementsByClassName("portfolio-label")[0].classList.remove("no-border"),document.getElementsByClassName("reports-label")[0].classList.remove("no-border"),document.getElementsByClassName("funds-label")[0].classList.remove("no-border"),"holdings"!==this.$route.name&&"positions"!==this.$route.name&&"discrepant"!==this.$route.name&&"corporateAction"!==this.$route.name&&"tagmanager"!==this.$route.name&&"transfer"!==this.$route.name&&"mtf"!==this.$route.name||document.getElementsByClassName("portfolio-label")[0].classList.add("no-border")},hidePortfolioMenu:function(t){this.isPortfolioMenu=!1},toggleReportsMenu:function(){this.isReportsMenu=!this.isReportsMenu,this.isLoansMenu=!1,this.isUserMenu=!1,this.isPortfolioMenu=!1,this.isFundsMenu=!1,document.getElementsByClassName("portfolio-label")[0].classList.remove("no-border"),document.getElementsByClassName("reports-label")[0].classList.remove("no-border"),document.getElementsByClassName("funds-label")[0].classList.remove("no-border"),"tradebook"!==this.$route.name&&"pnl"!==this.$route.name&&"taxpnl"!==this.$route.name&&"downloads"!==this.$route.name&&"taxloss"!==this.$route.name||document.getElementsByClassName("reports-label")[0].classList.add("no-border")},hideReportsMenu:function(t){this.isReportsMenu=!1},toggleFundsMenu:function(){this.isFundsMenu=!this.isFundsMenu,this.isLoansMenu=!1,this.isUserMenu=!1,this.isPortfolioMenu=!1,this.isReportsMenu=!1,document.getElementsByClassName("portfolio-label")[0].classList.remove("no-border"),document.getElementsByClassName("reports-label")[0].classList.remove("no-border"),document.getElementsByClassName("funds-label")[0].classList.remove("no-border"),"funds"!==this.$route.name&&"ledger"!==this.$route.name&&"interest"!==this.$route.name&&"enach"!==this.$route.name&&"payin"!==this.$route.name||document.getElementsByClassName("funds-label")[0].classList.add("no-border")},hideFundsMenu:function(t){this.isFundsMenu=!1},toggleBurger:function(){document.getElementById("nav-icon4").classList.toggle("open"),document.getElementsByClassName("header-right")[0].classList.toggle("menu-closed"),this.showBurger=!this.showBurger,this.showBurger?document.getElementsByTagName("body")[0].style.overflowY="hidden":document.getElementsByTagName("body")[0].style.overflowY="scroll"},expandMobileMenu:function(t){"portfolio"===t?(document.getElementById("mobile_reports_label").classList.remove("active"),document.getElementById("mobile_funds_label").classList.remove("active"),document.getElementById("mobile_portfolio_label").classList.toggle("active")):"reports"===t?(document.getElementById("mobile_portfolio_label").classList.remove("active"),document.getElementById("mobile_funds_label").classList.remove("active"),document.getElementById("mobile_reports_label").classList.toggle("active")):"funds"===t&&(document.getElementById("mobile_portfolio_label").classList.remove("active"),document.getElementById("mobile_reports_label").classList.remove("active"),document.getElementById("mobile_funds_label").classList.toggle("active"))},setPageTitle:function(t){document.title=t+" / Console"},logout:function(){we.emit("channel","logout",!0)}})},Ee=xe,Te=(a("4960"),Object(D["a"])(Ee,s,n,!1,null,null,null));e["default"]=Te.exports},"506b":function(t,e,a){"use strict";var s=a("d68e");function n(t){var e=this;this.__namespace__=t.namespace||"tabex_default_",this.__handlers__=[],this.__iframe_url__=t.iframe,this.__iframe_done__=!1,this.__pending__=[],this.__iframe__=document.createElement("iframe"),this.__iframe__.style.left="-1000px",this.__iframe__.style.position="absolute",this.__iframe__.onload=function(){e.__iframe__.contentWindow.postMessage(JSON.stringify({origin:window.location.origin||window.location.protocol+"//"+window.location.host,namespace:e.__namespace__}),e.__iframe_url__),e.__iframe_done__=!0,e.__pending__.forEach((function(t){e.__iframe__.contentWindow.postMessage(JSON.stringify(t),e.__iframe_url__)})),e.__pending__=null},s.addEvent(window,"message",(function(t){if(0===e.__iframe_url__.indexOf(t.origin)){var a;try{a=JSON.parse(t.data)}catch(s){return}a.namespace===e.__namespace__&&e.__handlers__.forEach((function(t){t(a.channel,a.message)}))}})),this.__iframe__.src=this.__iframe_url__;var a=function(){document.body.appendChild(e.__iframe__)};"loading"===document.readyState?s.addEvent(document,"DOMContentLoaded",a):a()}function i(t){var e,a=this;for(this.__namespace__=t.namespace||"tabex_default_",this.__origin_first_check__=t.origin||window.location.origin||window.location.protocol+"//"+window.location.host,Array.isArray(this.__origin_first_check__)||(this.__origin_first_check__=[this.__origin_first_check__]),e=0;e<this.__origin_first_check__.length;e++)this.__origin_first_check__[e]=this.__origin_first_check__[e].replace(/[-\/\\^$+?.()|[\]{}]/g,"\\$&"),this.__origin_first_check__[e]=this.__origin_first_check__[e].replace(/[*]/g,".+?"),this.__origin_first_check__[e]=new RegExp(this.__origin_first_check__[e]);this.__origin__=null,this.__router__=t.router,s.addEvent(window,"message",(function(t){var s,n=!1;if(!a.__origin__||a.__origin__!==t.origin){for(e=0;e<a.__origin_first_check__.length;e++)if(a.__origin_first_check__[e].test(t.origin)){n=!0;break}if(!n)return}try{s=JSON.parse(t.data)}catch(i){return}if(s.namespace===a.__namespace__)return!a.__origin__&&s.origin?(a.__origin__=s.origin,void a.__router__.onmessage((function(t,e){window.parent.postMessage(JSON.stringify({channel:t,message:e,namespace:a.__namespace__}),a.__origin__)}))):void a.__router__.broadcast(s.channel,s.message)}))}n.prototype.broadcast=function(t,e){this.__iframe_done__?this.__iframe__.contentWindow.postMessage(JSON.stringify({channel:t,message:e,namespace:this.__namespace__}),this.__iframe_url__):this.__pending__.push({channel:t,message:e,namespace:this.__namespace__})},n.prototype.onmessage=function(t){this.__handlers__.push(t)},e.TunnelClient=n,e.TunnelRouter=i},6157:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"tag-widget "+(t.isModal?"":"page-container full-height")},[a("h1",[t.isInsideKite?a("span",{staticClass:"icon icon-bookmark"}):a("span",{staticClass:"icon icon-arrow-left",on:{click:function(e){return e.stopPropagation(),t.hideTagManagerModal.apply(null,arguments)}}}),t._v("\n\t\tManage tags\n\t\t"),!t.fetchingTags&&t.tags&&t.tags.length?a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.showCreateBox()}}},[t._v("+ New tag")]):t._e()],1),t._v(" "),t.fetchingTags?a("div",[a("jobber",{attrs:{main:"Fetching your tags",sub:""}})],1):a("div",[t.tagResults&&t.tagResults.length||t.tags&&t.tags.length?a("div",[a("div",{staticClass:"tag-search"},[a("su-input",{attrs:{autofocus:"",placeholder:"Search tags",label:"Search"},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}})],1),t._v(" "),t.tagResults&&t.tagResults.length?a("div",{staticClass:"tag-list"},[a("div",{staticClass:"added-tags"},t._l(t.tagResults,(function(e,s){return a("p",{key:s},[a("span",{staticClass:"tag",style:"background:"+t.getBackground(e.colour)+";color:"+t.getColor(e),on:{click:function(a){return t.showCreateBox(!0,e)}}},[t._v(t._s(e.text))]),t._v(" "),a("span",{staticClass:"tag-links"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"icon-container",attrs:{title:"Edit","tooltip-pos":"left"}},[a("span",{staticClass:"icon icon-edit",on:{click:function(a){return t.showCreateBox(!0,e)}}})]),t._v(" "),a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"icon-container",attrs:{title:"Delete","tooltip-pos":"left"}},[a("span",{staticClass:"icon icon-trash-empty",on:{click:function(a){return t.showConfirmationBox(!0,e)}}})])])])})),0)]):a("p",{staticClass:"text-grey"},[a("span",{staticClass:"icon icon-info"}),t._v(" No tags found.\n\t\t\t")])]):a("div",{staticClass:"text-center no-tags"},[a("img",{attrs:{src:"/static/images/tags-empty.png"}}),t._v(" "),a("br"),t._v(" "),t.fetchingTags?t._e():a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.showCreateBox()}}},[t._v("Create tag")])],1)]),t._v(" "),t.showCreate?a("div",{staticClass:"section tagger"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideCreateBox}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showCreateBox("new")}}},[a("div",{staticClass:"modalbody",on:{click:t.hidePalette}},[t.editing?a("h2",{staticClass:"create-tag-head"},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.hideCreateBox.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-arrow-left"})]),t._v(" "),a("span",[t._v('Edit "'+t._s(t._f("clip")(t.newTag.text))+'"')])]):a("h2",{staticClass:"create-tag-head"},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.hideCreateBox.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-arrow-left"})]),t._v("\n\t\t\t\t\t\t\tNew tag\n\t\t\t\t\t\t")]),t._v(" "),a("su-form",{ref:"create_tag_form",attrs:{id:"create_tag_form"}},[a("div",{staticClass:"create-tag-color"},[a("label",[t._v(" ")]),a("br"),t._v(" "),a("div",{staticClass:"selected-color",on:{click:function(e){e.stopPropagation(),t.showPalette=!t.showPalette}}},[a("span",{style:"background-color:"+t.newTag.colour},[t._v(" ")]),t._v(" "),a("span",[t._v("Color")])]),t._v(" "),t.showPalette?a("div",{staticClass:"color-palette"},t._l(t.palette,(function(e,s){return a("span",{key:s,staticClass:"palette-colors",style:"background:"+e,on:{click:function(a){return t.changeColor(e)}}},[t._v(" ")])})),0):t._e()]),a("div",{staticClass:"create-tag-name"},[a("su-input",{attrs:{id:"create_tag_name",type:"text",autofocus:"true",pattern:"\\s*(\\S\\s*){3,}",oninput:"this.setCustomValidity('')",maxlength:20,oninvalid:"this.setCustomValidity('Please fill in this field')",label:"Tag",placeholder:"Tag",rules:t.rules.tagName},model:{value:t.newTag.text,callback:function(e){t.$set(t.newTag,"text",e)},expression:"newTag.text"}})],1),a("br"),t._v(" "),a("div",{staticClass:"create-tag-desc row"},[a("div",{staticClass:"eight columns"},[a("su-input",{attrs:{pattern:"\\s*(\\S\\s*){0,}",oninvalid:"this.setCustomValidity('Invalid characters')",oninput:"this.setCustomValidity('')",type:"text",maxlength:140,label:"Description (optional)",placeholder:"Description (optional)",rules:t.rules.tagDesc},model:{value:t.newTag.description,callback:function(e){t.$set(t.newTag,"description",e)},expression:"newTag.description"}})],1),t._v(" "),a("div",{staticClass:"four columns su-input-group"},[a("label",{staticClass:"su-input-label"},[t._v(" ")]),t._v(" "),t.editing?a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit",disabled:t.creatingTag,processing:t.creatingTag},nativeOn:{click:function(e){return e.preventDefault(),t.createTag(!0)}}},[t._v("Update")]):a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit",disabled:t.creatingTag,processing:t.creatingTag},nativeOn:{click:function(e){return e.preventDefault(),t.createTag()}}},[t._v("Save")])],1)]),t._v(" "),t.editing?a("p",{staticClass:"text-center"},[t.deleting?a("su-loader"):a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showConfirmationBox.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\t\tDelete tag\n\t\t\t\t\t\t\t\t")])],1):t._e()])],1)])])])]):t._e(),t._v(" "),t.showConfirmation?a("div",{staticClass:"section tagger"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideConfirmationBox}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showConfirmationBox.apply(null,arguments)}}},[a("div",{staticClass:"modalbody",on:{click:function(e){return e.stopPropagation(),t.hidePalette.apply(null,arguments)}}},[a("h4",{staticClass:"text-center"},[t._v('Are you sure you want to delete "'+t._s(t.newTag.tag_name)+'" ?')]),a("br"),t._v(" "),a("div",{staticClass:"button-container text-center"},[a("su-button",{staticClass:"btn-grey btn-outline",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.hideConfirmationBox.apply(null,arguments)}}},[t._v("Cancel")]),t._v(" "),a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteTag()}}},[t._v("Delete")])],1)])])])])]):t._e()])},n=[],i=a("5975"),r=a("2e34"),o=a("02bc"),l=a("5dfe"),c=a("ba6a"),d=a("5665"),u=a("2f62");function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var h={name:"tagger",data:function(){var t=function(t,e){return e&&e.trim().length<3?new Error("Minimum characters required: 3"):e&&e.length>20?new Error("Maximum characters allowed: 20"):void 0},e=function(t,e){if(e&&e.length>140)return new Error("Maximum characters allowed: 140")};return{tags:[],searchInput:"",newTag:{text:"",type:"custom",classes:"custom-tag ",value:"",colour:"rgba(3, 155, 229, 1)",description:""},showCreate:!1,hasChanged:!1,showPalette:!1,palette:["rgba(3, 155, 229, 1)","rgba(11, 128, 67, 1)","rgba(63, 81, 181, 1)","rgba(244, 81, 30, 1)","rgba(121, 85, 72, 1)","rgba(124, 179, 66, 1)","rgba(240, 147, 0, 1)","rgba(142, 36, 170, 1)","rgba(97, 97, 97, 1)","rgba(255, 205, 86, 1)"],paletteMap:{"rgba(3, 155, 229, 1)":"p1","rgba(11, 128, 67, 1)":"p2","rgba(63, 81, 181, 1)":"p3","rgba(244, 81, 30, 1)":"p4","rgba(121, 85, 72, 1)":"p5","rgba(124, 179, 66, 1)":"p6","rgba(240, 147, 0, 1)":"p7","rgba(142, 36, 170, 1)":"p8","rgba(97, 97, 97, 1)":"p9","rgba(255, 205, 86, 1)":"p10"},creatingTag:!1,editing:!1,deleting:!1,showConfirmation:!1,rules:{tagName:[{validator:t,required:!0}],tagDesc:[{validator:e,required:!1}]},fetchingTags:!1}},props:{isModal:{type:Boolean,default:!1}},computed:g(g({},Object(u["c"])(["consoleTags","consolePendingTags","csrf"])),{},{isInsideKite:function(){return this.$route.query&&this.$route.query.source&&("kite"===this.$route.query.source||"kitewebview"===this.$route.query.source||"coinwebview"===this.$route.query.source)},tagOptions:function(){var t=this;if(this.tags){var e=this.tags.filter((function(e){return-1!==e.text.toLowerCase().indexOf(t.tagsFilter.toLowerCase())&&"SYSTEM"!==e.client_id.toUpperCase()}));return e.push({text:"+  New tag"}),e}},tagResults:function(){var t=this.searchInput.trim().toLowerCase(),e=[];if(t)for(var a in this.tags)-1!==this.tags[a].tag_name.toLowerCase().indexOf(t)&&e.push(this.tags[a]);else e=this.tags;return e.sort((function(t,e){var a=t.tag_name.toUpperCase(),s=e.tag_name.toUpperCase();return a<s?-1:a>s?1:0})),e}}),watch:{"newTag.text":function(t){t&&(this.newTag.text=t.toLowerCase().trim().replace(" ","-"))}},components:{"su-loader":i["a"],jobber:r["a"],"su-button":l["a"],empty:o["a"]},mounted:function(){var t=this;window.addEventListener("keyup",(function(e){27===e.keyCode&&(t.showCreate?t.hideCreateBox():t.hideTagManagerModal())})),this.fetchTags(!1,!0),this.$route.query.action&&"create"===this.$route.query.action&&(this.$route.query.tag&&(this.newTag.text=this.$route.query.tag),this.showCreateBox())},methods:g(g({},Object(u["d"])(["setConsoleTags"])),{},{hideTagManagerModal:function(){this.$parent.hideTagManagerModal()},analyseTag:function(t){this.$router.push({name:"taganalysis",query:{tag:t.tag_id}})},getBackground:function(t){if(t){var e=t.replace("1)","0.1)");return e}return"rgba(68, 68, 68, 0.1)"},getColor:function(t){return t.colour?t.colour:"#444"},showCreateBox:function(t,e){this.showCreate||(this.showCreate=!0,!0===t&&(this.editing=!0,this.newTag=e),this.$nextTick((function(){try{document.querySelectorAll(".create-tag-name")[0].querySelector("input").focus()}catch(t){console.log("Error creating tag form")}})))},hideCreateBox:function(){this.showCreate=!1,this.editing=!1,this.newTag={text:"",type:"custom",classes:"custom-tag ",value:"",colour:"rgba(3, 155, 229, 1)",description:""}},hidePalette:function(){this.showPalette=!1},changeColor:function(t){this.newTag.colour=t},createTag:function(t){var e=this;if(this.$refs["create_tag_form"]&&this.$refs["create_tag_form"].validate()){t||(this.newTag.classes+=this.paletteMap[this.newTag.colour]),this.creatingTag=!0;var a={tag_name:this.newTag.text,description:this.newTag.description,colour:this.newTag.colour},s=d["a"].createTag,n="POST";!0===t&&(a["tag_id"]=parseInt(this.newTag.id),s=d["a"].editTag,n="PUT"),c["a"].request(n,!1,s,a,(function(a,s){"SUCCESS"===a.toUpperCase()?e.fetchTags(t):"FAILURE"===a.toUpperCase()?(e.creatingTag=!1,e.$toast.error({message:"Error updating tags: "+s.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.creatingTag=!1,e.$toast.error({message:"Error updating tags:"+c["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}))}))}},fetchTags:function(t,e){var a=this;e&&(this.fetchingTags=!0),c["a"].request("GET",!1,d["a"].getTags,null,(function(s,n){if(a.fetchingTags=!1,a.creatingTag=!1,a.deleting=!1,a.$webviewReady(),"SUCCESS"===s.toUpperCase()){for(var i=n.data.data.result,r=0;r<i.length;r++)"SYSTEM"===i[r].client_id.toUpperCase()?(i[r]["type"]="system",i[r]["classes"]="system-tag"):(i[r]["type"]="custom",i[r]["classes"]="custom-tag "+a.paletteMap[i[r].colour]),i[r]["text"]=i[r].tag_name,i[r]["value"]=i[r].id;if(a.tags=i,a.setConsoleTags(i),!e){var o=i.find((function(t){return t.tag_name===a.newTag.text}));o?t?a.$toast.success({message:"Tag updated.",orientation:a.$toast.TOP_RIGHT,duration:2e3}):a.$toast.success({message:"Tag created.",orientation:a.$toast.TOP_RIGHT,duration:2e3}):(a.deleting=!1,a.$toast.success({message:"Tag deleted.",orientation:a.$toast.TOP_RIGHT,duration:2e3})),a.hideCreateBox()}}else"FAILURE"===s.toUpperCase()?a.$toast.error({message:"Error fetching tags: "+n.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3}):a.$toast.error({message:"Error fetching tags:"+c["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3})}))},postTag:function(){for(var t={},e=[],a=0;a<this.selectedTags.length;a++)e.push(this.selectedTags[a]["id"]);t["target_id"]=this.holding.instrument_id,t["tag_ids"]=e,this.$emit("tag-posted",t)},deleteTag:function(){var t=this;this.deleting=!0,this.$nextTick((function(){t.hideConfirmationBox()}));var e=[];e.push(parseInt(this.newTag.id)),c["a"].request("PUT",!1,d["a"].deleteTag,{tag_ids:e},(function(e,a){"SUCCESS"===e.toUpperCase()?t.fetchTags(!0):"FAILURE"===e.toUpperCase()?(t.deleting=!1,t.$toast.error({message:"Error deleting tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.deleting=!1,t.$toast.error({message:"Error deleting tags:"+c["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))},showConfirmationBox:function(t,e){t&&e&&(this.newTag=e),this.showConfirmation=!0},hideConfirmationBox:function(){this.showConfirmation=!1}})},m=h,f=a("2877"),v=Object(f["a"])(m,s,n,!1,null,null,null);e["default"]=v.exports},6825:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hide,expression:"hide"},{name:"on-escape",rawName:"v-on-escape",value:t.hide,expression:"hide"}],staticClass:"context-menu",attrs:{id:"context-menu-"+t._uid}},[a("div",{staticClass:"context-menu-button-wrap",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleButtonClick.apply(null,arguments)}}},[t._t("button")],2),t._v(" "),a("transition",{attrs:{name:"dropdown"}},[t.showMenu?a("ul",{staticClass:"context-menu-list list-flat"},[t._t("menu")],2):t._e()])],1)},n=[],i={name:"mobile-context-menu",props:{orientation:{type:String,default:"left"},marginTop:{type:Number,default:8},parentSelector:String},data:function(){return{showMenu:!1}},deactivated:function(){this.hide(),this.$emit("delete")},methods:{hide:function(){this.showMenu&&(this.showMenu=!1)},handleButtonClick:function(t){var e=this;this.showMenu?this.showMenu=!1:(this.showMenu=!0,this.$nextTick((function(){var t=0;if(e.parentSelector){var a=document.querySelector(e.parentSelector);t=a&&a.scrollTop}else t=window.pageYOffset||document.documentElement.scrollTop;var s=e.$el.querySelector(".context-menu-button").getBoundingClientRect(),n=e.$el.querySelector(".context-menu-list"),i=n.getBoundingClientRect(),r=!0;i.height+i.top-t<=window.innerHeight?n.style.top=s.top+s.height+e.marginTop+"px":(n.style.top=s.top-i.height-e.marginTop+"px",r=!1),r?n.classList.add("position-bottom"):n.classList.add("position-top"),"left"===e.orientation?n.style.left=s.left+s.width-i.width+"px":"right"===e.orientation&&(n.style.left=s.left+s.width+"px")})))}}},r=i,o=a("2877"),l=Object(o["a"])(r,s,n,!1,null,null,null);e["a"]=l.exports},"96cf":function(t,e,a){var s=function(t){"use strict";var e,a=Object.prototype,s=a.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function l(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(M){l=function(t,e,a){return t[e]=a}}function c(t,e,a,s){var n=e&&e.prototype instanceof m?e:m,i=Object.create(n.prototype),r=new D(s||[]);return i._invoke=E(t,a,r),i}function d(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(M){return{type:"throw",arg:M}}}t.wrap=c;var u="suspendedStart",_="suspendedYield",g="executing",p="completed",h={};function m(){}function f(){}function v(){}var y={};l(y,i,(function(){return this}));var b=Object.getPrototypeOf,C=b&&b(b(O([])));C&&C!==a&&s.call(C,i)&&(y=C);var w=v.prototype=m.prototype=Object.create(y);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function a(n,i,r,o){var l=d(t[n],t,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"===typeof u&&s.call(u,"__await")?e.resolve(u.__await).then((function(t){a("next",t,r,o)}),(function(t){a("throw",t,r,o)})):e.resolve(u).then((function(t){c.value=t,r(c)}),(function(t){return a("throw",t,r,o)}))}o(l.arg)}var n;function i(t,s){function i(){return new e((function(e,n){a(t,s,e,n)}))}return n=n?n.then(i,i):i()}this._invoke=i}function E(t,e,a){var s=u;return function(n,i){if(s===g)throw new Error("Generator is already running");if(s===p){if("throw"===n)throw i;return R()}a.method=n,a.arg=i;while(1){var r=a.delegate;if(r){var o=T(r,a);if(o){if(o===h)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===u)throw s=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=g;var l=d(t,e,a);if("normal"===l.type){if(s=a.done?p:_,l.arg===h)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(s=p,a.method="throw",a.arg=l.arg)}}}function T(t,a){var s=t.iterator[a.method];if(s===e){if(a.delegate=null,"throw"===a.method){if(t.iterator["return"]&&(a.method="return",a.arg=e,T(t,a),"throw"===a.method))return h;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(s,t.iterator,a.arg);if("throw"===n.type)return a.method="throw",a.arg=n.arg,a.delegate=null,h;var i=n.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,h):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var a=t[i];if(a)return a.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function a(){while(++n<t.length)if(s.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return r.next=r}}return{next:R}}function R(){return{value:e,done:!0}}return f.prototype=v,l(w,"constructor",v),l(v,"constructor",f),f.displayName=l(v,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,o,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},k(x.prototype),l(x.prototype,r,(function(){return this})),t.AsyncIterator=x,t.async=function(e,a,s,n,i){void 0===i&&(i=Promise);var r=new x(c(e,a,s,n),i);return t.isGeneratorFunction(a)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},k(w),l(w,o,"Generator"),l(w,i,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var a in t)e.push(a);return e.reverse(),function a(){while(e.length){var s=e.pop();if(s in t)return a.value=s,a.done=!1,a}return a.done=!0,a}},t.values=O,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var a in this)"t"===a.charAt(0)&&s.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(s,n){return o.type="throw",o.arg=t,a.next=s,n&&(a.method="next",a.arg=e),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var l=s.call(r,"catchLoc"),c=s.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=t,r.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),P(a),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var s=a.completion;if("throw"===s.type){var n=s.arg;P(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,a,s){return this.delegate={iterator:O(t),resultName:a,nextLoc:s},"next"===this.method&&(this.arg=e),h}},t}(t.exports);try{regeneratorRuntime=s}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}},9946:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{class:t.customClass,attrs:{to:t.to,event:""},nativeOn:{click:function(e){return e.preventDefault(),t.handle.apply(null,arguments)}}},[t._t("default")],2)},n=[];function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var r={name:"custom-router-link",props:{to:{type:[String,Object],required:!0}},data:function(){return{customClass:[]}},mounted:function(){var t=this;this.$nextTick((function(){t.setClass()}))},methods:{handle:function(){var t,e;"object"===i(this.to)?(t=this.to.name,e=this.$route.name):(t=this.to,e=this.$route.path),t===e?(document.querySelector(".page-container").classList.add("bounce"),setTimeout((function(){document.querySelector(".page-container").className="page-container profile"}),305)):this.$router.push(this.to)},setClass:function(){}}},o=r,l=a("2877"),c=Object(l["a"])(o,s,n,!1,null,null,null);e["a"]=c.exports},"9dae":function(t,e){function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}(function(){if(window.hasOwnProperty("KiteConnect"))return!1;var t=null,e="undefined"!=typeof _KITE_ROOT?_KITE_ROOT:"https://kite.zerodha.com",s="/connect/basket",n="/connect/login",i="/connect/portfolio/authorise/holdings",r="/static/build/css/publisher.min.css",o=["variety","exchange","tradingsymbol","transaction_type","quantity","order_type","price","trigger_price","product","validity","readonly","tag","stoploss","squareoff","trailing_stoploss","disclosed_quantity"],l=50,c={redirect_url:1,api_key:1},d=["kite.zerodha.net","kite.zerodha.com","localhost","127.0.0.1"],u=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Trident|IEMobile|Edge|Opera Mini/i.test(navigator.userAgent),_=null,g=null,p=!1;function h(e,a){this.clear=function(){t("#kite-modal-wrap").fadeOut(200,(function(){t(this).remove(),_=null,g=null}))};t(window).width(),t(window).height(),screen.width/2<500||screen.width,screen.height/1.5<500||screen.height;var s=t("<div id='kite-modal'>"),n=t("<iframe id='kite-frame'>"),i=t("<a href='#' title='Close'>").html("&times;").attr("id","kite-close");i.click((function(){return confirm("Do you want to abandon this transaction and go back?")&&(g&&g.callback("cancelled",null),_&&_.clear()),!1})),t("body").append(t("<div id='kite-modal-wrap'>").append(s)),s.append(i).append(n);var r=n.contents()[0];return r.open(),r.write("<!doctype html><html><head></head><body></body></html>"),r.close(),_=this,n.contents().find("body")}function m(e,a,s,n){var i=this;this.clear=function(){i.win.close()},_&&_.clear();t(window).width(),t(window).height();s||(s=screen.width/2<500?500:screen.width/2),n||(n=screen.height/1.5<500?500:screen.height/1.8);var r=screen.width/2-s/2,o=screen.height/2-n/2,l="width=%,height=%,left=%,top=%,status=no,menubar=no,toolbar=no,scrollbars=yes".replace("%",s).replace("%",n).replace("%",r).replace("%",o);return this.win=window.open(e,a,l),_=this,t(this.win.document).find("body")}function v(e,a){var s=t("<input>").attr("name",e).attr("type","hidden").attr("value",a);return s}function y(e,a,s){var n=t("<form>");for(f in n.attr("method",s).attr("action",a),e)e.hasOwnProperty(f)&&n.append(v(f,e[f]));return n}function b(t,e){var a={data:JSON.stringify(t)};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);return a}function C(t,e,a,s){if(e=e||2,a=a||25,s=s||200,t.hasOwnProperty("offset"))for(var n=t.offset().left,i=(t.outerWidth(),1);i<=e;i++)t.animate({left:"-="+a},s/e/4).animate({left:"+="+a},s/e/2).animate({left:"+=0"},s/e/4)}function w(){var e=["variety","exchange","tradingsymbol","transaction_type","quantity","order_type","price","trigger_price","product","validity","readonly","tag","stoploss","squareoff","trailing_stoploss","disclosed_quantity"],a=t("*[data-kite]");a.each((function(a,s){if(s=t(s),!s.data("kite-converted")){s.data("kite-converted",1);for(var n=s.data("kite"),i={variety:"regular"},r=0;r<e.length;r++)i[e[r]]=s.data(e[r]);n&&i.exchange&&i.tradingsymbol&&i.quantity&&i.transaction_type&&(ki=new KiteConnect(n),ki.add(i),ki.link(s),"KITE-BUTTON"==s.prop("tagName").toUpperCase()&&(s.addClass("kite-"+i.transaction_type.toLowerCase()),s.attr("title",i.transaction_type+" "+i.tradingsymbol)))}}))}function k(){t(window).on("message",(function(e){e=e.originalEvent;var a=t("<a>").attr("href",e.origin).get(0);if(-1!=d.indexOf(a.hostname)&&e.data){try{var s=JSON.parse(e.data)}catch(e){return}if(s.hasOwnProperty("type"))switch(s.type){case"finished":setTimeout((function(){C(t("#kite-modal"))}),500);break;case"resize":if(s.hasOwnProperty("height")&&"number"==typeof s.height)s.height,t(window).height();break;case"basket":s.hasOwnProperty("request_token")&&s.hasOwnProperty("status")&&("success"!=s.status&&"cancelled"!=s.status||g&&(g.callback(s.status,s.request_token),_&&_.clear()));break;case"login":s.hasOwnProperty("request_token")&&s.hasOwnProperty("status")&&g&&(g.callback(s.status,s.request_token),_&&_.clear());break;case"holdings.auth":g&&(g.holauth_callback&&g.holauth_callback(s),_&&_.clear());break}}}))}function x(a){t=a,t(document).ready((function(){t("body").append(t("<link>").attr("rel","stylesheet").attr("href",e+r)),w(),t(document).bind("DOMNodeInserted",(function(e){t(e.target).data("kite")&&w()})),k()})),p=!0}window.KiteConnect=function(r){var d=[],_={},p=null,f=(Math.floor(Math.random()*Math.pow(10,8)),this);this.login=function(){var a=u?h("","Kite"):m("","Kite",475);g=f;var s=t("<h2>");s.attr("style","font-family: 'Segoe UI', 'Helvetica Neue', 'Helvetica', sans; text-align: center; margin-top: 60px;color: #666;font-weight: 200"),s.text("Connecting to Kite ..."),a.append(s);var i=y({api_key:r,view:"popup"},e+n,"get");return a.append(i),function(t){setTimeout((function(){t.submit()}),500)}(i),!1},this.authHoldings=function(a,s){s&&(this.holauth_callback=s);var n=u?h("","Kite"):m("","Kite",600);g=f;var o=t("<h2>");o.attr("style","font-family: 'Segoe UI', 'Helvetica Neue', 'Helvetica', sans-serif; text-align: center; margin-top: 60px;color: #666;font-weight: 200"),o.text("Connecting to Kite ..."),n.append(o);var l=y({},e+i+"/"+r+"/"+a,"get");return n.append(l),function(t){setTimeout((function(){t.submit()}),500)}(l),!1},this.connect=function(a){if(d.length<0)return!1;g=f;var n=u?h("","Kite"):m("","Kite"),i=t("<h2>");i.attr("style","font-family: 'Segoe UI', 'Helvetica Neue', 'Helvetica', sans; text-align: center; margin-top: 60px;color: #666;font-weight: 200"),i.text("Connecting to Kite ..."),n.append(i),_["view"]="popup";var r=y(b(d,_),e+s,"post");return n.append(r),function(t){setTimeout((function(){t.submit()}),500)}(r),!1},this.finished=function(t){p=t},this.renderButton=function(e){if("string"==typeof e&&(e=t(e)),e&&"object"==a(e)){var s=t("<button>").attr("title","Trade with Kite").attr("class","kite-trade-button");1==d.length&&(s.addClass("kite-"+d[0].transaction_type.toLowerCase()),s.attr("title",d[0].transaction_type+" "+d[0].tradingsymbol)),s.click((function(e){return e.preventDefault(),t(this).blur(),f.connect(),!1})),t(e).append(s)}},this.link=function(e){"string"==typeof e&&(e=t(e)),e&&"object"==a(e)&&e.click((function(e){return e.preventDefault(),t(this).blur(),f.connect(),!1}))},this.add=function(t){if(d.length>=l)return!1;for(var e=0;e<arguments.length;e++){for(var a={},s=(t=arguments[e],0);s<o.length;s++)t.hasOwnProperty(o[s])&&(a[o[s]]=t[o[s]]);"BUY"!=a.transaction_type&&"SELL"!=a.transaction_type&&(a.transaction_type="BUY"),d.push(a)}},this.setOption=function(t,e){c.hasOwnProperty(t)&&(_[t]=e)},this.get=function(){return JSON.parse(JSON.stringify(d))},this.count=function(){return d.length},this.html=function(){var a=y(b(d,_),e+s,"post");return t("<div>").append(a).html()},this.callback=function(t,e){"function"==typeof p&&p(t||t.cancelled,e||null)},this.setOption("api_key",r),this.setOption("redirect_url","#")},window.KiteConnect.ready=function(t){p?t():function(t){window.setTimeout((function(){window.KiteConnect.ready(t)}),50)}(t)};var E=!0;if(window.hasOwnProperty("jQuery")&&jQuery.hasOwnProperty("fn")&&jQuery.fn.hasOwnProperty("jquery")){var T=parseFloat(jQuery.fn.jquery);!isNaN(T)&&T>=1.6&&(E=!1,x(jQuery))}if(E){var S=document.createElement("script");S.src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js";var P=document.getElementsByTagName("head")[0],D=!1;S.onload=S.onreadystatechange=function(){D||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(D=!0,x(jQuery),S.onload=S.onreadystatechange=null,P.removeChild(S))},P.appendChild(S)}})()},a34a:function(t,e,a){t.exports=a("96cf")},b23e:function(t,e,a){"use strict";t.exports=a("f3b7")},b6f4:function(t,e,a){"use strict";var s=a("0dd4"),n=a("2388");function i(t){if("function"!==typeof t)throw new Error;return t}function r(){return 0}var o=function(t){return function(){return t}};e["a"]=function(){var t=n["a"],e=!1,a=1,l=1,c=[0],d=r,u=r,_=r,g=r,p=r;function h(t){return t.x0=t.y0=0,t.x1=a,t.y1=l,t.eachBefore(m),c=[0],e&&t.eachBefore(s["a"]),t}function m(e){var a=c[e.depth],s=e.x0+a,n=e.y0+a,i=e.x1-a,r=e.y1-a;i<s&&(s=i=(s+i)/2),r<n&&(n=r=(n+r)/2),e.x0=s,e.y0=n,e.x1=i,e.y1=r,e.children&&(a=c[e.depth+1]=d(e)/2,s+=p(e)-a,n+=u(e)-a,i-=_(e)-a,r-=g(e)-a,i<s&&(s=i=(s+i)/2),r<n&&(n=r=(n+r)/2),t(e,s,n,i,r))}return h.round=function(t){return arguments.length?(e=!!t,h):e},h.size=function(t){return arguments.length?(a=+t[0],l=+t[1],h):[a,l]},h.tile=function(e){return arguments.length?(t=i(e),h):t},h.padding=function(t){return arguments.length?h.paddingInner(t).paddingOuter(t):h.paddingInner()},h.paddingInner=function(t){return arguments.length?(d="function"===typeof t?t:o(+t),h):d},h.paddingOuter=function(t){return arguments.length?h.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):h.paddingTop()},h.paddingTop=function(t){return arguments.length?(u="function"===typeof t?t:o(+t),h):u},h.paddingRight=function(t){return arguments.length?(_="function"===typeof t?t:o(+t),h):_},h.paddingBottom=function(t){return arguments.length?(g="function"===typeof t?t:o(+t),h):g},h.paddingLeft=function(t){return arguments.length?(p="function"===typeof t?t:o(+t),h):p},h}},d4ff:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var s="holdings"},d68e:function(t,e,a){"use strict";e.asyncEach=function(t){t=t.slice(0);var e=arguments[arguments.length-1],a=Array.prototype.slice.call(arguments,1);function s(){if(0!==t.length){var a=t.shift();a.apply(this,Array.prototype.slice.call(arguments,0).concat(s))}else e.apply(this,arguments)}a.pop(),s.apply(this,a)},e.addEvent=function(t,e,a){document.addEventListener?t.addEventListener(e,a):t.attachEvent("on"+e,a)}},dfd9:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container holdings"},[t.isMobileView?t._e():a("h1",[a("span",{staticClass:"icon icon-briefcase"}),t._v(" "),a("span",[t._v("Pledge holdings")])]),t._v(" "),t.isMobileView?t._e():a("hr",{staticClass:"header-hr"}),t._v(" "),t.pageBanner&&t.pageBanner.length?a("div",{staticClass:"notice text-box yellow"},[a("ul",t._l(t.pageBanner,(function(e,s){return a("li",{key:s,domProps:{innerHTML:t._s(e)}})})),0)]):t._e(),t._v(" "),t.pageReady?a("div",[t.isFOEnabled&&!t.dpNotFound?a("div",[a("div",{staticClass:"action-tabs"},[a("span",{class:["pledge"===t.activeSection?"active":"","tab","pledge"],on:{click:function(e){return t.displayTab("pledge")}}},[t._v("\n\t\t\t\t\tPledge")]),a("span",{class:["unpledge"===t.activeSection?"active":"","tab"],on:{click:function(e){return t.displayTab("unpledge")}}},[t._v("\n\t\t\t\t\tUnpledge")]),a("span",{class:["history"===t.activeSection?"active":"","tab"],on:{click:function(e){return t.displayTab("history")}}},[t._v("\n\t\t\t\t\tHistory")])]),t._v(" "),"pledge"===t.activeSection?a("div",[t.job||t.fetchingData||t.holdingsError?t._e():a("div",{class:{section:!0,"table-section":!0,"pledge-table-section":!0}},[a("div",{staticClass:"fetch-data"},[t.sortingData?a("su-loader"):t._e()],1),t._v(" "),t.holdings_items.length?a("div",[t.isMobileView?a("div",{staticClass:"table-section show-on-mobile cards pledge-cards"},[a("div",{staticClass:"pledge-head"},[t.pledgedRows.length?a("p",[a("span",[a("span",{staticClass:"pledge-head-values"},[t._v("₹"+t._s(t.totalCollateral)+" ("+t._s(t.pledgedRows.length)+" selected)")])]),a("br"),t._v(" "),t._m(2)]):a("h3",[t._v("\n\t\t\t\t\t\t\t\t\tSelect holdings to pledge"),a("br"),t._v(" "),t._m(3)]),t._v(" "),a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.pledging,disabled:t.pledging||0===t.pledgedRows.length},nativeOn:{click:function(e){return e.preventDefault(),t.showCreatePledgeModal()}}},[t._v("\n\t\t\t\t\t\t\t\t\tContinue\n\t\t\t\t\t\t\t\t")])],1),t._v(" "),t.isMobileView?a("div",{staticClass:"table-sort no-float"},[a("label",{staticClass:"select-all-mobile"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.allChecked,expression:"allChecked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.allChecked)?t._i(t.allChecked,null)>-1:t.allChecked},on:{change:[function(e){var a=t.allChecked,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.allChecked=a.concat([i])):r>-1&&(t.allChecked=a.slice(0,r).concat(a.slice(r+1)))}else t.allChecked=n},function(e){return t.selectAllInstruments()}]}}),t._v(" "),a("span",{staticClass:"checkmark"}),t._v(" "),a("span",[t._v("Select all")])]),t._v(" "),a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.showSortModal.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-sliders"}),t._v(" Sort\n\t\t\t\t\t\t\t\t")]),t._v(" "),t.showSort?a("mobile-context-menu",{attrs:{isMenu:!1},on:{close:t.hideSortModal}},[a("template",{slot:"menu"},[a("div",{staticClass:"sort-container"},[a("div",{staticClass:"su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Order")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sortKey,expression:"sortKey"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortKey=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"tradingsymbol"}},[t._v("Symbol")]),t._v(" "),a("option",{attrs:{value:"quantity_available"}},[t._v("Qty.")]),t._v(" "),a("option",{attrs:{value:"closing_value"}},[t._v("Present value")])])]),t._v(" "),a("div",{staticClass:"su-input-group  su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Sort by")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortBy=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"asc"}},[t._v("Ascending")]),t._v(" "),a("option",{attrs:{value:"desc"}},[t._v("Descending")])])]),t._v(" "),a("div",{staticClass:"text-center"},[a("br"),t._v(" "),a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.sortMobileTable()}}},[t._v("Sort")]),a("br")],1)])])],2):t._e()],1):t._e(),t._v(" "),t._l(t.holdings_items,(function(e,s){return a("div",{key:s},[!e.quantity_available||!e.haircut||e.pending_pledge_qty&&0!==e.pending_pledge_qty?t._e():a("div",{staticClass:"card pledge-card",class:t.holdings_items.length-1===s?"last":""},[a("div",{staticClass:"top"},[a("div",{staticClass:"top-left"},[a("div",{staticClass:"row-check"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pledgedRows,expression:"pledgedRows"}],attrs:{type:"checkbox"},domProps:{value:e.instrument_id,checked:Array.isArray(t.pledgedRows)?t._i(t.pledgedRows,e.instrument_id)>-1:t.pledgedRows},on:{change:function(a){var s=t.pledgedRows,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=e.instrument_id,o=t._i(s,r);n.checked?o<0&&(t.pledgedRows=s.concat([r])):o>-1&&(t.pledgedRows=s.slice(0,o).concat(s.slice(o+1)))}else t.pledgedRows=i}}}),t._v(" "),a("span",{staticClass:"checkmark"}),t._v(" "),a("span",{staticClass:"text-bold symbol"},[t._v(t._s(e["tradingsymbol"]))])])])]),t._v(" "),a("div",{staticClass:"top-right"},[t.sortingData?t._e():a("div",{staticClass:"pledge-qty"},[a("su-input",{attrs:{type:"number",step:1e-4,min:1e-4,max:e["quantity_available"],"static-label":"",label:"Qty. to pledge"},on:{change:function(a){return t.recomputeCollateral(e)}},model:{value:e.pledgeQty,callback:function(a){t.$set(e,"pledgeQty",a)},expression:"item.pledgeQty"}}),t._v(" "),a("span",{staticClass:"total-qty"},[t._v("/ "+t._s(e["quantity_available"]))])],1)])]),t._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"bottom-left"},[a("div",[a("label",[t._v("Haircut")]),t._v(" "+t._s(e["haircut"])+"%\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),null==e["closing_value"]||null!==e["failure_date"]&&e["failure_date"].length>0?a("div",{staticClass:"text-light-grey"}):a("div",[a("label",[t._v("Present value")]),t._v(" "+t._s(t._f("inrFormat")(e["closing_value"],2)))])]),t._v(" "),a("div",{staticClass:"bottom-right"},[a("br"),t._v(" "),t.recomputing?t._e():a("div",[a("label",[t._v("Collateral")]),t._v(" "+t._s(e["collateral"]))])])])])])}))],2):a("div",{staticClass:"table-container hide-on-mobile"},[a("div",{staticClass:"pledge-head"},[t.pledgedRows.length?a("p",[a("span",[a("span",{staticClass:"pledge-head-values"},[t._v("₹"+t._s(t._f("inrFormat")(t.totalCollateral,2))+" ("+t._s(t.pledgedRows.length)+" selected)")])]),a("br"),t._v(" "),t._m(0)]):a("h3",[t._v("\n\t\t\t\t\t\t\t\t\tSelect holdings to pledge"),a("br"),t._v(" "),t._m(1)]),t._v(" "),a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.pledging,disabled:t.pledging||0===t.pledgedRows.length},nativeOn:{click:function(e){return e.preventDefault(),t.showCreatePledgeModal()}}},[t._v("\n\t\t\t\t\t\t\t\t\tContinue\n\t\t\t\t\t\t\t\t")])],1),t._v(" "),a("table",{staticClass:"holdings-table pledge-table",attrs:{id:"holdings_table"}},[a("thead",[a("tr",[a("th",{staticClass:"row-check table-border"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.allChecked,expression:"allChecked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.allChecked)?t._i(t.allChecked,null)>-1:t.allChecked},on:{change:[function(e){var a=t.allChecked,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.allChecked=a.concat([i])):r>-1&&(t.allChecked=a.slice(0,r).concat(a.slice(r+1)))}else t.allChecked=n},function(e){return t.selectAllInstruments()}]}}),t._v(" "),a("span",{staticClass:"checkmark"})])]),t._v(" "),a("th",{class:["table-border "+t.isSorted("tradingsymbol")],on:{click:function(e){return t.sortTable("tradingsymbol",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("tradingsymbol")]})]),t._v(" "),a("th",{class:t.isSorted("quantity_available"),on:{click:function(e){return t.sortTable("quantity_available",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tQty.\n\t\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("quantity_available")]})]),t._v(" "),a("th",{class:["table-border "+t.isSorted("closing_value")],on:{click:function(e){return t.sortTable("closing_value",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tPresent value\n\t\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("closing_value")]})]),t._v(" "),a("th",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tQty. to pledge\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("th",{class:t.isSorted("haircut"),on:{click:function(e){return t.sortTable("haircut",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tHaircut\n\t\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("haircut")]})]),t._v(" "),a("th",{class:t.isSorted("collateral"),on:{click:function(e){return t.sortTable("collateral",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tCollateral margin\n\t\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("collateral")]})])])]),t._v(" "),a("tbody",t._l(t.holdings_items,(function(e,s){return!e.quantity_available||!e.haircut||e.pending_pledge_qty&&0!==e.pending_pledge_qty?t._e():a("tr",{key:s,class:{"grey-back":-1!==t.pledgedRows.indexOf(e.instrument_id)}},[a("td",{staticClass:"row-check table-border"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pledgedRows,expression:"pledgedRows"}],attrs:{type:"checkbox"},domProps:{value:e.instrument_id,checked:Array.isArray(t.pledgedRows)?t._i(t.pledgedRows,e.instrument_id)>-1:t.pledgedRows},on:{change:function(a){var s=t.pledgedRows,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=e.instrument_id,o=t._i(s,r);n.checked?o<0&&(t.pledgedRows=s.concat([r])):o>-1&&(t.pledgedRows=s.slice(0,o).concat(s.slice(o+1)))}else t.pledgedRows=i}}}),t._v(" "),a("span",{staticClass:"checkmark"})])]),t._v(" "),a("td",{staticClass:"textleft table-border"},[a("span",{staticClass:"symbol"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e["tradingsymbol"])+"\n\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_available"],3))+"\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),null==e["closing_value"]||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey table-border"},[t._v(" – ")]):a("td",{staticClass:"table-border"},[t._v(t._s(t._f("inrFormat")(e["closing_value"],2)))]),t._v(" "),t.sortingData?t._e():a("td",{staticClass:"pledge-qty"},[a("su-input",{attrs:{type:"number",step:1e-4,min:1e-4,max:e["quantity_available"],"static-label":"",placeholder:"",label:""},on:{change:function(a){return t.recomputeCollateral(e)}},model:{value:e.pledgeQty,callback:function(a){t.$set(e,"pledgeQty",a)},expression:"holding_item.pledgeQty"}})],1),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.haircut)+"%\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("td",[t.recomputing?t._e():a("span",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.collateral)+"\n\t\t\t\t\t\t\t\t\t\t\t")])])])})),0)])])]):a("div",[a("empty",{attrs:{main:"",sub:"You don't have any holdings to pledge"}})],1)])]):"unpledge"===t.activeSection?a("div",[t.job||t.fetchingData||t.holdingsError?t._e():a("div",{class:{section:!0,"table-section":!0,"pledge-table-section":!0}},[a("div",{staticClass:"fetch-data"},[t.sortingData?a("su-loader"):t._e()],1),t._v(" "),t.pledgedHoldings.length?a("div",[t.isMobileView?a("div",{staticClass:"table-section show-on-mobile cards pledge-cards instant-unpledge-cards"},t._l(t.pledgedHoldings,(function(e,s){return a("div",{key:s},[e.pending_pledge_qty&&0!==e.pending_pledge_qty?t._e():a("div",{staticClass:"card pledge-card",class:t.holdings_items.length-1===s?"last":""},[a("div",{staticClass:"top"},[a("div",{staticClass:"top-left"},[a("div",[a("span",{staticClass:"text-bold symbol"},[t._v(t._s(e["tradingsymbol"]))])])]),t._v(" "),a("div",{staticClass:"top-right"},[a("div",[a("label",[t._v("Qty. pledged")]),t._v(" "+t._s(e["quantity_pledged_for_margin"])+"\n\t\t\t\t\t\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"bottom-left"},[a("div",[a("label",[t._v("Haircut")]),t._v(" "+t._s(e["haircut"])+"%\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),null==e["pledge_closing_value"]||null!==e["failure_date"]&&e["failure_date"].length>0?a("div",{staticClass:"text-light-grey"}):a("div",[a("label",[t._v("Present value")]),t._v(" "+t._s(t._f("inrFormat")(e["pledge_closing_value"],2)))])]),t._v(" "),a("div",{staticClass:"bottom-right"},[a("br"),t._v(" "),a("div",[a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.computeCreatePledgeModal("unpledge",e)}}},[t._v("Unpledge")])])])])])])})),0):a("div",{staticClass:"table-container hide-on-mobile"},[a("table",{staticClass:"holdings-table pledge-table",attrs:{id:"holdings_table"}},[t._m(4),t._v(" "),a("tbody",t._l(t.pledgedHoldings,(function(e,s){return e.pending_pledge_qty&&0!==e.pending_pledge_qty?t._e():a("tr",{key:s,class:{"grey-back":-1!==t.pledgedRows.indexOf(e.instrument_id)}},[a("td",{staticClass:"textleft table-border"},[a("span",{staticClass:"symbol"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e["tradingsymbol"])+"\n\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e["quantity_pledged_for_margin"])+"\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),null==e["pledge_closing_value"]||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey table-border"},[t._v(" – ")]):a("td",{staticClass:"table-border"},[t._v(t._s(t._f("inrFormat")(e["pledge_closing_value"],2)))]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.haircut)+"%\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("td",[a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.computeCreatePledgeModal("unpledge",e)}}},[t._v("Unpledge")])])])})),0)])])]):a("div",[a("empty",{attrs:{main:"",sub:"You don't have any holdings to unpledge"}})],1)])]):"history"===t.activeSection?a("div",[t.job||t.fetchingData||t.holdingsError?t._e():a("div",{class:{section:!0,"table-section":!0,"pledge-table-section":!0}},[a("div",{staticClass:"fetch-data"},[t.fetchingHistory?a("su-loader"):t._e()],1),t._v(" "),t.history_items.length?a("div",[t._m(5),t._v(" "),t.isMobileView?a("div",{staticClass:"table-section show-on-mobile cards pledge-cards pledge-history-cards"},t._l(t.history_items,(function(e,s){return a("div",{key:s},[a("div",{staticClass:"card pledge-card",class:t.holdings_items.length-1===s?"last":""},[a("div",{staticClass:"top"},[a("div",{staticClass:"top-left"},[a("span",{staticClass:"text-bold symbol"},[t._v(t._s(e["tradingsymbol"]))])]),t._v(" "),a("div",{staticClass:"top-right"},[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(new Date(e.pledge_creation).toLocaleDateString("en-us",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}))+"\n\t\t\t\t\t\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"middle"},[a("div",{staticClass:"middle-left"},[a("div",[a("label",[t._v("Qty.")]),t._v(" "+t._s(t._f("qtyFormat")(e["quantity"],3))+"\n\t\t\t\t\t\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"bottom-left"},[a("div",[a("span",{staticClass:"pledge-type"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.pledge_type)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),"UNPLEDGE"===e.pledge_type.toUpperCase()&&e.pledgedToday&&e.status&&"PENDING"===e.status.toUpperCase()?a("span",{staticClass:"cancel-unpledge-link"},[a("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.computeCancelPledgeModal(e,"unpledge")}}},[a("span",{staticClass:"icon icon-trash"})])]):t._e()])]),t._v(" "),a("div",{staticClass:"bottom-right"},[a("div",[a("span",{class:"pledge-status-tag "+e.status.toLowerCase()},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.status)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])])])])])])})),0):a("div",{staticClass:"table-container hide-on-mobile"},[a("table",{staticClass:"holdings-table pledge-table"},[a("thead",[a("tr",[a("th",{staticClass:"table-border",on:{click:function(e){return t.sortTable("tradingsymbol",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("th",{staticClass:"text-right table-border"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tQty.\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("th",{staticClass:"text-left table-border"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tCreated on\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tType\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t\t\t\t")])])]),t._v(" "),a("tbody",t._l(t.history_items,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"textleft table-border"},[a("span",{staticClass:"symbol"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e["tradingsymbol"])+"\n\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("td",{staticClass:"table-border"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity"],3))+"\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v(t._s(new Date(e["pledge_creation"]).toLocaleDateString("en-us",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})))]),t._v(" "),a("td",{staticClass:"text-left"},[a("span",{class:"pledge-type "+e.pledge_type.toLowerCase()},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t._f("capitalize")(e.pledge_type))+"\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),"UNPLEDGE"===e.pledge_type.toUpperCase()&&e.pledgedToday&&e.status&&"PENDING"===e.status.toUpperCase()?a("span",{staticClass:"cancel-unpledge-link"},[a("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.computeCancelPledgeModal(e,"unpledge")}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\tCancel request\n\t\t\t\t\t\t\t\t\t\t\t\t")])]):t._e()]),t._v(" "),a("td",{staticClass:"text-left"},[a("span",{class:"pledge-status-tag "+e.status.toLowerCase()},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.status)+"\n\t\t\t\t\t\t\t\t\t\t\t")])])])})),0)])])]):a("div",[a("empty",{attrs:{main:"",sub:"No pledge requests found"}})],1)])]):t._e(),t._v(" "),t.job?a("div",{class:{section:!0,"text-center":!0}},[a("jobber")],1):t.job||t.fetchingData||!t.holdingsError?t._e():a("div",{staticClass:"section"},[a("error",{attrs:{sub:t.holdingsErrorMsg}})],1),t._v(" "),t.showCreateUnpledge?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask unpledge-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideCreateUnpledgeModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showCreateUnpledgeModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideCreateUnpledgeModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{staticClass:"row v-align"},[a("div",{staticClass:"five columns"},[a("h2",{staticClass:"holdings-breakdown-name"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.pledgeData.tradingsymbol)+"\n\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"seven columns"},[a("div",{staticClass:"row text-small"},[a("div",{staticClass:"six columns"},[a("span",{staticClass:"text-light-grey holdings-modal-label"},[t._v("Qty. pledged")]),t._v(" "),a("span",[t._v(t._s(t._f("qtyFormat")(t.pledgeData.quantity_pledged_for_margin,3)))])]),t._v(" "),a("div",{staticClass:"six columns"},[a("span",{staticClass:"text-light-grey holdings-modal-label"},[t._v("ISIN")]),t._v(" "),a("span",[t._v(t._s(t.pledgeData.isin))])])])])]),t._v(" "),a("hr"),a("br"),t._v(" "),t.fetchingHaircut?a("p",[t._v("\n\t\t\t\t\t\t\t\t\tFetching pledge data "),a("su-loader")],1):a("div",[a("su-form",[a("div",{staticClass:"row"},[a("div",{staticClass:"five columns"},[a("su-input",{attrs:{type:"number",maxlength:8,"static-label":"","no-error":"",label:"Qty. to be unpledged",autofocus:""},model:{value:t.pledgeQty,callback:function(e){t.pledgeQty=e},expression:"pledgeQty"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("label",[t._v(" ")]),a("br"),t._v(" "),a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.unpledging,disabled:t.unpledging},nativeOn:{click:function(e){return e.preventDefault(),t.createPledgeRequest("unpledge",t.pledgeData)}}},[t._v("Submit")])],1)])])],1)])])])])]):t._e(),t._v(" "),t.showCancelPledge?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask cancel-pledge-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideCancelPledgeModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showCancelPledgeModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideCancelPledgeModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{staticClass:"text-center"},[a("p",[t._v("Cancel unpledge request for "+t._s(t.pledgeData.tradingsymbol)+"?")])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"text-center"},[a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.pledging,disabled:t.pledging},nativeOn:{click:function(e){return e.preventDefault(),t.cancelPledgeRequest(t.pledgeData)}}},[t._v("Confirm")]),t._v(" "),a("su-button",{staticClass:"btn-grey btn-outline",nativeOn:{click:function(e){return e.preventDefault(),t.hideCancelPledgeModal()}}},[t._v("Cancel")])],1)])])])])]):t._e()]):a("div",[a("error",{attrs:{main:"",sub:"Pledging is not allowed for your account"}})],1)]):a("div",[a("empty",{attrs:{main:"",sub:""}})],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"qs text-small text-light-grey"},[a("a",{attrs:{href:"https://zerodha.com/approved-securities",target:"_blank"}},[t._v("View")]),t._v(" approved list of securities that can be pledged for margin.\n\t\t\t\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"qs text-small text-light-grey"},[a("a",{attrs:{href:"https://zerodha.com/approved-securities",target:"_blank"}},[t._v("View")]),t._v(" approved list of securities that can be pledged for margin.\n\t\t\t\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"qs text-small text-light-grey"},[a("a",{attrs:{href:"https://zerodha.com/approved-securities",target:"_blank"}},[t._v("Approved list of securities")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"qs text-small text-light-grey"},[a("a",{attrs:{href:"https://zerodha.com/approved-securities",target:"_blank"}},[t._v("Approved list of securities")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"table-border"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("th",{staticClass:"text-right"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tQty. pledged\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("th",{staticClass:"table-border"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tPresent value\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("th",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tHaircut\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("th",[t._v(" ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notice text-box yellow"},[a("ul",[a("li",[t._v("\n\t\t\t\t\t\t\t\t\tCollateral from a successful pledge requests will be credited in 15 minutes and will be shown on the Funds page on Kite. "),a("a",{attrs:{target:"_blank",href:"https://support.zerodha.com/category/console/portfolio/pledging/articles/what-is-pledging"}},[t._v("Read more")]),t._v(".\n\t\t\t\t\t\t\t\t")])])])}],i=a("02bc"),r=a("2e34"),o=a("5dfe"),l=a("3fb9"),c=a("2f62"),d=a("ba6a"),u=a("5665"),_=a("d4ff"),g=a("e2ac");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){m(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var f=[];function v(t,e){return t+"?date="+e}var y={data:function(){return{instrument:null,job:!1,params:{},holdings_items:[],holdings:[],date:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),format:"YYYY-MM-DD",sortKey:"tradingsymbol",sortBy:"asc",segment:"EQ",segmentState:"EQ",disabled:{to:new Date(2017,3,1)},timeout:"",lastClicked:null,noResults:!1,hasBreakdown:{},isWeightageSorted:!1,weightageSortby:"asc",fetchingData:!1,sortingData:!1,holdingsError:!1,holdingsErrorMsg:"Please try again",showCreatePledge:!1,showCreateUnpledge:!1,showCancelPledge:!1,pledgeData:{},pledging:!1,unpledging:!1,pledgeType:"pledge",pledgeError:!1,haircut:[],isMobileFetching:!1,firstPoll:!0,mf_data:[],selectedHolding:{},initFetch:!0,pollCount:{personal:0},fetchingHaircut:!1,showSort:!1,acceptPledgeTerms:!1,pledgedRows:[],selectedHoldings:[],allChecked:!1,fetchingHistory:!1,activeSection:"pledge",history_items:[],unpledgedRows:[],pledgeFormMap:{dp_id:"dpid",request_id:"reqid",version:"version",pledge_details:"pledgedtls"},totalCollateral:"",recomputing:!1,pledgedToday:{},pledgeQty:"",pageReady:!1,pageBanner:[]}},mounted:function(){if(this.pageStatus){var t="all";this.pageStatus.hasOwnProperty(this.$route.name)&&(t=this.$route.name),this.pageStatus.hasOwnProperty(t)?("READY"===this.pageStatus[t].status.toUpperCase()&&(this.pageReady=!0),this.pageStatus[t].message&&this.pageStatus[t].message.length&&(this.pageBanner=this.pageStatus[t].message)):this.pageReady=!0}else this.pageReady=!0;if(this.pageReady){var e=this;window.addEventListener("keyup",(function(t){27===t.keyCode&&(e.hideCreatePledgeModal(),e.hideCreateUnpledgeModal(),e.hideCancelPledgeModal())})),this.getDayPledge()}},computed:h(h(h({},Object(c["c"])(["isMobileView","pnlStatus","csrf","reportEndDate","userDetails","userProfile","segmentList","pageStatus"])),Object(c["c"])(_["a"],["presentHoldings","holdingsType"])),{},{pledgedHoldings:function(){var t=this,e=this.holdings.filter((function(e){var a=t.pledgedToday&&t.pledgedToday.unpledges&&t.pledgedToday.unpledges.find((function(t){return e.isin===t.isin}));if(e.quantity_pledged_for_margin&&e.quantity_pledged_for_margin>0||a)return!0}));return e},isFOEnabled:function(){return!(!this.segmentList||!this.segmentList.nse_fo_status||"ACTIVATED"!==this.segmentList.nse_fo_status.toUpperCase())},dpNotFound:function(){return!(!this.userProfile||this.userProfile.primary_dp_id&&"NULL"!==this.userProfile.primary_dp_id)}}),watch:{pledgedRows:function(t){var e=this;this.selectedHoldings=[];var a=function(a){var s=e.holdings_items.find((function(e){return e.instrument_id===t[a]}));s&&e.selectedHoldings.push(s)};for(var s in t)a(s);this.computeTotalCollateral()}},methods:{getDayPledge:function(t){var e=this;t||(this.fetchingData=!0),d["a"].request("GET",!1,u["a"].getDayPledge,null,(function(a,s){"SUCCESS"===a.toUpperCase()?(e.pledgedToday=s.data.data.result,t&&e.getPledgeHistory(!0)):"FAILURE"===a.toUpperCase()?e.$toast.error({message:"Error fetching pledge data: "+s.data.message,orientation:e.$toast.TOP_RIGHT,duration:4e3}):e.$toast.error({message:"Error fetching pledge data:"+d["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:4e3}),e.getHoldingsJobs()}))},computeTotalCollateral:function(){var t=this,e=0,a=function(a){var s=t.holdings.find((function(e){return e.instrument_id===t.pledgedRows[a]}));e+=parseFloat(s.collateral)};for(var s in this.pledgedRows)a(s);e=parseFloat(e).toFixed(2),this.totalCollateral=e},displayTab:function(t){this.activeSection=t,this.allChecked=!1},selectAllInstruments:function(){if(this.pledgedRows=[],this.allChecked)for(var t=this.holdings_items.filter((function(t){return t.quantity_available&&t.haircut&&(!t.pending_pledge_qty||0===t.pending_pledge_qty)})),e=Math.min(t.length,50),a=0;a<e;a++)this.pledgedRows.push(t[a].instrument_id)},recomputeCollateral:function(t){var e=this,a=this.holdings_items.findIndex((function(e){return e.instrument_id===t.instrument_id}));-1!==a&&(this.recomputing=!0,this.$nextTick((function(){e.holdings_items[a]["collateral"]=parseFloat((e.holdings_items[a].close_price-e.holdings_items[a].close_price*e.holdings_items[a].haircut/100)*e.holdings_items[a].pledgeQty).toFixed(2),e.recomputing=!1,e.computeTotalCollateral()})))},formatDate:function(t,e){var a=t,s=""+(a.getMonth()+1),n=""+a.getDate(),i=a.getFullYear();return s.length<2&&(s="0"+s),n.length<2&&(n="0"+n),[i,s,n].join(e||"-")},showSortModal:function(){this.showSort=!0},hideSortModal:function(){this.showSort=!1},getHoldingsJobs:function(){this.getHoldingsData()},isSorted:function(t){return t===this.sortKey?" sorted":""},getsortBy:function(t){return t===this.sortKey?"arrow-show arrow "+this.sortBy:"asc"},sortMobileTable:function(){this.params.page=1,this.sortingData=!0,this.getHoldingsData(!0),this.hideSortModal()},sortTable:function(t,e){if(f=[],t===this.sortKey)if("asc"===this.sortBy){this.sortBy="desc";for(var a=document.getElementById("holdings_table").querySelectorAll("thead th span.arrow"),s=0;s<a.length;s++)a[s].className="arrow asc";e.target.querySelector("span.arrow")?e.target.querySelector("span.arrow").className="arrow desc":-1===e.target.className.indexOf("icon")&&(e.target.className="arrow desc")}else{this.sortBy="asc";for(var n=document.getElementById("holdings_table").querySelectorAll("thead th span.arrow"),i=0;i<n.length;i++)n[i].className="arrow asc";e.target.querySelector("span.arrow")?e.target.querySelector("span.arrow").className="arrow asc":-1===e.target.className.indexOf("icon")&&(e.target.className="arrow asc")}else{this.sortKey=t,this.sortBy="asc";for(var r=document.getElementById("holdings_table").querySelectorAll("thead th span.arrow"),o=0;o<r.length;o++)r[o].className="arrow asc";e.target.querySelector("span.arrow")?e.target.querySelector("span.arrow").className="arrow asc":-1===e.target.className.indexOf("icon")&&(e.target.className="arrow asc"),this.params.page=1}this.sortingData=!0,this.getHoldingsData(!0)},compare:function(t,e){return"tradingsymbol"===this.sortKey?t[this.sortKey]<e[this.sortKey]?"desc"===this.sortBy?1:-1:t[this.sortKey]>e[this.sortKey]?"desc"===this.sortBy?-1:1:0:null===t[this.sortKey]?1:null===e[this.sortKey]?-1:parseFloat(t[this.sortKey])<parseFloat(e[this.sortKey])?"desc"===this.sortBy?1:-1:parseFloat(t[this.sortKey])>parseFloat(e[this.sortKey])?"desc"===this.sortBy?-1:1:0},sortWeightage:function(){this.sortKey="",this.sortBy="","desc"===this.weightageSortby||!1===this.isWeightageSorted?this.weightageSortby="asc":this.weightageSortby="desc",this.isWeightageSorted=!0;var t=this.holdings_items;t.sort(this.compare)},pollData:function(t){var e=this;this.pollCount[t]++,this.firstPoll?setTimeout((function(){return e.getHoldingsData()}),500):setTimeout((function(){return e.getHoldingsData()}),1e3),this.firstPoll=!1},getHoldingsData:function(t,e){var a=this;if(this.holdingsError=!1,this.noResults=!1,t||e||(this.fetchingData=!0),e&&(this.sortingData=!0),t)return f=this.holdings_items,f.sort(this.compare),void this.$nextTick((function(){a.sortingData=!1}));f=[],this.date=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),this.params={date:this.date};var s=v(u["a"].getHoldings,this.formatDate(this.date));d["a"].request("GET",!0,s,null,(function(s,n){if(a.holdings_items=[],a.holdings=[],a.hasBreakdown={},"PENDING"===s.toUpperCase())a.pollCount["personal"]<10?(a.job=!0,a.pollData("personal")):(a.job=!1,a.fetchingData=!1,a.sortingData=!1,a.$toast.error({message:"Error fetching holdings: Request timed out",orientation:a.$toast.TOP_RIGHT,duration:6e3}),a.pollCount["personal"]=0);else if("SUCCESS"===s.toUpperCase()){a.pollCount["personal"]=0,a.firstPoll=!0;var i=n.data.data.result;for(var r in a.hasBreakdown=i.has_breakdown,delete i.has_breakdown,i)for(var o=i[r],l=function(t){var e=o[t],s=parseFloat(e["quantity_available"])+parseFloat(e["quantity_pledged_for_loan"])+parseFloat(e["quantity_pledged_for_margin"]);if(e["quantity_short_term"]=s-(e["quantity_long_term"]||0),isNaN(s)?e["qty_total"]=0:(parseFloat(s)%1!==0&&(s=parseFloat(s).toFixed(3)),e["qty_total"]=s),e.ltp&&a.hasBreakdown?(e["close_price"]=e.ltp,e["closing_value"]=parseFloat(parseFloat(parseFloat(e.ltp)*parseFloat(e.quantity_available)).toFixed(2)),e["unrealized_profit"]=e.closing_value-e.holdings_buy_value,e["unrealized_profit_percentage"]=0!==e.holdings_buy_value?100*(e.closing_value-e.holdings_buy_value)/e.holdings_buy_value:null,e["pledge_closing_value"]=parseFloat(parseFloat(parseFloat(e.ltp)*parseFloat(e.quantity_pledged_for_margin)).toFixed(2))):(e["closing_value"]=parseFloat(parseFloat(parseFloat(e.close_price)*parseFloat(e.quantity_available)).toFixed(2)),e["pledge_closing_value"]=parseFloat(parseFloat(parseFloat(e.close_price)*parseFloat(e.quantity_pledged_for_margin)).toFixed(2))),e["row"]=t,e.quantity_available&&Math.floor(e.quantity_available)>0){var n=0;if(a.pledgedToday&&a.pledgedToday.pledges){var i=a.pledgedToday.pledges.find((function(t){return t.isin===e.isin}));i&&(n=i.quantity)}e.quantity_available=Math.floor(e.quantity_available-n),a.holdings_items.push(e)}a.holdings.push(e)},c=0;c<o.length;c++)l(c);if(t||e||a.getPledgeHaircut(),e&&a.getPledgeHistory(!0),0===a.holdings.length?a.noResults=!0:a.noResults=!1,document.getElementById("holdings_table"))for(var u=document.getElementById("holdings_table").querySelectorAll("tbody tr"),_=0;_<u.length;_++)u[_].className="";a.sortingData=!1}else"FAILURE"===s.toUpperCase()?(a.pollCount["personal"]=0,a.job=!1,a.fetchingData=!1,a.sortingData=!1,a.firstPoll=!0,a.holdingsError=!0,a.$toast.error({message:"Error fetching holdings: "+n.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3})):"UNDEFINED"===s.toUpperCase()&&(a.pollCount["personal"]=0,a.job=!1,a.fetchingData=!1,a.sortingData=!1,a.$toast.error({message:"Error fetching holdings:"+d["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3}));a.hideCreatePledgeModal(),a.hideCreateUnpledgeModal()}))},computeCreatePledgeModal:function(t,e){if("unpledge"===t){if(this.pledgeData=e,e["pending_pledge_qty"]>0)return void this.$toast.warning({message:"There is a pending pledge/unpledge request for this scrip.",orientation:this.$toast.TOP_RIGHT,duration:6e3});var a=this.haircut.find((function(t){return t.isin===e.isin}));a&&(e.haircut=a.haircut_value),this.showCreateUnpledgeModal()}},showCreatePledgeModal:function(){if(this.selectedHoldings.length>50)this.$toast.warning({message:"You can pledge up to 50 holdings at a time. To pledge more, select additional holdings after the first request succeeds.",orientation:this.$toast.TOP_RIGHT,duration:6e3});else{this.pledging=!0,this.requestID="";var t=this,e="/portfolio/holdings/pledge/details",a=1e3,s=700,n=screen.width?(screen.width-a)/2:100,i=screen.height?(screen.height-s)/2:100,r="width="+a+",height="+s+",top="+i+",left="+n+",scrollbars=yes,location=no,directories=no,status=no,menubar=no,toolbar=no,resizable=no",o=window.open(e,"pledge_".concat(Date.now()),r);o&&o.localStorage.setItem("selectedHoldings",JSON.stringify(t.selectedHoldings)),!o||o.closed||"undefined"===typeof o.closed?(this.$toast.warning({message:"Please enable browser pop-ups and try again.",orientation:this.$toast.TOP_RIGHT,duration:6e3}),this.pledging=!1):setTimeout((function(){function e(){o&&!o.closed&&o.focus()}document.onclick=e,document.onkeyup=e,document.onmousemove=e;var a=window.setInterval((function(){!1!==o.closed&&(window.clearInterval(a),console.log("closed"),t.getPledgeHistory(!0))}),200)}))}},showCreateUnpledgeModal:function(){this.showCreateUnpledge=!0},hideCreatePledgeModal:function(){this.acceptPledgeTerms=!1,this.showCreatePledge=!1,this.selectedHoldings=[]},hideCreateUnpledgeModal:function(){this.showCreateUnpledge=!1,this.selectedHoldings=[],this.pledgeData={},this.pledgeQty=""},computeCancelPledgeModal:function(t){this.pledgeData=t,this.showCancelPledgeModal()},showCancelPledgeModal:function(){this.showCancelPledge=!0},hideCancelPledgeModal:function(){this.showCancelPledge=!1},createPledgeRequest:function(t,e){var a=this;if(parseFloat(this.pledgeQty)%1===0){if("pledge"===t)this.pledging=!0,d["a"].request("POST",!1,u["a"].instantPledge,this.pledgeData,(function(t,e){if("SUCCESS"===t.toUpperCase()){var s=e.data.data.result;if(s){var n=a,i="about:blank",r=1e3,o=700,l=screen.width?(screen.width-r)/2:100,c=screen.height?(screen.height-o)/2:100,u="width="+r+",height="+o+",top="+c+",left="+l+",scrollbars=yes,location=no,directories=no,status=no,menubar=no,toolbar=no,resizable=no",_=window.open(i,"pledge",u);!_||_.closed||"undefined"===typeof _.closed?(a.$toast.warning({message:"Please enable browser pop-ups and try again.",orientation:a.$toast.TOP_RIGHT,duration:6e3}),a.pledging=!1):setTimeout((function(){try{var t=_.document.createElement("form");for(var e in t.method="post",t.action=s.request_url,t.id="frmpledge",t.name="frmpledge",s)if(n.pledgeFormMap.hasOwnProperty(e)){var i=_.document.createElement("input");i.type="hidden",i.name=n.pledgeFormMap[e],i.value=s[e],t.appendChild(i)}_.document.body.appendChild(t),_.focus();var r=_.document.getElementsByTagName("body")[0].querySelector("#frmpledge");r.submit()}catch(c){console.log(c),a.$toast.warning({message:"Please enable browser pop-ups and try again.",orientation:a.$toast.TOP_RIGHT,duration:6e3}),a.pledging=!1}function o(){_&&!_.closed&&_.focus()}document.onclick=o,document.onkeyup=o,document.onmousemove=o;var l=window.setInterval((function(){!1!==_.closed&&(window.clearInterval(l),console.log("closed"),n.getPledgeHistory(!0))}),200)}))}else a.pledging=!1}else"FAILURE"===t.toUpperCase()?(a.pledging=!1,a.hideCreatePledgeModal(),a.hideCreateUnpledgeModal(),a.$toast.error({message:"Error placing pledge request: "+e.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3})):(a.pledging=!1,a.hideCreatePledgeModal(),a.hideCreateUnpledgeModal(),a.$toast.error({message:"Error placing pledge request:"+d["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3}))}));else if("unpledge"===t)if(this.pledgeQty&&parseFloat(this.pledgeQty)>0&&parseFloat(this.pledgeQty)<=e["quantity_pledged_for_margin"]){var s={quantity:parseFloat(this.pledgeQty),trading_symbol:e["tradingsymbol"],isin:e["isin"],pledge_type:t.charAt(0).toUpperCase()+t.slice(1),close_price:parseFloat(e["close_price"]),previous_quantity:parseFloat(e["quantity_available"])};d["a"].request("POST",!1,u["a"].placePledgeRequest,s,(function(t,s){a.unpledging=!1,"SUCCESS"===t.toUpperCase()?(a.getDayPledge(!0),a.$toast.success({message:"Unpledge request for "+e["tradingsymbol"]+" successful",orientation:a.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===t.toUpperCase()?(a.hideCreatePledgeModal(),a.hideCreateUnpledgeModal(),a.$toast.error({message:"Error placing pledge request: "+s.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3})):(a.hideCreatePledgeModal(),a.hideCreateUnpledgeModal(),a.$toast.error({message:"Error placing pledge request:"+d["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3}))}))}else this.$toast.error({message:"Enter valid quantity to unpledge",orientation:this.$toast.TOP_RIGHT,duration:3e3})}else this.$toast.error({message:"Quantity to be pledged must not be fractional.",orientation:this.$toast.TOP_RIGHT,duration:4e3})},cancelPledgeRequest:function(t,e){var a=this;this.pledging=!0;var s={pledge_id:t["pledge_id"]};d["a"].request("POST",!1,u["a"].cancelPledgeRequest,s,(function(t,e){a.pledging=!1,"SUCCESS"===t.toUpperCase()?(a.getPledgeHistory(!0),a.hideCancelPledgeModal(),a.$toast.success({message:"Unpledge request cancelled successfully",orientation:a.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===t.toUpperCase()?(a.pledging=!1,a.hideCancelPledgeModal(),a.$toast.error({message:"Error cancelling unpledge request: "+e.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3})):(a.pledging=!1,a.hideCancelPledgeModal(),a.$toast.error({message:"Error cancelling unpledge request:"+d["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3}))}))},getPledgeHaircut:function(){var t=this;this.pledgeError=!1,this.fetchingHaircut=!0,d["a"].request("GET",!1,u["a"].getPledgeHaircut,null,(function(e,a){if(t.fetchingHaircut=!1,"SUCCESS"===e.toUpperCase()){t.haircut=a.data.data.result;var s=function(e){var a=t.haircut.find((function(a){return a.instrument_id===t.holdings[e]["instrument_id"]}));a?(t.holdings[e].isin||(t.holdings[e]["isin"]=a.isin),t.holdings[e]["haircut"]=a.haircut_value):(a=t.haircut.find((function(a){return a.isin===t.holdings[e]["isin"]})),t.holdings[e]["haircut"]=a?a.haircut_value:0),t.holdings[e]["pledgeQty"]=t.holdings[e]["quantity_available"],t.holdings[e]["collateral"]=((t.holdings[e].close_price-t.holdings[e].close_price*t.holdings[e].haircut/100)*t.holdings[e].pledgeQty||t.holdings[e].close_price-t.holdings[e].close_price*t.holdings[e].haircut/100).toFixed(2)};for(var n in t.holdings)s(n);var i=function(e){var a=t.haircut.find((function(a){return a.instrument_id===t.holdings_items[e]["instrument_id"]}));a?(t.holdings_items[e].isin||(t.holdings_items[e]["isin"]=a.isin),t.holdings_items[e]["haircut"]=a.haircut_value):(a=t.haircut.find((function(a){return a.isin===t.holdings[e]["isin"]})),t.holdings[e]["haircut"]=a?a.haircut_value:0),t.holdings_items[e]["pledgeQty"]=t.holdings_items[e]["quantity_available"],t.holdings_items[e]["collateral"]=((t.holdings_items[e].close_price-t.holdings_items[e].close_price*t.holdings_items[e].haircut/100)*t.holdings_items[e].pledgeQty||t.holdings_items[e].close_price-t.holdings_items[e].close_price*t.holdings_items[e].haircut/100).toFixed(2)};for(var r in t.holdings_items)i(r);t.getPledgeHistory()}else"FAILURE"===e.toUpperCase()?(t.pledgeError=!0,t.job=!1,t.fetchingData=!1,t.$toast.error({message:"Error fetching pledge haircut: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.pledgeError=!0,t.job=!1,t.fetchingData=!1,t.$toast.error({message:"Error fetching pledge haircut:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))},getPledgeHistory:function(t){var e=this;this.fetchingHistory=!0,this.pledgeError=!1,d["a"].request("GET",!1,u["a"].getInstantPledgeHistory,null,(function(a,s){if(e.fetchingHistory=!1,t&&(e.pledging=!1),"SUCCESS"===a.toUpperCase()){var n=s.data.data.result;n&&n.length&&n.sort((function(t,e){return new Date(e.pledge_creation)-new Date(t.pledge_creation)})),e.history_items=[];var i=function(t){var a=n[t],s=e.pledgedToday&&e.pledgedToday.unpledges&&e.pledgedToday.unpledges.find((function(t){return t.isin===a.isin}));a["pledgedToday"]=!!s,e.history_items.push(a)};for(var r in n)i(r);if(e.job=!1,e.fetchingData=!1,e.sortingData=!1,e.$route.query&&e.$route.query.isin){var o=e.holdings_items.find((function(t){return t.isin===e.$route.query.isin}));o&&o.instrument_id&&o.quantity_available&&o.haircut&&(!o.pending_pledge_qty||0===o.pending_pledge_qty)&&e.pledgedRows.push(o.instrument_id)}t&&(e.activeSection="history",e.pledgeData={},e.pledgedRows=[],e.allChecked=!1,e.getHoldingsJobs())}else"FAILURE"===a.toUpperCase()?(e.pledgeError=!0,e.job=!1,e.fetchingData=!1,e.$toast.error({message:"Error fetching pledge history: "+s.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.job=!1,e.fetchingData=!1,e.sortingData=!1,e.pledging=!1,e.pledgeError=!0,e.$toast.error({message:"Error fetching pledge history:"+d["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}));e.hideCreateUnpledgeModal()}))},getUnique:function(t,e){return t.filter((function(a,s){return t.findIndex((function(t){return e?e(t)===e(a):t===a}))===s}))}},components:{jobber:r["a"],"su-button":o["a"],empty:i["a"],error:l["default"],"mobile-context-menu":g["a"]}},b=y,C=a("2877"),w=Object(C["a"])(b,s,n,!1,null,null,null);e["default"]=w.exports},e2ac:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"dropdown"}},[t.isMenu?a("div",{staticClass:"mobile-context-menu",attrs:{id:"mobile-context-menu-"+t._uid},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.close.apply(null,arguments)}}},[a("ul",{staticClass:"mobile-context-menu-list list-flat"},[t._t("menu")],2)]):a("div",{staticClass:"mobile-context-menu",attrs:{id:"mobile-context-menu-"+t._uid},on:{click:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.close.apply(null,arguments))}}},[a("ul",{staticClass:"mobile-context-menu-list list-flat"},[t._t("menu")],2)])])},n=[],i={name:"context-menu",props:{isMenu:!0},data:function(){return{}},deactivated:function(){},methods:{close:function(){this.$emit("close")}}},r=i,o=a("2877"),l=Object(o["a"])(r,s,n,!1,null,null,null);e["a"]=l.exports},e9dd:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container holdings"},[a("div",{staticClass:"section"},[t.job?a("jobber",{attrs:{main:"Fetching holdings with discrepancies",sub:"",loader:!0}}):t._e(),t._v(" "),t.discrepant_items.length>0&&!t.job?a("div",{staticClass:"row",attrs:{id:"disc_basic"}},[a("div",{staticClass:"four columns"},[a("h1",[t._v("Holdings discrepancies")]),t._v(" "),a("p",{staticClass:"text-small text-light-grey"},[t._v("These are the holdings for which we have not received a buy price. These may have come from transfers, corporate actions, IPOs etc.\n\t\t\t\t\tFor us to compute the P&L properly for these entries, you need to manually add trades with the right values.")]),t._v(" "),a("hr",{staticClass:"no-bottom"}),t._v(" "),a("span",{staticClass:"open-side-nav show-inline-on-mobile",on:{click:function(e){return t.openSideNav()}}},[t._v("☰ View all scrips")]),t._v(" "),a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeSideNav,expression:"closeSideNav"}],attrs:{id:"mobile-side-nav"}},[a("a",{staticClass:"close-side-nav show-on-mobile",attrs:{href:"javascript:void(0)"},on:{click:t.closeSideNav}},[t._v("×")]),t._v(" "),a("div",{staticClass:"segment-tabs"},[a("span",{class:["EQ"===t.activeSegment?"active":"","tab","EQ"],on:{click:function(e){t.activeSegment="EQ"}}},[t._v("\n\t\t\t\t\t\tEquity")]),a("span",{class:["MF"===t.activeSegment?"active":"","tab","MF"],on:{click:function(e){t.activeSegment="MF"}}},[t._v("\n\t\t\t\t\t\tMutual funds")])]),t._v(" "),a("div",{staticClass:"disc-list-container"},["EQ"===t.activeSegment?a("div",[t._l(t.eq_discrepant_items,(function(e,s){return a("div",{key:s,class:[e["instrument_id"]===t.discSelected["instrument_id"]?"activeInstrument":"","disc-list"],on:{click:function(a){return t.getExternalTrades(e)}}},[a("span",{staticClass:"instrument-name"},[t._v(t._s(e["tradingsymbol"]))]),t._v(" "),e["quantity_discrepant"]>0?a("span",{staticClass:"status-flag"},[t._v(t._s(e["quantity_discrepant"])+" Qty.")]):t._e()])})),t._v(" "),0===t.eq_discrepant_items.length?a("p",{staticClass:"text-grey text-small no-discrepancies-info"},[a("span",{staticClass:"icon icon-info"}),t._v(" No discrepancies for this segment\n\t\t\t\t\t\t\t")]):t._e()],2):"MF"===t.activeSegment?a("div",[t._l(t.mf_discrepant_items,(function(e,s){return a("div",{key:s,class:[e["instrument_id"]===t.discSelected["instrument_id"]?"activeInstrument":"","disc-list"],on:{click:function(a){return t.getExternalTrades(e)}}},[a("span",{staticClass:"instrument-name"},[t._v(t._s(e["tradingsymbol"]))]),t._v(" "),e["quantity_discrepant"]>0?a("span",{staticClass:"status-flag"},[t._v(t._s(e["quantity_discrepant"])+" Qty.")]):t._e()])})),t._v(" "),0===t.mf_discrepant_items.length?a("p",{staticClass:"text-grey text-small no-discrepancies-info"},[a("span",{staticClass:"icon icon-info"}),t._v(" No discrepancies for this segment\n\t\t\t\t\t\t\t")]):t._e()],2):t._e()])])]),t._v(" "),a("div",{staticClass:"eight columns disc-info"},[Object.keys(t.discSelected).length>0?a("div",[a("h1",[t._v(t._s(t.discSelected["tradingsymbol"]))]),t._v(" "),a("hr"),a("br"),a("br"),t._v(" "),a("div",{staticClass:"row"},[t.discSelected["isin"]?a("div",{staticClass:"six columns"},[a("label",[t._v("ISIN")]),t._v(" "),a("h2",[t._v(t._s(t.discSelected["isin"]))])]):t._e(),t._v(" "),a("div",{staticClass:"six columns"},[a("label",[t._v("Discrepancy (Qty.)")]),t._v(" "),a("h2",[t._v(t._s(t._f("round")(t.discSelected["quantity_discrepant"],4)))])])]),a("br"),t._v(" "),a("h2",{staticClass:"add-trade-container"},[t._v("\n\t\t\t\t\t\tTrades\n\t\t\t\t\t\t"),t.fetchingExternal?a("su-loader"):t._e(),t._v(" "),a("su-button",{staticClass:"add-external-trade btn btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.computeAdd()}}},[t._v("+ Add trade")])],1),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:" table-container"},[t.isPending?a("p",{staticClass:"text-small text-light-grey"},[t._v("The pending trades will be computed and added to your P&L within 48 hours.")]):t._e(),t._v(" "),t.externalTrades.length>0&&!t.fetchingExternal?a("table",{staticClass:"external-trades",attrs:{id:"external_trades"}},[t._m(0),t._v(" "),a("tbody",t._l(t.externalTrades,(function(e,s){return a("tr",{key:s,on:{mouseleave:function(e){t.showDrop=!1},mouseenter:function(e){t.showDrop=!0}}},[a("td",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e["trade_date"])+"\n\t\t\t\t\t\t\t\t\t\t"),e["pending_recalc"]?a("span",{staticClass:"pending-flag"},[t._v("Pending")]):t._e(),t._v(" "),t.showDrop?a("context-menu",{staticClass:"table"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"context-menu-button",attrs:{slot:"button",title:"Options"},slot:"button"},[a("span",{staticClass:"icon icon-ellipsis"})]),t._v(" "),a("template",{slot:"menu"},[a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.showEditDiscrepant(e)}}},[t._v("Edit trade")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.deleteDiscrepant(e)}}},[t._v("Delete trade")])])])],2):t._e()],1),t._v(" "),"ipo"==e["external_trade_type"]?a("td",{staticClass:"text-left"},[t._v(t._s(t._f("uppercase")(e["external_trade_type"])))]):a("td",{staticClass:"text-left"},[t._v(t._s(t._f("capitalize")(e["external_trade_type"])))]),t._v(" "),a("td",[t._v(t._s(t._f("inrFormat")(e["price"],4)))]),t._v(" "),a("td",[t._v(t._s(t._f("qtyFormat")(e["quantity"],4)))])])})),0)]):t._e()]),t._v(" "),0!==t.externalTrades.length||t.fetchingExternal?t._e():a("p",[t._v("\n\t\t\t\t\t\tTo fix the discrepancy, you should add manual trades here with matching quantities. Trades added can not be edited/deleted once the price is updated. "),a("a",{attrs:{href:"https://support.zerodha.com/category/q-backoffice/portfolio/articles/why-is-the-buy-average-for-some-shares-shown-as-n-a",target:"_blank"}},[t._v("Read more")]),t._v(".\n\t\t\t\t\t")])]):a("empty",{attrs:{main:"No discrepancies for this segment",sub:""}})],1)]):t._e(),t._v(" "),0!==t.discrepant_items.length||t.job?t._e():a("div",{staticClass:"text-center"},[a("empty",{attrs:{main:"Nothing to show here",sub:""}})],1)],1),t._v(" "),t.showAddModal?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask add-disc-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideAdd.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showAdd.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideAdd.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("h2",[t._v(t._s(t.discSelected["tradingsymbol"])+" — Add a trade")]),t._v(" "),a("su-form",[a("div",{staticClass:"row input-container"},[a("div",{staticClass:"three columns su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Purchase date")]),t._v(" "),a("datepicker",{attrs:{format:t.format,lang:"en","not-before":"1975-01-01","not-after":t.reportEndDate,placeholder:"YYYY-MM-DD"},model:{value:t.addExternalDate,callback:function(e){t.addExternalDate=e},expression:"addExternalDate"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number",maxlength:8,"static-label":"","no-error":"",label:"Avg. price"},model:{value:t.addExternalPrice,callback:function(e){t.addExternalPrice=e},expression:"addExternalPrice"}}),t._v(" "),a("p",{staticClass:"text-small text-grey external-trade-value"},[t._v("\n\t\t\t\t\t\t\t\t\t\tBuy value: "),t.addExternalPrice&&t.addExternalQty?a("span",[t._v(t._s(t._f("inrFormat")(parseFloat(t.addExternalPrice*t.addExternalQty),2)))]):a("span",[t._v("0")])])],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number",maxlength:8,"static-label":"","no-error":"",label:"Qty."},model:{value:t.addExternalQty,callback:function(e){t.addExternalQty=e},expression:"addExternalQty"}})],1),t._v(" "),a("div",{staticClass:"three columns su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.addExternalType,expression:"addExternalType"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.addExternalType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select type")]),t._v(" "),a("option",{attrs:{value:"ipo"}},[t._v("IPO")]),t._v(" "),a("option",{attrs:{value:"discrepant"}},[t._v("Others")])])])]),a("br"),t._v(" "),a("div",{staticClass:"text-right"},[a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.addingExternal,disabled:t.addingExternal},nativeOn:{click:function(e){return e.preventDefault(),t.addDiscrepant.apply(null,arguments)}}},[t._v("Add")])],1)])],1)])])])]):t._e(),t._v(" "),t.showEditModal?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask add-disc-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideEdit.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showEdit.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideEdit.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("h2",[t._v(t._s(t.discSelected["tradingsymbol"])+" — Edit trade")]),t._v(" "),a("su-form",[a("div",{staticClass:"row input-container"},[a("div",{staticClass:"three columns"},[a("su-input",{attrs:{"static-label":"","not-before":"1975-01-01","not-after":t.reportEndDate,"no-error":"",label:"Purchase date",disabled:!0},model:{value:t.editExternalDate,callback:function(e){t.editExternalDate=e},expression:"editExternalDate"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number","static-label":"","no-error":"",label:"Avg. price"},model:{value:t.editExternalPrice,callback:function(e){t.editExternalPrice=e},expression:"editExternalPrice"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number","static-label":"","no-error":"",label:"Qty",disabled:!0},model:{value:t.editExternalQty,callback:function(e){t.editExternalQty=e},expression:"editExternalQty"}})],1),t._v(" "),a("div",{staticClass:"three columns su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.editExternalType,expression:"editExternalType"}],attrs:{disabled:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.editExternalType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"ipo"}},[t._v("IPO")]),t._v(" "),a("option",{attrs:{value:"discrepant"}},[t._v("Others")])])])]),a("br"),t._v(" "),a("div",{staticClass:"text-right"},[a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.editingExternal,disabled:t.editingExternal},nativeOn:{click:function(e){return e.preventDefault(),t.editDiscrepant.apply(null,arguments)}}},[t._v("Update")])],1)])],1)])])])]):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",{staticClass:"text-left"},[t._v("Purchase date")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Type")]),t._v(" "),a("td",[t._v("Avg. price")]),t._v(" "),a("td",[t._v("Qty.")])])])}],i=a("a34a"),r=a.n(i),o=a("8508"),l=a.n(o),c=a("6825"),d=a("2e34"),u=a("02bc"),_=a("ba6a"),g=a("5665"),p=a("2f62");function h(t,e,a,s,n,i,r){try{var o=t[i](r),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(s,n)}function m(t){return function(){var e=this,a=arguments;return new Promise((function(s,n){var i=t.apply(e,a);function r(t){h(i,s,n,r,o,"next",t)}function o(t){h(i,s,n,r,o,"throw",t)}r(void 0)}))}}function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach((function(e){y(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function y(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function b(t,e,a){return g["a"].getDiscrepants+"?date="+t+"&segment="+e}function C(t,e){return t?g["a"].getExternalTrades+"?instrument_id="+t+"&segment="+e:g["a"].getExternalTrades}function w(t){var e=new Date(t),a=""+(e.getMonth()+1),s=""+e.getDate(),n=e.getFullYear();return a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),[n,a,s].join("-")}var k={data:function(){return{instrument:null,showModal:!1,job:!1,params:{},holdings_items:[],holdings_aggregation:{},tradingsymbol:"",date:null,segment:"EQ",format:"YYYY-MM-DD",sortKey:"tradingsymbol",sortBy:"asc",disabled:{to:new Date(2017,3,1)},timeout:"",lastClicked:null,externalTrades:[],discSelected:{},tradesExist:!1,showAddModal:!1,addExternalDate:"",addExternalPrice:"",addExternalQty:"",addExternalType:"",addingExternal:!1,fetchingExternal:!1,showEditModal:!1,editExternalDate:"",editExternalPrice:"",editExternalQty:"",editExternalType:"",editExternalId:"",editingExternal:!1,oldExternalQty:"",showDrop:!0,isPending:!1,activeSegment:"EQ"}},mounted:function(){var t=this;window.addEventListener("keyup",(function(e){27===e.keyCode&&(t.hideAdd(),t.hideEdit())})),this.$route.params&&this.$route.params.segment&&(this.activeSegment=this.$route.params.segment.toUpperCase()),this.initFetch()},watch:{activeSegment:function(t){if(t){if(t!==this.$route.params.segment){var e={segment:t};this.discSelected&&this.discSelected.instrument_id&&(e.instrument_id=this.discSelected.instrument_id),this.$router.replace({name:"discrepancies",params:e})}this.discSelected=this.discrepant_items.find((function(e){return e.segment===t}))?this.discrepant_items.find((function(e){return e.segment===t})):{},this.discSelected.segment&&this.discSelected.segment===t&&this.getExternalTrades()}}},computed:v(v({},Object(p["c"])(["reportEndDate"])),{},{discrepant_items:function(){return this.holdings_items.filter((function(t){return t.quantity_discrepant>0}))},eq_discrepant_items:function(){return this.discrepant_items.filter((function(t){return"EQ"===t.segment}))},mf_discrepant_items:function(){return this.discrepant_items.filter((function(t){return"MF"===t.segment}))},filteredData:function(){var t=this.sortKey,e=this.sortOrders[t]||1,a=this.holdings;return t&&(a=a.slice().sort((function(a,s){return a=a[t],s=s[t],(a===s?0:a>s?1:-1)*e}))),a}}),methods:{initFetch:function(){var t=this;return m(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.job=!0,e.prev=1,e.next=4,Promise.all([t.getEQHoldingsData(),t.getMFHoldingsData()]);case 4:t.discrepant_items.length>0&&(t.$route.params&&t.$route.params.instrument_id&&t.discrepant_items.find((function(e){return e.instrument_id===t.$route.params.instrument_id}))?t.discSelected=t.discrepant_items.find((function(e){return e.instrument_id===t.$route.params.instrument_id})):t.$route.query&&t.$route.query.isin?t.discSelected=t.discrepant_items.find((function(e){return e.isin===t.$route.query.isin})):t.discSelected=t.discrepant_items.find((function(e){return e.segment===t.activeSegment}))?t.discrepant_items.find((function(e){return e.segment===t.activeSegment})):{},t.discSelected.segment&&t.discSelected.segment===t.activeSegment&&t.getExternalTrades()),t.job=!1,t.$webviewReady(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.error("One or both API calls failed:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},openSideNav:function(){document.getElementById("mobile-side-nav")&&(document.getElementById("mobile-side-nav").className.indexOf("hidden")>-1&&document.getElementById("mobile-side-nav").classList.remove("hidden"),document.getElementById("mobile-side-nav").classList.add("show"))},closeSideNav:function(t,e){if(t&&t.target.className&&(-1===t.target.className.indexOf("open-side-nav")||t.target.className.indexOf("disc-list")>-1)){if(document.getElementById("mobile-side-nav")&&window.innerWidth<=800){-1!==document.getElementById("mobile-side-nav").className.indexOf("show")&&document.getElementById("mobile-side-nav").classList.remove("show"),document.getElementById("mobile-side-nav").classList.add("hidden");var a=this.$el.querySelector("#disc_basic");a.scrollTop=a.scrollHeight}}else 1===e&&document.getElementById("mobile-side-nav")&&-1!==document.getElementById("mobile-side-nav").className.indexOf("show")&&document.getElementById("mobile-side-nav").classList.remove("show")},addDiscrepant:function(){var t=this;if(this.addExternalDate&&this.addExternalPrice&&this.addExternalQty&&this.addExternalType){for(var e=0,a=0;a<this.externalTrades.length;a++){if(w(this.addExternalDate)===this.externalTrades[a]["trade_date"]&&this.addExternalType===this.externalTrades[a]["external_trade_type"])return void this.$toast.warning({message:"Adding external trade of same type is not allowed",orientation:this.$toast.TOP_RIGHT,duration:6e3});this.externalTrades[a]["pending_recalc"]&&(e+=parseFloat(this.externalTrades[a]["quantity"]))}var s=new Date(this.addExternalDate),n=new Date;if(s>n)return void this.$toast.warning({message:"Adding external trade for future dates is not allowed",orientation:this.$toast.TOP_RIGHT,duration:6e3});if(null===this.discSelected["isin"]||0===this.discSelected["isin"].length||null===this.discSelected["instrument_id"]||0===this.discSelected["instrument_id"].length)return void this.$toast.warning({message:"Required information to perform this action is not available",orientation:this.$toast.TOP_RIGHT,duration:6e3});var i=parseFloat(parseFloat(parseFloat(this.discSelected["quantity_discrepant"])-parseFloat(e)).toFixed(4));if(this.addExternalQty<=i){this.addingExternal=!0;var r={instrument_id:this.discSelected["instrument_id"],trade_date:w(this.addExternalDate),segment:this.discSelected.segment,price:parseFloat(this.addExternalPrice),quantity:parseFloat(this.addExternalQty),external_trade_type:this.addExternalType},o=[];o.push(r);var l=C();_["a"].request("POST",!1,l,o,(function(e,a){t.addingExternal=!1,t.hideAdd(),"SUCCESS"===e.toUpperCase()?(t.$toast.success({message:"Trade added",orientation:t.$toast.TOP_RIGHT,duration:6e3}),t.getExternalTrades()):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error adding trade: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error adding trade:"+_["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}else this.$toast.warning({message:"Quantity can not be greater than total discrepant quantity",orientation:this.$toast.TOP_RIGHT,duration:6e3})}else this.$toast.warning({message:"Date, price, qty and type are required fields",orientation:this.$toast.TOP_RIGHT,duration:6e3})},showEditDiscrepant:function(t){this.editExternalDate=t["trade_date"],this.editExternalPrice=parseFloat(t["price"]).toFixed(2),this.editExternalQty=parseFloat(t["quantity"]).toFixed(4),this.editExternalType=t["external_trade_type"],this.oldExternalQty=parseFloat(t["quantity"]).toFixed(4),this.editExternalId=t["id"],this.showEdit()},editDiscrepant:function(){var t=this;if(this.editExternalDate&&this.editExternalPrice&&this.editExternalQty&&this.editExternalType){for(var e=0,a=0;a<this.externalTrades.length;a++)this.externalTrades[a]["pending_recalc"]&&(e+=parseFloat(this.externalTrades[a]["quantity"]));e-=this.oldExternalQty;var s=this.discSelected["quantity_discrepant"]-e;if(this.editExternalQty<=s){this.editingExternal=!0;var n={id:this.editExternalId.toString(),trade_date:this.editExternalDate,price:parseFloat(this.editExternalPrice),quantity:parseFloat(this.editExternalQty),external_trade_type:this.editExternalType,instrument_id:this.discSelected["instrument_id"],tradingsymbol:this.discSelected["tradingsymbol"],isin:this.discSelected["isin"],segment:this.segment},i=[];i.push(n);var r=C();_["a"].request("PUT",!1,r,i,(function(e,a){t.editingExternal=!1,t.hideEdit(),"SUCCESS"===e.toUpperCase()?(t.getExternalTrades(),t.$toast.success({message:"Edit successful",orientation:t.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error editing trade: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error editing trade:"+_["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}else this.$toast.warning({message:"Quantity can not be grater than discrepant quantity",orientation:this.$toast.TOP_RIGHT,duration:6e3})}else this.$toast.warning({message:"Date, price, qty and type are required fields",orientation:this.$toast.TOP_RIGHT,duration:6e3})},deleteDiscrepant:function(t){var e=this;this.fetchingExternal=!0;var a={id:t["id"].toString(),instrument_id:this.discSelected["instrument_id"],trade_date:t["trade_date"],segment:this.segment},s=[];s.push(a);var n=C();_["a"].request("DELETE",!1,n,s,(function(t,a){"SUCCESS"===t.toUpperCase()?(e.getExternalTrades(),e.$toast.success({message:"Deleted successfully",orientation:e.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===t.toUpperCase()?(e.fetchingExternal=!1,e.$toast.error({message:"Error deleting trade: "+a.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.fetchingExternal=!1,e.$toast.error({message:"Error deleting trade:"+_["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}))}))},getExternalTrades:function(t){var e=this;t&&(this.discSelected=t),this.addExternalDate="",this.addExternalPrice="",this.addExternalQty="",this.addExternalType="",this.closeSideNav(null,1),this.fetchingExternal=!0,this.isPending=!1;var a=C(this.discSelected.instrument_id,this.activeSegment);this.$router.replace({name:"discrepancies",params:{instrument_id:this.discSelected.instrument_id,segment:this.activeSegment}}),_["a"].request("GET",!1,a,null,(function(t,a){if(e.externalTrades=[],"SUCCESS"===t.toUpperCase()){e.fetchingExternal=!1;var s=a.data.data.result;if(s.hasOwnProperty("length")){for(var n=0;n<s.length;n++)!0===s[n]["pending_recalc"]&&(e.isPending=!0);e.externalTrades=s}else e.externalTrades.push(s);e.externalTrades.length>0?e.tradesExist=!0:e.tradesExist=!1}else"FAILURE"===t.toUpperCase()?(e.fetchingExternal=!1,e.$toast.error({message:"Error fetching trades: "+a.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.fetchingExternal=!1,e.$toast.error({message:"Error fetching trades:"+_["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}))}))},showMenu:function(t){t.target.children.length>0?(t.target.children[3].classList.toggle("show"),null!==this.lastClicked&&this.lastClicked!==t.target.children[3]&&this.lastClicked.classList.toggle("show"),this.lastClicked=t.target.children[3]):(t.target.parentNode.children[3].classList.toggle("show"),null!==this.lastClicked&&this.lastClicked!==t.target.parentNode.children[3]&&this.lastClicked.classList.toggle("show"),this.lastClicked=t.target.parentNode.children[3])},getMFHoldingsData:function(){var t=this;return new Promise((function(e,a){var s=function a(){var s="MF",n=b(t.date,s);_["a"].request("GET",!0,n,null,(function(n,i){if("PENDING"===n.toUpperCase())t.eqjob=!0,setTimeout(a,2e3);else if("SUCCESS"===n.toUpperCase()){var r=i.data.data.result;for(var o in r)r[o]["segment"]=s,t.holdings_items.push(r[o]);e()}else"FAILURE"===n.toUpperCase()?(e(),t.$toast.error({message:"Error fetching holdings: "+i.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(e(),t.$toast.error({message:"Error fetching holdings:"+_["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))};s()}))},getEQHoldingsData:function(){var t=this;return new Promise((function(e,a){var s=function a(){var s="EQ";t.job=!0,t.date=w(new Date);var n=b(t.date,s);_["a"].request("GET",!0,n,null,(function(s,n){if("PENDING"===s.toUpperCase())t.job=!0,setTimeout(a,2e3);else if("SUCCESS"===s.toUpperCase()){var i=n.data.data.result;for(var r in i)i[r]["segment"]="EQ",t.holdings_items.push(i[r]);e()}else"FAILURE"===s.toUpperCase()?(t.$toast.error({message:"Error fetching holdings: "+n.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}),e()):(t.$toast.error({message:"Error fetching holdings:"+_["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}),e())}))};s()}))},computeAdd:function(){this.showAdd()},showAdd:function(){this.showAddModal=!0,document.getElementsByTagName("body")[0].style.overflowY="hidden"},hideAdd:function(){this.showAddModal=!1,document.getElementsByTagName("body")[0].style.overflowY="scroll"},showEdit:function(){this.showEditModal=!0,document.getElementsByTagName("body")[0].style.overflowY="hidden"},hideEdit:function(){this.showEditModal=!1,document.getElementsByTagName("body")[0].style.overflowY="scroll"}},components:{datepicker:l.a,"context-menu":c["a"],jobber:d["a"],empty:u["a"]}},x=k,E=a("2877"),T=Object(E["a"])(x,s,n,!1,null,null,null);e["default"]=T.exports},ec83:function(t,e,a){"use strict";e["a"]=function(t,e,a,s,n){var i,r=t.children,o=-1,l=r.length,c=t.value&&(n-a)/t.value;while(++o<l)i=r[o],i.x0=e,i.x1=s,i.y0=a,i.y1=a+=i.value*c}},f3b7:function(t,e,a){"use strict";var s=a("29db"),n=a("1a5a"),i=a("506b"),r={},o={_:{}};o._.Router=s,o._.Client=n,o._.Tunnel=i,o.client=function(t){t=t||{};var e,a=t.namespace||"tabex_default_";return t.iframe?e=new i.TunnelClient(t):(r[a]||(r[a]=new s({namespace:a})),e=r[a]),new n({router:e})},o.router=function(t){t=t||{};var e=t.namespace||"tabex_default_";return r[e]||(r[e]=new s({namespace:e})),new i.TunnelRouter({router:r[e],namespace:e,origin:t.origin}),r[e]},t.exports=o}}]);